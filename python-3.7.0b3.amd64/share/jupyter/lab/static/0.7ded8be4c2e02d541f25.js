webpackJsonp([0],{"+5nH":function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("zsFm"),s=r("2pdF"),o=s.render,u=s.bound,l=r("J731"),f=a.Dependencies,c=r("6gf1"),d=r("XVii"),p=r("Lp/H");function h(e,t,r){this._el=null;this._model=null;this._width=this.__width=t||500;this._height=this.__height=r||300;this._bgcolor=null;this._cursor=true;this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._viewport=null;this._renderer=null;this._handler=null;this._streamer=null;this._skipSignals=false;this._changeset=null;this._repaint=true;this._renderers=o;this._io=null;this._api={}}var m=h.prototype;m.model=function(e){if(!arguments.length)return this._model;if(this._model!==e){this._model=e;this._streamer=new a.Node(e);this._streamer._rank=-1;this._changeset=a.ChangeSet.create();if(this._handler)this._handler.model(e)}return this};function g(e){var t=this,r=this._model.data(e);if(!r)return l.error('Data source "'+e+'" is not defined.');var n=r.pipeline()[0],a=this._streamer,s={};if(this._api[e])return this._api[e];s.insert=function(o){r.insert(i.duplicate(o));a.addListener(n);t._changeset.data[e]=1;return s};s.update=function(){a.addListener(n);t._changeset.data[e]=1;return r.update.apply(r,arguments),s};s.remove=function(){a.addListener(n);t._changeset.data[e]=1;return r.remove.apply(r,arguments),s};s.values=function(){return r.values()};return this._api[e]=s}m.data=function(e){var t=this;if(!arguments.length)return t._model.values();else if(i.isString(e))return g.call(t,e);else if(i.isObject(e)){i.keys(e).forEach(function(r){var n=g.call(t,r);e[r](n)})}return this};var v=i.toMap(["width","height","padding"]);m.signal=function(e,t,r){var n=this._model,a,s;if(!arguments.length){return n.values(f.SIGNALS)}else if(arguments.length===1&&i.isString(e)){return n.values(f.SIGNALS,e)}if(i.isObject(e)){s=e;r=t}else{s={};s[e]=t}for(a in s){if(v[a]){this[a](s[a])}else{y.call(this,a,s[a])}}return this._skipSignals=r,this};function y(e,t){var r=this._changeset,n=this._model.signal(e);if(!n)return l.error('Signal "'+e+'" is not defined.');this._streamer.addListener(n.value(t));r.signals[e]=1;r.reflow=true}m.width=function(e){if(!arguments.length)return this.__width;if(this.__width!==e){this._width=this.__width=e;this.model().width(e);this.initialize();if(this._strict)this._autopad=1;y.call(this,"width",e)}return this};m.height=function(e){if(!arguments.length)return this.__height;if(this.__height!==e){this._height=this.__height=e;this.model().height(e);this.initialize();if(this._strict)this._autopad=1;y.call(this,"height",e)}return this};m.background=function(e){if(!arguments.length)return this._bgcolor;if(this._bgcolor!==e){this._bgcolor=e;this.initialize()}return this};m.padding=function(e){if(!arguments.length)return this._padding;if(this._padding!==e){if(i.isString(e)){this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._strict=e==="strict"}else{this._autopad=0;this._padding=e;this._strict=false}if(this._renderer)this._renderer.resize(this._width,this._height,this._padding);if(this._handler)this._handler.padding(this._padding);y.call(this,"padding",this._padding)}return this._repaint=true,this};function _(){var e=this.model().scene(),t=e.items[0].legendItems,r=0,n=t.length,i,a;if(this._strict){i=u.mark(e,null,false);for(;r<n;++r){a=t[r].bounds;i.add(a.x1,0).add(a.x2,0)}return i}return e.bounds}m.autopad=function(e){if(this._autopad<1)return this;else this._autopad=0;var t=_.call(this),r=this._padding,n=this.model().config(),i=n.autopadInset,a=t.x1<0?Math.ceil(-t.x1)+i:0,s=t.y1<0?Math.ceil(-t.y1)+i:0,o=t.x2>this._width?Math.ceil(+t.x2-this._width)+i:0;t=t.y2>this._height?Math.ceil(+t.y2-this._height)+i:0;r={left:a,top:s,right:o,bottom:t};if(this._strict){this._autopad=0;this._padding=r;this._width=Math.max(0,this.__width-(a+o));this._height=Math.max(0,this.__height-(s+t));this._model.width(this._width).height(this._height).reset();y.call(this,"width",this._width);y.call(this,"height",this._height);y.call(this,"padding",r);this.initialize().update({props:"enter"}).update({props:"update"})}else{this.padding(r).update(e)}return this};m.viewport=function(e){if(!arguments.length)return this._viewport;if(this._viewport!==e){this._viewport=e;this.initialize()}return this};m.renderer=function(e){if(!arguments.length)return this._renderer;if(this._renderers[e])e=this._renderers[e];else if(i.isString(e))throw new Error("Unknown renderer: "+e);else if(!e)throw new Error("No renderer specified");if(this._io!==e){this._io=e;this._renderer=null;this.initialize();if(this._build)this.render()}return this};m.initialize=function(e){var t=this,r,i=t._width,a=t._height,s=t._padding,u=t._bgcolor,l=this.model().config();if(!arguments.length||e===null){e=this._el?this._el.parentNode:null;if(!e)return this}n.select(e).select("div.vega").remove();this._el=e=n.select(e).append("div").attr("class","vega").style("position","relative").node();if(t._viewport){n.select(e).style("width",(t._viewport[0]||i)+"px").style("height",(t._viewport[1]||a)+"px").style("overflow","auto")}o.canvas.Renderer.RETINA=l.render.retina;t._renderer=(t._renderer||new this._io.Renderer(l.load)).initialize(e,i,a,s).background(u);r=t._handler;t._handler=(new this._io.Handler).initialize(e,s,t);if(r){r.handlers().forEach(function(e){t._handler.on(e.type,e.handler)})}else{t._detach=c(this)}return this._repaint=true,this};m.destroy=function(){if(this._detach)this._detach()};function b(){var e=this;e._renderNode=new a.Node(e._model).router(true);e._renderNode.evaluate=function(t){l.debug(t,["rendering"]);var r=e._model.scene(),n=e._handler;if(n&&n.scene)n.scene(r);if(t.trans){t.trans.start(function(t){e._renderer.render(r,t)})}else if(e._repaint){e._renderer.render(r)}else if(t.dirty.length){e._renderer.render(r,t.dirty)}if(t.dirty.length){t.dirty.forEach(function(e){e._dirty=false});r.items[0]._dirty=false}e._repaint=e._skipSignals=false;return t};return e._model.scene(e._renderNode),true}m.update=function(e){e=e||{};var t=this,r=this._model,n=this._streamer,s=this._changeset,o=e.duration?new p(e.duration,e.ease):null;if(o)s.trans=o;if(e.props!==undefined){if(i.keys(s.data).length>0){throw Error("New data values are not reflected in the visualization."+" Please call view.update() before updating a specified property set.")}s.reflow=true;s.request=e.props}var u=t._build;t._build=t._build||b.call(this);if(e.items&&u){d.update(r,e.trans,e.props,e.items,s.dirty);t._renderNode.evaluate(s)}else if(n.listeners().length&&u){if(this._repaint)n.addListener(r.node());r.propagate(s,n,null,this._skipSignals);n.disconnect()}else{r.fire(s)}t._changeset=a.ChangeSet.create();return t.autopad(e)};m.toImageURL=function(e){var t=this,r;switch(e||"png"){case"canvas":case"png":r=o.canvas.Renderer;break;case"svg":r=o.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+e)}var n=o.canvas.Renderer.RETINA;o.canvas.Renderer.RETINA=false;var i=new r(t._model.config.load).initialize(null,t._width,t._height,t._padding).background(t._bgcolor).render(t._model.scene());o.canvas.Renderer.RETINA=n;if(e==="svg"){var a=new Blob([i.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(a)}else{return i.canvas().toDataURL("image/png")}};m.render=function(e){this._renderer.render(this._model.scene(),e);return this};m.on=function(){this._handler.on.apply(this._handler,arguments);return this};m.onSignal=function(e,t){var r=this._model.signal(e);return r?r.on(t):l.error('Signal "'+e+'" is not defined.'),this};m.off=function(){this._handler.off.apply(this._handler,arguments);return this};m.offSignal=function(e,t){var r=this._model.signal(e);return r?r.off(t):l.error('Signal "'+e+'" is not defined.'),this};h.factory=function(e){var t=r("oCPx");return function(r){r=r||{};var a=e.defs();var s=(r.el?new h:new t).model(e).renderer(r.renderer||"canvas").width(a.width).height(a.height).background(a.background).padding(a.padding).viewport(a.viewport).initialize(r.el);if(r.data)s.data(r.data);if(r.el){if(r.hover!==false){s.on("mouseover",function(e,t){if(t&&t.hasPropertySet("hover")){this.update({props:"hover",items:t})}}).on("mouseout",function(e,t){if(t&&t.hasPropertySet("hover")){this.update({props:"update",items:t})}})}if(r.cursor!==false){s.onSignal("cursor",function(e,t){var r=n.select("body");if(i.isString(t)){s._cursor=t==="default";r.style("cursor",t)}else if(i.isObject(t)&&s._cursor){r.style("cursor",t.default)}})}}return s}};e.exports=h},"+Xqm":function(e,t,r){var n=r("VY+T"),i=r("3Lw3"),a=r("KKvq");function s(){i.call(this);this._down=null;this._touch=null;this._first=true}var o=i.prototype;var u=s.prototype=Object.create(o);u.constructor=s;u.initialize=function(e,t,r){var i=this._canvas=n.find(e,"canvas");if(i){var a=this;this.events.forEach(function(e){i.addEventListener(e,function(t){if(u[e]){u[e].call(a,t)}else{a.fire(e,t)}})})}return o.initialize.call(this,e,t,r)};u.canvas=function(){return this._canvas};u.context=function(){return this._canvas.getContext("2d")};u.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"];u.DOMMouseScroll=function(e){this.fire("mousewheel",e)};function l(e,t,r){return function(n){var i=this._active,a=this.pickEvent(n);if(a===i){this.fire(e,n)}else{this.fire(r,n);this._active=a;this.fire(t,n);this.fire(e,n)}}}function f(e){return function(t){this.fire(e,t);this._active=null}}u.mousemove=l("mousemove","mouseover","mouseout");u.dragover=l("dragover","dragenter","dragleave");u.mouseout=f("mouseout");u.dragleave=f("dragleave");u.mousedown=function(e){this._down=this._active;this.fire("mousedown",e)};u.click=function(e){if(this._down===this._active){this.fire("click",e);this._down=null}};u.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]);if(this._first){this._active=this._touch;this._first=false}this.fire("touchstart",e,true)};u.touchmove=function(e){this.fire("touchmove",e,true)};u.touchend=function(e){this.fire("touchend",e,true);this._touch=null};u.fire=function(e,t,r){var n=r?this._touch:this._active,i=this._handlers[e],a,s;if(i){t.vegaType=e;for(a=0,s=i.length;a<s;++a){i[a].handler.call(this._obj,t,n)}}};u.on=function(e,t){var r=this.eventName(e),n=this._handlers;(n[r]||(n[r]=[])).push({type:e,handler:t});return this};u.off=function(e,t){var r=this.eventName(e),n=this._handlers[r],i;if(!n)return;for(i=n.length;--i>=0;){if(n[i].type!==e)continue;if(!t||n[i].handler===t)n.splice(i,1)}return this};u.pickEvent=function(e){var t=this._canvas.getBoundingClientRect(),r=this._padding,n,i;return this.pick(this._scene,n=e.clientX-t.left,i=e.clientY-t.top,n-r.left,i-r.top)};u.pick=function(e,t,r,n,i){var s=this.context(),o=a[e.marktype];return o.pick.call(this,s,e,t,r,n,i)};e.exports=s},"/2vj":function(e,t,r){var n=r("zF6n");var i=r("uHQN");var a="__dl_rem__";function s(e){this._add=[];this._rem=[];this._key=e||null;this._last=null}var o=s.prototype;o.add=function(e){this._add.push(e)};o.rem=function(e){this._rem.push(e)};o.values=function(){this._get=null;if(this._rem.length===0)return this._add;var e=this._add,t=this._rem,r=this._key,s=Array(e.length-t.length),o,u,l,f;if(!n.isObject(t[0])){f=i.count.map(t);for(o=0,u=0,l=e.length;o<l;++o){if(f[e[o]]>0){f[e[o]]-=1}else{s[u++]=e[o]}}}else if(r){f=n.toMap(t,r);for(o=0,u=0,l=e.length;o<l;++o){if(!f.hasOwnProperty(r(e[o]))){s[u++]=e[o]}}}else{for(o=0,l=t.length;o<l;++o){t[o][a]=1}for(o=0,u=0,l=e.length;o<l;++o){if(!e[o][a]){s[u++]=e[o]}}for(o=0,l=t.length;o<l;++o){delete t[o][a]}}this._rem=[];return this._add=s};o.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),r=i.extent.index(t,e);this._ext=[t[r[0]],t[r[1]]];this._get=e}return this._ext};o.argmin=function(e){return this.extent(e)[0]};o.argmax=function(e){return this.extent(e)[1]};o.min=function(e){var t=this.extent(e)[0];return t!=null?e(t):+Infinity};o.max=function(e){var t=this.extent(e)[1];return t!=null?e(t):-Infinity};o.quartile=function(e){if(this._get!==e||!this._q){this._q=i.quartile(this.values(),e);this._get=e}return this._q};o.q1=function(e){return this.quartile(e)[0]};o.q2=function(e){return this.quartile(e)[1]};o.q3=function(e){return this.quartile(e)[2]};e.exports=s},"/7Ur":function(e,t,r){"use strict";var n=r("h/tW");var i=r("z5TJ");var a=r("WJ2w");var s=r("QSMf");var o=r("j8cM");t.DELIM="|";t.ASSIGN="=";t.TYPE=",";t.FUNC="_";function u(e){return"mark"+t.ASSIGN+e.mark+t.DELIM+f(e.encoding)}t.shorten=u;function l(e,r,n){var i=e.split(t.DELIM),a=i.shift().split(t.ASSIGN)[1].trim(),s=c(i.join(t.DELIM));var u={mark:o.Mark[a],encoding:s};if(r!==undefined){u.data=r}if(n!==undefined){u.config=n}return u}t.parse=l;function f(e){return s.map(e,function(e,r){return r+t.ASSIGN+d(e)}).join(t.DELIM)}t.shortenEncoding=f;function c(e){return e.split(t.DELIM).reduce(function(e,r){var n=r.split(t.ASSIGN),i=n[0].trim(),a=n[1];e[i]=h(a);return e},{})}t.parseEncoding=c;function d(e){return(e.aggregate?e.aggregate+t.FUNC:"")+(e.timeUnit?e.timeUnit+t.FUNC:"")+(e.bin?"bin"+t.FUNC:"")+(e.field||"")+t.TYPE+a.SHORT_TYPE[e.type]}t.shortenFieldDef=d;function p(e,r){if(r===void 0){r=t.DELIM}return e.map(d).join(r)}t.shortenFieldDefs=p;function h(e){var r=e.split(t.TYPE);var s={field:r[0].trim(),type:a.TYPE_FROM_SHORT_TYPE[r[1].trim()]};for(var o=0;o<n.AGGREGATE_OPS.length;o++){var u=n.AGGREGATE_OPS[o];if(s.field.indexOf(u+"_")===0){s.field=s.field.substr(u.toString().length+1);if(u===n.AggregateOp.COUNT&&s.field.length===0){s.field="*"}s.aggregate=u;break}}for(var o=0;o<i.TIMEUNITS.length;o++){var l=i.TIMEUNITS[o];if(s.field&&s.field.indexOf(l+"_")===0){s.field=s.field.substr(s.field.length+1);s.timeUnit=l;break}}if(s.field&&s.field.indexOf("bin_")===0){s.field=s.field.substr(4);s.bin=true}return s}t.parseFieldDef=h},"/lc5":function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("4JPs");function s(e){a.prototype.init.call(this,e);a.addParameters(this,{by:{type:"array<field>"}});this.router(true)}var o=s.prototype=Object.create(a.prototype);o.constructor=s;o.transform=function(e){i.debug(e,["sorting"]);if(e.add.length||e.mod.length||e.rem.length){e.sort=n.comparator(this.param("by").field)}return e};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Sort transform",description:"Sorts the values of a data set.",type:"object",properties:{type:{enum:["sort"]},by:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"A list of fields to use as sort criteria."}},required:["type","by"]}},"0ZZw":function(e,t,r){"use strict";var n=r("P/aK");var i=r("QSMf");var a=r("o+e1");var s=r("j8cM");var o=r("Fw/k");var u=r("ZAUf");var l=r("k2D6");var f=r("SIx5");var c=r("MtYt");var d=r("HES2");var p=r("rKP5");var h=r("8lgt");var m=r("G+HP");var g=r("XL1Y");var v={area:l.area,bar:f.bar,line:d.line,point:p.point,text:m.text,tick:g.tick,rule:h.rule,circle:p.circle,square:p.square};function y(e){if(u.contains([s.LINE,s.AREA],e.mark())){return _(e)}else{return b(e)}}t.parseMark=y;function _(e){var t=e.mark();var r=e.parent()&&e.parent().isFacet();var i={data:e.dataTable()};var a=S(e);var o=[{name:e.name("marks"),type:v[t].markType(),from:u.extend(r||a.length>0?{}:i,{transform:[{type:"sort",by:k(e)}]}),properties:{update:v[t].properties(e)}}];if(a.length>0){var l={type:"facet",groupby:a};var f=t===s.AREA&&e.stack()?T(e,true).concat(l):[].concat(l,e.has(n.ORDER)?[{type:"sort",by:x(e)}]:[]);return[{name:e.name("pathgroup"),type:"group",from:u.extend(r?{}:i,{transform:f}),properties:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:o}]}else{return o}}function b(e){var t=e.mark();var r=e.parent()&&e.parent().isFacet();var i={data:e.dataTable()};var a=[];if(t===s.TEXT&&e.has(n.COLOR)&&e.config().mark.applyColorToBackground&&!e.has(n.X)&&!e.has(n.Y)){a.push(u.extend({name:e.name("background"),type:"rect"},r?{}:{from:i},{properties:{update:m.text.background(e)}}))}a.push(u.extend({name:e.name("marks"),type:v[t].markType()},!r||e.stack()||e.has(n.ORDER)?{from:u.extend(r?{}:i,e.stack()?{transform:T(e,false)}:e.has(n.ORDER)?{transform:[{type:"sort",by:x(e)}]}:{})}:{},{properties:{update:v[t].properties(e)}}));if(e.has(n.LABEL)&&v[t].labels){var o=v[t].labels(e);if(o!==undefined){a.push(u.extend({name:e.name("label"),type:"text"},r?{}:{from:i},{properties:{update:o}}))}}return a}function x(e){if(e.has(n.ORDER)){var t=e.encoding().order;if(t instanceof Array){return t.map(c.sortField)}else{return c.sortField(t)}}return null}function k(e){if(e.mark()===s.LINE&&e.has(n.PATH)){var t=e.encoding().path;if(t instanceof Array){return t.map(c.sortField)}else{return c.sortField(t)}}else{return"-"+e.field(e.config().mark.orient==="horizontal"?n.Y:n.X,{binSuffix:"_mid"})}}function S(e){return[n.COLOR,n.DETAIL,n.OPACITY,n.SHAPE].reduce(function(t,r){if(e.has(r)&&!e.fieldDef(r).aggregate){t.push(e.field(r))}return t},[])}function T(e,t){var r=E(e);if(t){return[A(e,r),O(e,r)]}return[O(e,r)]}function E(e){var t=e.encoding();return n.STACK_GROUP_CHANNELS.reduce(function(r,n){var s=t[n];if(i.has(t,n)){if(u.isArray(s)){s.forEach(function(e){r.push(a.field(e))})}else{var l=s;var f=e.scale(n);r.push(a.field(l,{binSuffix:f&&f.type===o.ScaleType.ORDINAL?"_range":"_start"}))}}return r},[])}function A(e,t){var r=e.stack();return{type:"impute",field:e.field(r.fieldChannel),groupby:t,orderby:[e.field(r.groupbyChannel,{binSuffix:"_mid"})],method:"value",value:0}}function O(e,t){var r=e.stack();var i=e.encoding();var a=e.has(n.ORDER)?(u.isArray(i[n.ORDER])?i[n.ORDER]:[i[n.ORDER]]).map(c.sortField):t.map(function(e){return"-"+e});var s=e.field(r.fieldChannel);var o={type:"stack",groupby:[e.field(r.groupbyChannel,{binSuffix:"_mid"})],field:e.field(r.fieldChannel),sortby:a,output:{start:s+"_start",end:s+"_end"}};if(r.offset){o.offset=r.offset}return o}},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},"1PdY":function(e,t,r){"use strict";var n;(function(e){function t(e){return e.transform().filter}e.parseUnit=t;function r(e){var r=t(e);var n=e.child().component.data;if(!n.source&&n.filter){r=(r?r+" && ":"")+n.filter;delete n.filter}return r}e.parseFacet=r;function n(e){var r=t(e);e.children().forEach(function(t){var n=t.component.data;if(e.compatibleSource(t)&&n.filter&&n.filter===r){delete n.filter}});return r}e.parseLayer=n;function i(e){var t=e.filter;return t?[{type:"filter",test:t}]:[]}e.assemble=i})(n=t.filter||(t.filter={}))},"1ifp":function(e,t,r){var n=r("nxjn"),i=r("5meb");var a=e.exports={parse:function(e,t){return n.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var r=i(t),n=e.length,s=function(t){var i=r(a.parse(t));e[n]='"use strict"; return ('+i.code+");";var s=Function.apply(null,e);i.fn=e.length>8?function(){return s.apply(i,arguments)}:function(e,t,r,n,a,o,u){return s.call(i,e,t,r,n,a,o,u)};return i};s.codegen=r;return s},functions:r("EmQ7"),constants:r("jJJB")}},"2I0S":function(e,t,r){var n=r("zF6n");var i={values:a({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:a({name:"count",set:"cell.num"}),missing:a({name:"missing",set:"this.missing"}),valid:a({name:"valid",set:"this.valid"}),sum:a({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:a({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:a({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:a({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:a({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:a({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:a({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:a({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:a({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:a({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:a({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:a({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:a({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:a({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:a({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:a({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:a({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};function a(e){return function(t){var r=n.extend({init:"",add:"",rem:"",idx:0},e);r.out=t||e.name;return r}}function s(e,t){function r(e,n){function a(t){if(!e[t])r(e,e[t]=i[t]())}if(n.req)n.req.forEach(a);if(t&&n.str)n.str.forEach(a);return e}var a=e.reduce(r,e.reduce(function(e,t){return e[t.name]=t,e},{}));return n.vals(a).sort(function(e,t){return e.idx-t.idx})}function o(e,t,i,a){var o=s(e,t),u="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",l="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",f="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",c="var t = this.tuple; var cell = this.cell;";o.forEach(function(e){if(e.idx<0){u=e.init+u;l=e.add+l;f=e.rem+f}else{u+=e.init;l+=e.add;f+=e.rem}});e.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){c+="this.assign(t,'"+e.out+"',"+e.set+");"});c+="return t;";u=Function("cell","t",u);u.prototype.assign=a;u.prototype.add=Function("t","var v = this.get(t);"+l);u.prototype.rem=Function("t","var v = this.get(t);"+f);u.prototype.set=Function(c);u.prototype.get=i;u.prototype.distinct=r("uHQN").count.distinct;u.prototype.isValid=n.isValid;u.fields=e.map(n.$("out"));return u}i.create=o;e.exports=i},"2pdF":function(e,t,r){e.exports={path:r("LhY1"),render:r("tb3c"),Item:r("zDyX"),bound:r("F3Ub"),Bounds:r("SwAC"),canvas:r("oHkv"),Gradient:r("Fv98"),toJSON:r("l/hG").toJSON,fromJSON:r("l/hG").fromJSON}},"3C/O":function(e,t,r){var n=r("Za4h"),i=r("Zrjw"),a=r("J731"),s=r("4JPs"),o=r("acp7");function u(e){o.prototype.init.call(this,e);s.addParameters(this,{clipExtent:{type:"array<value>",default:r("MRce").extent},x:{type:"field",default:"layout_x"},y:{type:"field",default:"layout_y"}});this._layout=n.geom.voronoi();this._output={path:"layout_path"};return this.mutates(true)}var l=u.prototype=Object.create(o.prototype);l.constructor=u;l.batchTransform=function(e,t){a.debug(e,["voronoi"]);var r=this._output.path;var n=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(t);for(var s=0;s<t.length;++s){if(n[s])i.set(t[s],r,"M"+n[s].join("L")+"Z")}e.fields[r]=1;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Voronoi transform",type:"object",properties:{type:{enum:["voronoi"]},clipExtent:{description:"The min and max points at which to clip the voronoi diagram.",oneOf:[{type:"array",items:{oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[[-1e5,-1e5],[1e5,1e5]]},x:{description:"The input x coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},y:{description:"The input y coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},"3Lw3":function(e,t){function r(){this._active=null;this._handlers={}}var n=r.prototype;n.initialize=function(e,t,r){this._el=e;this._obj=r||null;return this.padding(t)};n.element=function(){return this._el};n.padding=function(e){this._padding=e||{top:0,left:0,bottom:0,right:0};return this};n.scene=function(e){if(!arguments.length)return this._scene;this._scene=e;return this};n.on=function(){};n.off=function(){};n.handlers=function(){var e=this._handlers,t=[],r;for(r in e){t.push.apply(t,e[r])}return t};n.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)};e.exports=r},"3OjF":function(e,t,r){var n=r("GMts"),i=r("VkFx"),a=r("DbaP"),s=r("VY+T"),o=r("UTTf"),u=o.metadata.xmlns,l=r("ifCQ");function f(e){i.call(this);this._loader=new n(e);this._dirtyID=0}var c=i.prototype;var d=f.prototype=Object.create(c);d.constructor=f;d.initialize=function(e,t,r,n){if(e){this._svg=s.child(e,0,"svg",u,"marks");s.clear(e,1);this._root=s.child(this._svg,0,"g",u);s.clear(this._svg,1)}this._defs={clip_id:1,gradient:{},clipping:{}};this.background(this._bgcolor);return c.initialize.call(this,e,t,r,n)};d.background=function(e){if(arguments.length&&this._svg){this._svg.style.setProperty("background-color",e)}return c.background.apply(this,arguments)};d.resize=function(e,t,r){c.resize.call(this,e,t,r);if(this._svg){var n=this._width,i=this._height,a=this._padding;this._svg.setAttribute("width",n+a.left+a.right);this._svg.setAttribute("height",i+a.top+a.bottom);this._root.setAttribute("transform","translate("+a.left+","+a.top+")")}return this};d.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var t in o.metadata){e[t]=o.metadata[t]}return s.openTag("svg",e)+this._svg.innerHTML+s.closeTag("svg")};d.imageURL=function(e){return this._loader.imageURL(e)};d.render=function(e,t){if(this._dirtyCheck(t)){if(this._dirtyAll)this._resetDefs();this.draw(this._root,e,-1);s.clear(this._root,1)}this.updateDefs();return this};d.draw=function(e,t,r){this.drawMark(e,t,r,l[t.marktype])};d.updateDefs=function(){var e=this._svg,t=this._defs,r=t.el,n=0,i;for(i in t.gradient){if(!r)r=t.el=s.child(e,0,"defs",u);p(r,t.gradient[i],n++)}for(i in t.clipping){if(!r)r=t.el=s.child(e,0,"defs",u);h(r,t.clipping[i],n++)}if(r){if(n===0){e.removeChild(r);t.el=null}else{s.clear(r,n)}}};function p(e,t,r){var n,i,a;e=s.child(e,r,"linearGradient",u);e.setAttribute("id",t.id);e.setAttribute("x1",t.x1);e.setAttribute("x2",t.x2);e.setAttribute("y1",t.y1);e.setAttribute("y2",t.y2);for(n=0,i=t.stops.length;n<i;++n){a=s.child(e,n,"stop",u);a.setAttribute("offset",t.stops[n].offset);a.setAttribute("stop-color",t.stops[n].color)}s.clear(e,n)}function h(e,t,r){var n;e=s.child(e,r,"clipPath",u);e.setAttribute("id",t.id);n=s.child(e,0,"rect",u);n.setAttribute("x",0);n.setAttribute("y",0);n.setAttribute("width",t.width);n.setAttribute("height",t.height)}d._resetDefs=function(){var e=this._defs;e.clip_id=1;e.gradient={};e.clipping={}};d.isDirty=function(e){return this._dirtyAll||e.dirty===this._dirtyID};d._dirtyCheck=function(e){this._dirtyAll=true;if(!e)return true;var t=++this._dirtyID,r,n,i,a,o,u,f;for(o=0,u=e.length;o<u;++o){r=e[o];n=r.mark;if(n.marktype!==i){i=n.marktype;a=l[i]}if(r.status==="exit"){if(r._svg){if(a.nest&&r.mark.items.length){this._update(a,r._svg,r.mark.items[0]);f=r.mark.items[0];f._svg=r._svg;f._update=t}else{s.remove(r._svg)}r._svg=null}continue}r=a.nest?n.items[0]:r;if(r._update===t){continue}else if(r._svg){this._update(a,r._svg,r)}else{this._dirtyAll=false;m(r,t)}r._update=t}return!this._dirtyAll};function m(e,t){for(;e&&e.dirty!==t;e=e.mark.group){e.dirty=t;if(e.mark&&e.mark.dirty!==t){e.mark.dirty=t}else return}}d.drawMark=function(e,t,r,n){if(!this.isDirty(t))return;var i=n.nest?t.items&&t.items.length?[t.items[0]]:[]:t.items||[],a=t.interactive===false?"none":null,o=n.tag==="g",l=s.cssClass(t),f,c,d,p,h,m;f=s.child(e,r+1,"g",u,l);f.setAttribute("class",l);t._svg=f;if(!o&&a){f.style.setProperty("pointer-events",a)}for(c=0,d=i.length;c<d;++c){if(this.isDirty(h=i[c])){m=!(this._dirtyAll||h._svg);p=g(f,n,h,c,m);this._update(n,p,h);if(o){if(m)this._dirtyAll=true;this._recurse(p,h);if(m)this._dirtyAll=false}}}s.clear(f,c);return f};d._recurse=function(e,t){var r=t.items||[],n=t.legendItems||[],i=t.axisItems||[],a=0,o,u;for(o=0,u=i.length;o<u;++o){if(i[o].layer==="back"){this.drawMark(e,i[o],a++,l.group)}}for(o=0,u=r.length;o<u;++o){this.draw(e,r[o],a++)}for(o=0,u=i.length;o<u;++o){if(i[o].layer!=="back"){this.drawMark(e,i[o],a++,l.group)}}for(o=0,u=n.length;o<u;++o){this.drawMark(e,n[o],a++,l.group)}s.clear(e,1+a)};function g(e,t,r,n,i){var a=s.child(e,n,t.tag,u,null,i);a.__data__=r;a.__values__={fill:"default"};if(t.tag==="g"){var o=s.child(a,0,"rect",u,"background");o.__data__=r}return r._svg=a}var v=null,y=null;var _={group:function(e,t,r){v=t.childNodes[0];y=t.__values__;e.background(b,r,this);var n=r.mark.interactive===false?"none":null;if(n!==y.events){v.style.setProperty("pointer-events",n);y.events=n}},text:function(e,t,r){var n=a.value(r.text);if(n!==y.text){t.textContent=n;y.text=n}n=a.font(r);if(n!==y.font){t.style.setProperty("font",n);y.font=n}}};d._update=function(e,t,r){v=t;y=t.__values__;e.attr(b,r,this);var n=_[e.type];if(n)n(e,t,r);this.style(v,r)};function b(e,t,r){if(t===y[e])return;if(t!=null){if(r){v.setAttributeNS(r,e,t)}else{v.setAttribute(e,t)}}else{if(r){v.removeAttributeNS(r,e)}else{v.removeAttribute(e)}}y[e]=t}d.style=function(e,t){if(t==null)return;var r,n,i,a,s;for(r=0,n=o.styleProperties.length;r<n;++r){i=o.styleProperties[r];s=t[i];if(s===y[i])continue;a=o.styles[i];if(s==null){if(a==="fill"){e.style.setProperty(a,"none")}else{e.style.removeProperty(a)}}else{if(s.id){this._defs.gradient[s.id]=s;s="url("+x()+"#"+s.id+")"}e.style.setProperty(a,s+"")}y[i]=s}};function x(){return typeof window!=="undefined"?window.location.href:""}e.exports=f},"3Y21":function(e,t,r){var n=r("zicW"),i=r("zsFm"),a=r("J731"),s=i.ChangeSet,o=i.Tuple,u=i.Dependencies,l=r("4JPs"),f=r("QvNu");function c(e){l.prototype.init.call(this,e);l.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){var t={},r=this._transform,i,a,s,o,l,f;if(!n.isArray(o=e)){o=[];for(l in e){f=n.array(e[l]);o.push({field:l,ops:f})}}function c(e){if(e.signal)t[e.signal]=1}for(i=0,a=o.length;i<a;++i){s=o[i];if(s.field.signal){t[s.field.signal]=1}n.array(s.ops).forEach(c);n.array(s.as).forEach(c)}r._fields=o;r._aggr=null;r.dependency(u.SIGNALS,n.keys(t));return r}}});this._aggr=null;this._input=null;this._args=null;this._fields=[];this._out=[];this._type=p.TUPLE;this._acc={groupby:n.true,value:n.true};return this.router(true).produces(true)}var d=c.prototype=Object.create(l.prototype);d.constructor=c;var p=c.TYPES={VALUE:1,TUPLE:2,MULTI:3};c.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"];d.type=function(e){return this._type=e,this};d.accessors=function(e,t){var r=this._acc;r.groupby=n.$(e)||n.true;r.value=n.$(t)||n.true};d.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=false,r=[],i=this.param("groupby").field,a=function(t){return t.signal?e.signalRef(t.signal):t};var s=this._fields.map(function(e){var i={name:a(e.field),as:n.array(e.as),ops:n.array(a(e.ops)).map(a),get:e.get};t=t||i.get!=null;r.push(i.name);return i});i.forEach(function(e){if(e.get)t=true;r.push(e.name||e)});this._args=t||!s.length?null:r;if(!s.length)s={"*":"values"};var o=this._aggr=(new f).groupby(i).stream(true).summarize(s);this._out=h(o);if(this._type!==p.VALUE){o.key("_id")}return o};function h(e){var t=[],r,n,i,a,s,o,u;s=e._dims;for(r=0,n=s.length;r<n;++r){t.push(s[r].name)}o=e._aggr;for(r=0,n=o.length;r<n;++r){u=o[r].measures.fields;for(i=0,a=u.length;i<a;++i){t.push(u[i])}}return t}d.transform=function(e,t){a.debug(e,["aggregate"]);var r=s.create(e),n=this.aggr(),i=this._out,u=this._args,l=true,f=o.prev,c,d,h,m,g;if(t){r.rem.push.apply(r.rem,n.result());n.clear();this._aggr=null;n=this.aggr()}if(this._type===p.TUPLE){c=function(e){n._add(e);o.prev_init(e)};d=function(e){n._rem(f(e))};h=function(e){n._mod(e,f(e))};m=function(e){n._markMod(e,f(e))}}else{var v=this._acc.groupby,y=this._acc.value,_=this._type===p.VALUE?y:function(e){return{_id:e._id,groupby:v(e),value:y(e)}};c=function(e){n._add(_(e));o.prev_init(e)};d=function(e){n._rem(_(f(e)))};h=function(e){n._mod(_(e),_(f(e)))};m=function(e){n._mark(_(e),_(f(e)))}}e.add.forEach(c);if(t){e.mod.forEach(c)}else{e.rem.forEach(d);if(u)for(g=0,l=false;g<u.length;++g){if(e.fields[u[g]]){l=true;break}}e.mod.forEach(l?h:m)}for(g=0;g<i.length;++g){r.fields[i[g]]=1}return n._input=e,n.changes(r)};e.exports=c;var m=c.VALID_OPS;c.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Aggregate transform",description:"Compute summary aggregate statistics",type:"object",properties:{type:{enum:["aggregate"]},groupby:{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},description:"A list of fields to split the data into groups."},summarize:{oneOf:[{type:"object",additionalProperties:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{enum:m},{$ref:"#/refs/signal"}]}}},{type:"array",items:{type:"object",properties:{field:{description:"The name of the field to aggregate.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},ops:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{enum:m},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"An optional array of names to use for the output fields.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}}},additionalProperties:false,required:["field","ops"]}}]}},additionalProperties:false,required:["type"]}},"3bKu":function(e,t,r){var n=r("zF6n"),i=r("mgrV"),a=i.utc;var s=e.exports;s.$year=n.$func("year",i.year.unit);s.$month=n.$func("month",i.months.unit);s.$date=n.$func("date",i.dates.unit);s.$day=n.$func("day",i.weekdays.unit);s.$hour=n.$func("hour",i.hours.unit);s.$minute=n.$func("minute",i.minutes.unit);s.$second=n.$func("second",i.seconds.unit);s.$utcYear=n.$func("utcYear",a.year.unit);s.$utcMonth=n.$func("utcMonth",a.months.unit);s.$utcDate=n.$func("utcDate",a.dates.unit);s.$utcDay=n.$func("utcDay",a.weekdays.unit);s.$utcHour=n.$func("utcHour",a.hours.unit);s.$utcMinute=n.$func("utcMinute",a.minutes.unit);s.$utcSecond=n.$func("utcSecond",a.seconds.unit)},"3lgv":function(e,t,r){var n=r("FF9f"),i=r("esTF"),a=r("YExv");function s(e,t){if(t.path==null)return true;var r=t.pathCache||(t.pathCache=i(t.path));a(e,r,t.x,t.y)}e.exports={draw:n.drawAll(s),pick:n.pickPath(s)}},"4JPs":function(e,t,r){var n=r("zsFm"),i=n.Node.prototype,a=n.Dependencies,s=r("fRRI");function o(e){if(e)i.init.call(this,e)}o.addParameters=function(e,t){e._parameters=e._parameters||{};for(var r in t){var n=t[r],i=new s(r,n.type,e);e._parameters[r]=i;if(n.type==="custom"){if(n.set)i.set=n.set.bind(i);if(n.get)i.get=n.get.bind(i)}if(n.hasOwnProperty("default"))i.set(n.default)}};var u=o.prototype=Object.create(i);u.constructor=o;u.param=function(e,t){var r=this._parameters[e];return r===undefined?this:arguments.length===1?r.get():r.set(t)};u.transform=function(e){return e};u.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(a.SIGNALS).reduce(function(t,r){return t+=e.signals[r]?1:0},0);return this.transform(e,t)};u.output=function(e){for(var t in this._output){if(e[t]!==undefined){this._output[t]=e[t]}}return this};e.exports=o},"4Wr6":function(e,t){e.exports=function(e,t,r){var n=e.open(t),i=1e4,a=250,s=~~(i/a);function o(t){if(t.source===n){s=0;e.removeEventListener("message",o,false)}}e.addEventListener("message",o,false);function u(){if(s<=0)return;n.postMessage(r,"*");setTimeout(u,a);s-=1}setTimeout(u,a)}},"4iS9":function(e,t,r){(function(e,n){true?n(t,r("pd8q")):typeof define==="function"&&define.amd?define("d3-time-format",["exports","d3-time"],n):n(e.d3_time_format={},e.d3_time)})(this,function(e,t){"use strict";function r(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function n(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){var t=e.dateTime,a=e.date,o=e.time,u=e.periods,l=e.days,f=e.shortDays,c=e.months,ne=e.shortMonths;var ie=d(u),ae=p(u),se=d(l),oe=p(l),ue=d(f),le=p(f),fe=d(c),ce=p(c),de=d(ne),pe=p(ne);var he={a:Me,A:we,b:Le,B:Ne,c:null,d:M,e:M,H:w,I:L,j:N,L:C,m:R,M:I,p:Ce,S:D,U,w:P,W:z,x:null,X:null,y:F,Y:j,Z:Y,"%":re};var me={a:Re,A:Ie,b:De,B:Ue,c:null,d:$,e:$,H:q,I:W,j:H,L:X,m:G,M:V,p:Pe,S:B,U:J,w:Z,W:Q,x:null,X:null,y:K,Y:ee,Z:te,"%":re};var ge={a:xe,A:ke,b:Se,B:Te,c:Ee,d:x,e:x,H:S,I:S,j:k,L:A,m:b,M:T,p:be,S:E,U:m,w:h,W:g,x:Ae,X:Oe,y,Y:v,Z:_,"%":O};he.x=ve(a,he);he.X=ve(o,he);he.c=ve(t,he);me.x=ve(a,me);me.X=ve(o,me);me.c=ve(t,me);function ve(e,t){return function(r){var n=[],i=-1,a=0,o=e.length,u,l,f;if(!(r instanceof Date))r=new Date(+r);while(++i<o){if(e.charCodeAt(i)===37){n.push(e.slice(a,i));if((l=s[u=e.charAt(++i)])!=null)u=e.charAt(++i);else l=u==="e"?" ":"0";if(f=t[u])u=f(r,l);n.push(u);a=i+1}}n.push(e.slice(a,i));return n.join("")}}function ye(e,t){return function(r){var a=i(1900),s=_e(a,e,r+="",0);if(s!=r.length)return null;if("p"in a)a.H=a.H%12+a.p*12;if("W"in a||"U"in a){if(!("w"in a))a.w="W"in a?1:0;var o="Z"in a?n(i(a.y)).getUTCDay():t(i(a.y)).getDay();a.m=0;a.d="W"in a?(a.w+6)%7+a.W*7-(o+5)%7:a.w+a.U*7-(o+6)%7}if("Z"in a){a.H+=a.Z/100|0;a.M+=a.Z%100;return n(a)}return t(a)}}function _e(e,t,r,n){var i=0,a=t.length,o=r.length,u,l;while(i<a){if(n>=o)return-1;u=t.charCodeAt(i++);if(u===37){u=t.charAt(i++);l=ge[u in s?t.charAt(i++):u];if(!l||(n=l(e,r,n))<0)return-1}else if(u!=r.charCodeAt(n++)){return-1}}return n}function be(e,t,r){var n=ie.exec(t.slice(r));return n?(e.p=ae[n[0].toLowerCase()],r+n[0].length):-1}function xe(e,t,r){var n=ue.exec(t.slice(r));return n?(e.w=le[n[0].toLowerCase()],r+n[0].length):-1}function ke(e,t,r){var n=se.exec(t.slice(r));return n?(e.w=oe[n[0].toLowerCase()],r+n[0].length):-1}function Se(e,t,r){var n=de.exec(t.slice(r));return n?(e.m=pe[n[0].toLowerCase()],r+n[0].length):-1}function Te(e,t,r){var n=fe.exec(t.slice(r));return n?(e.m=ce[n[0].toLowerCase()],r+n[0].length):-1}function Ee(e,r,n){return _e(e,t,r,n)}function Ae(e,t,r){return _e(e,a,t,r)}function Oe(e,t,r){return _e(e,o,t,r)}function Me(e){return f[e.getDay()]}function we(e){return l[e.getDay()]}function Le(e){return ne[e.getMonth()]}function Ne(e){return c[e.getMonth()]}function Ce(e){return u[+(e.getHours()>=12)]}function Re(e){return f[e.getUTCDay()]}function Ie(e){return l[e.getUTCDay()]}function De(e){return ne[e.getUTCMonth()]}function Ue(e){return c[e.getUTCMonth()]}function Pe(e){return u[+(e.getUTCHours()>=12)]}return{format:function(e){var t=ve(e+="",he);t.parse=ye(e,r);t.toString=function(){return e};return t},utcFormat:function(e){var t=ve(e+="",me);t.parse=ye(e,n);t.toString=function(){return e};return t}}}var s={"-":"",_:" ",0:"0"};var o=/^\s*\d+/;var u=/^%/;var l=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function f(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function c(e){return e.replace(l,"\\$&")}function d(e){return new RegExp("^(?:"+e.map(c).join("|")+")","i")}function p(e){var t={},r=-1,n=e.length;while(++r<n)t[e[r].toLowerCase()]=r;return t}function h(e,t,r){var n=o.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function m(e,t,r){var n=o.exec(t.slice(r));return n?(e.U=+n[0],r+n[0].length):-1}function g(e,t,r){var n=o.exec(t.slice(r));return n?(e.W=+n[0],r+n[0].length):-1}function v(e,t,r){var n=o.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function y(e,t,r){var n=o.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _(e,t,r){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function b(e,t,r){var n=o.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function x(e,t,r){var n=o.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function k(e,t,r){var n=o.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function S(e,t,r){var n=o.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function T(e,t,r){var n=o.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function E(e,t,r){var n=o.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function A(e,t,r){var n=o.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function O(e,t,r){var n=u.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function M(e,t){return f(e.getDate(),t,2)}function w(e,t){return f(e.getHours(),t,2)}function L(e,t){return f(e.getHours()%12||12,t,2)}function N(e,r){return f(1+t.day.count(t.year(e),e),r,3)}function C(e,t){return f(e.getMilliseconds(),t,3)}function R(e,t){return f(e.getMonth()+1,t,2)}function I(e,t){return f(e.getMinutes(),t,2)}function D(e,t){return f(e.getSeconds(),t,2)}function U(e,r){return f(t.sunday.count(t.year(e),e),r,2)}function P(e){return e.getDay()}function z(e,r){return f(t.monday.count(t.year(e),e),r,2)}function F(e,t){return f(e.getFullYear()%100,t,2)}function j(e,t){return f(e.getFullYear()%1e4,t,4)}function Y(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function $(e,t){return f(e.getUTCDate(),t,2)}function q(e,t){return f(e.getUTCHours(),t,2)}function W(e,t){return f(e.getUTCHours()%12||12,t,2)}function H(e,r){return f(1+t.utcDay.count(t.utcYear(e),e),r,3)}function X(e,t){return f(e.getUTCMilliseconds(),t,3)}function G(e,t){return f(e.getUTCMonth()+1,t,2)}function V(e,t){return f(e.getUTCMinutes(),t,2)}function B(e,t){return f(e.getUTCSeconds(),t,2)}function J(e,r){return f(t.utcSunday.count(t.utcYear(e),e),r,2)}function Z(e){return e.getUTCDay()}function Q(e,r){return f(t.utcMonday.count(t.utcYear(e),e),r,2)}function K(e,t){return f(e.getUTCFullYear()%100,t,2)}function ee(e,t){return f(e.getUTCFullYear()%1e4,t,4)}function te(){return"+0000"}function re(){return"%"}var ne=a({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ie=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]});var ae=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var se=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var oe=a({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ue=a({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var le=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]});var fe=a({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]});var ce=a({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]});var de=a({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]});var pe=a({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]});var he=a({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]});var me=a({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]});var ge=a({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]});var ve=a({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]});var ye=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]});var _e=a({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]});var be=a({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]});var xe=a({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]});var ke=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]});var Se=a({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]});var Te=a({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});var Ee="%Y-%m-%dT%H:%M:%S.%LZ";function Ae(e){return e.toISOString()}Ae.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Ae.toString=function(){return Ee};var Oe=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ae:ne.utcFormat(Ee);var Me=ne.format;var we=ne.utcFormat;var Le="0.2.1";e.version=Le;e.format=Me;e.utcFormat=we;e.locale=a;e.localeCaEs=ie;e.localeDeCh=ae;e.localeDeDe=se;e.localeEnCa=oe;e.localeEnGb=ue;e.localeEnUs=ne;e.localeEsEs=le;e.localeFiFi=fe;e.localeFrCa=ce;e.localeFrFr=de;e.localeHeIl=pe;e.localeHuHu=he;e.localeItIt=me;e.localeJaJp=ge;e.localeKoKr=ve;e.localeMkMk=ye;e.localeNlNl=_e;e.localePlPl=be;e.localePtBr=xe;e.localeRuRu=ke;e.localeSvSe=Se;e.localeZhCn=Te;e.isoFormat=Oe})},"54Eg":function(e,t,r){e.exports={Handler:r("N4b/"),Renderer:r("3OjF"),string:{Renderer:r("iHbP")}}},"58eP":function(e,t,r){var n=r("zicW"),i=r("zsFm").Tuple,a=r("J731"),s=r("4JPs"),o=r("acp7");function u(e){o.prototype.init.call(this,e);s.addParameters(this,{field:{type:"field",default:null},startAngle:{type:"value",default:0},endAngle:{type:"value",default:2*Math.PI},sort:{type:"value",default:false}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var l=u.prototype=Object.create(o.prototype);l.constructor=u;function f(){return 1}l.batchTransform=function(e,t){a.debug(e,["pie"]);var r=this._output,s=this.param("field").accessor||f,o=this.param("startAngle"),u=this.param("endAngle"),l=this.param("sort");var c=t.map(s),d=o,p=(u-o)/n.sum(c),h=n.range(t.length),m,g,v;if(l){h.sort(function(e,t){return c[e]-c[t]})}for(m=0;m<h.length;++m){g=t[h[m]];v=c[h[m]];i.set(g,r.start,d);i.set(g,r.mid,d+.5*v*p);i.set(g,r.end,d+=v*p)}e.fields[r.start]=1;e.fields[r.end]=1;e.fields[r.mid]=1;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Pie transform",description:"Computes a pie chart layout.",type:"object",properties:{type:{enum:["pie"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The data values to encode as angular spans. "+"If this property is omitted, all pie slices will have equal spans."},startAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],default:0},endAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],default:2*Math.PI},sort:{description:" If true, will sort the data prior to computing angles.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"layout_start"},end:{type:"string",default:"layout_end"},mid:{type:"string",default:"layout_mid"}}}},required:["type"]}},"5AQc":function(e,t,r){var n=r("zF6n");var i=/^([A-Za-z]+:)?\/\//;var a="file://";function s(e){var t=e.url;if(!t&&e.file){return a+e.file}if(e.baseURL&&!i.test(t)){if(!p(t,"/")&&e.baseURL[e.baseURL.length-1]!=="/"){t="/"+t}t=e.baseURL+t}if(!o.useXHR&&p(t,"//")){t=(e.defaultProtocol||"http")+":"+t}if(e.domainWhiteList){var n,s;if(o.useXHR){var u=document.createElement("a");u.href=t;if(u.host===""){u.href=u.href}n=u.hostname.toLowerCase();s=window.location.hostname}else{var l=r(15).parse(t);n=l.hostname;s=null}if(s!==n){var f=e.domainWhiteList.some(function(e){var t=n.length-e.length;return e===n||t>1&&n[t-1]==="."&&n.lastIndexOf(e)===t});if(!f){throw"URL is not whitelisted: "+t}}}return t}function o(e,t){return o.loader(e,t)}function u(e,t){var r=t||function(e){throw e},n;try{n=o.sanitizeUrl(e)}catch(e){r(e);return}if(!n){r("Invalid URL: "+e.url)}else if(o.useXHR){return o.xhr(n,e,t)}else if(p(n,a)){return o.file(n.slice(a.length),e,t)}else if(n.indexOf("://")<0){return o.file(n,e,t)}else{return o.http(n,e,t)}}function l(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function f(e,t,r){var i=!!r;var a=new XMLHttpRequest;if(typeof XDomainRequest!=="undefined"&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(e))a=new XDomainRequest;function s(){var e=a.status;if(!e&&l(a)||e>=200&&e<300||e===304){r(null,a.responseText)}else{r(a,null)}}if(i){if("onload"in a){a.onload=a.onerror=s}else{a.onreadystatechange=function(){if(a.readyState>3)s()}}}a.open("GET",e,i);if(a.setRequestHeader){var u=n.extend({},o.headers,t.headers);for(var f in u){a.setRequestHeader(f,u[f])}}a.send();if(!i&&l(a)){return a.responseText}}function c(e,t,n){var i=r(12);if(!n){return i.readFileSync(e,"utf8")}i.readFile(e,n)}function d(e,t,i){var a=n.extend({},o.headers,t.headers);var s={url:e,encoding:null,gzip:true,headers:a};if(!i){return r(14)("GET",e,s).getBody()}r(13)(s,function(e,t,r){if(!e&&t.statusCode===200){i(null,r)}else{e=e||"Load failed with response code "+t.statusCode+".";i(e,null)}})}function p(e,t){return e==null?false:e.lastIndexOf(t,0)===0}o.loader=u;o.sanitizeUrl=s;o.xhr=f;o.file=c;o.http=d;o.useXHR=typeof XMLHttpRequest!=="undefined";o.headers={};e.exports=o},"5meb":function(e,t,r){function n(e){var t={},r,n;for(r=0,n=e.length;r<n;++r)t[e[r]]=1;return t}function i(e){var t=[],r;for(r in e)t.push(r);return t}e.exports=function(e){e=e||{};var t=e.constants||r("jJJB"),a=(e.functions||r("EmQ7"))(v),s=e.functionDefs?e.functionDefs(v):{},o=e.idWhiteList?n(e.idWhiteList):null,u=e.idBlackList?n(e.idBlackList):null,l=0,f=e.fieldVar||"datum",c=e.globalVar||"signals",d={},p={},h={};function m(e){var t={code:v(e),globals:i(d),fields:i(p),dataSources:i(h),defs:s};d={};p={};h={};return t}var g=typeof c==="function"?c:function(e){return c+'["'+e+'"]'};function v(e){if(typeof e==="string")return e;var t=y[e.type];if(t==null){throw new Error("Unsupported type: "+e.type)}return t(e)}var y={Literal:function(e){return e.raw},Identifier:function(e){var r=e.name;if(l>0){return r}if(t.hasOwnProperty(r)){return t[r]}if(o){if(o.hasOwnProperty(r)){return r}else{d[r]=1;return g(r)}}if(u&&u.hasOwnProperty(r)){throw new Error("Illegal identifier: "+r)}return r},Program:function(e){return e.body.map(v).join("\n")},MemberExpression:function(e){var t=!e.computed;var r=v(e.object);if(t)l+=1;var n=v(e.property);if(r===f){p[n]=1}if(t)l-=1;return r+(t?"."+n:"["+n+"]")},CallExpression:function(e){if(e.callee.type!=="Identifier"){throw new Error("Illegal callee type: "+e.callee.type)}var t=e.callee.name;var r=e.arguments;var n=a.hasOwnProperty(t)&&a[t];if(!n)throw new Error("Unrecognized function: "+t);return n instanceof Function?n(r,d,p,h):n+"("+r.map(v).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(v).join(",")+"]"},BinaryExpression:function(e){return"("+v(e.left)+e.operator+v(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+v(e.argument)+")"},ConditionalExpression:function(e){return"("+v(e.test)+"?"+v(e.consequent)+":"+v(e.alternate)+")"},LogicalExpression:function(e){return"("+v(e.left)+e.operator+v(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(v).join(",")+"}"},Property:function(e){l+=1;var t=v(e.key);l-=1;return t+":"+v(e.value)},ExpressionStatement:function(e){return v(e.expression)}};m.functions=a;m.functionDefs=s;m.constants=t;return m}},"6+LD":function(e,t,r){var n=r("zsFm"),i=n.Tuple,a=r("J731"),s=r("4JPs");function o(e){s.prototype.init.call(this,e);s.addParameters(this,{field:{type:"field",default:"data"},pattern:{type:"value",default:"[\\w']+"},case:{type:"value",default:"lower"},stopwords:{type:"value",default:""}});this._output={text:"text",count:"count"};return this.router(true).produces(true)}var u=o.prototype=Object.create(s.prototype);u.constructor=o;u.transform=function(e,t){a.debug(e,["countpattern"]);var r=this.param("field").accessor,n=this.param("pattern"),s=this.param("stopwords"),o=false;if(this._stop!==s){this._stop=s;this._stop_re=new RegExp("^"+s+"$","i");t=true}if(this._pattern!==n){this._pattern=n;this._match=new RegExp(this._pattern,"g");t=true}if(t)this._counts={};function u(e){return i.prev_init(e),r(e)}function l(e){return r(i.prev(e))}this._add(e.add,u);if(!t)this._rem(e.rem,l);if(t||(o=e.fields[r.field])){if(o)this._rem(e.mod,l);this._add(e.mod,u)}return this._changeset(e)};u._changeset=function(e){var t=this._counts,r=this._tuples||(this._tuples={}),a=n.ChangeSet.create(e),s=this._output,o,u,l;for(o in t){u=r[o];l=t[o]||0;if(!u&&l){r[o]=u=i.ingest({});u[s.text]=o;u[s.count]=l;a.add.push(u)}else if(l===0){if(u)a.rem.push(u);delete t[o];delete r[o]}else if(u[s.count]!==l){i.set(u,s.count,l);a.mod.push(u)}}return a};u._tokenize=function(e){switch(this.param("case")){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(this._match)};u._add=function(e,t){var r=this._counts,n=this._stop_re,i,a,s,o;for(s=0;s<e.length;++s){i=this._tokenize(t(e[s]));for(a=0;a<i.length;++a){if(!n.test(o=i[a])){r[o]=1+(r[o]||0)}}}};u._rem=function(e,t){var r=this._counts,n=this._stop_re,i,a,s,o;for(s=0;s<e.length;++s){i=this._tokenize(t(e[s]));for(a=0;a<i.length;++a){if(!n.test(o=i[a])){r[o]-=1}}}};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"CountPattern transform",type:"object",properties:{type:{enum:["countpattern"]},field:{description:"The field containing the text to analyze.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"data"},pattern:{description:"A regexp pattern for matching words in text.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"[\\w']+"},case:{description:"Text case transformation to apply.",oneOf:[{enum:["lower","upper","none"]},{$ref:"#/refs/signal"}],default:"lower"},stopwords:{description:"A regexp pattern for matching stopwords to omit.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:""},output:{type:"object",description:"Rename the output data fields",properties:{text:{type:"string",default:"text"},count:{type:"string",default:"count"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},"6gf1":function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("zsFm"),s=r("WcUm"),o=r("S/OH");var u="_vgGATEKEEPER",l="_vgEVALUATOR";var f={getItem:function(){return this.item},getGroup:function(e){var t=e?this.name[e]:this.group,r=t&&t.mark,n=r&&(r.interactive||r.interactive===undefined);return n?t:{}},getXY:function(e){var t={x:this.x,y:this.y};if(typeof e==="string"){e=this.name[e]}for(;e;e=e.mark&&e.mark.group){t.x-=e.x||0;t.y-=e.y||0}return t},getX:function(e){return this.getXY(e).x},getY:function(e){return this.getXY(e).y}};function c(e){var t=e.model(),r=t.expr("true"),c=t.expr("false"),d=t.defs().signals,p={handlers:{},nodes:{}},h=i.duplicate(p),m=i.duplicate(p);i.array(d).forEach(function(e){var r=t.signal(e.name);if(e.expr)return;i.array(e.streams).forEach(function(e){var n=s.parse(e.type),i=t.expr(e.expr);y(r,n,i,e)})});i.keys(h.handlers).forEach(function(t){e.on(t,function(e,r){e.preventDefault();g(e,r);v(h,t,r&&r.datum||{},r&&r.mark&&r.mark.group&&r.mark.group.datum||{},e)})});i.keys(m.handlers).forEach(function(e){if(typeof window==="undefined")return;var t=m.handlers[e],r=e.split(":"),i=r[0]==="window"?[window]:window.document.querySelectorAll(r[0]);function a(t){g(t);v(m,e,n.select(this).datum(),this.parentNode&&n.select(this.parentNode).datum(),t)}for(var s=0;s<i.length;++s){i[s].addEventListener(r[1],a)}t.elements=i;t.listener=a});m.detach=function(){i.keys(m.handlers).forEach(function(e){var t=m.handlers[e],r=e.split(":"),n=i.array(t.elements);for(var a=0;a<n.length;++a){n[a].removeEventListener(r[1],t.listener)}})};return m.detach;function g(t,r){var i=n.mouse((n.event=t,e.renderer().scene())),a=e.padding(),s={},o,u,l;if(r){o=r.mark;u=o.marktype==="group"?r:o.group;for(l=r;l!=null;l=l.mark.group){if(l.mark.def.name){s[l.mark.def.name]=l}}}s.root=e.model().scene().items[0];t.vg=Object.create(f);t.vg.group=u;t.vg.item=r||{};t.vg.name=s;t.vg.x=i[0]-a.left;t.vg.y=i[1]-a.top}function v(e,r,n,i,s){var u=e.handlers[r],l=e.nodes[r],f=a.ChangeSet.create(null,true),c=false,d,p,h,m;function g(e){return!e.fn(n,i,s)}for(p=0,h=u.length;p<h;++p){m=u[p];c=m.filters.some(g);if(c)continue;d=m.exp.fn(n,i,s);if(m.spec.scale){d=o.scale(t,m.spec,d,n,s)}if(d!==m.signal.value()||m.signal.verbose()){m.signal.value(d);f.signals[m.signal.name()]=1}}t.propagate(f,l)}function y(e,t,r,n){t.forEach(function(t){if(t.event)_(e,t,r,n);else if(t.signal)b(e,t,r,n);else if(t.start)x(e,t,r,n);else if(t.stream){if(t.filters)t.stream.forEach(function(e){e.filters=i.array(e.filters).concat(t.filters)});y(e,t.stream,r,n)}})}function _(e,r,n,s){var o=r.event,u=r.name,l=r.mark,f=r.target,c=i.array(r.filters),d=f?m:h,p=f?f+":"+o:o,g=d.nodes[p]||(d.nodes[p]=new a.Node(t)),v=d.handlers[p]||(d.handlers[p]=[]);if(u){c.push('!!event.vg.name["'+u+'"]')}else if(l){c.push("event.vg.item.mark && event.vg.item.mark.marktype==="+i.str(l))}v.push({signal:e,exp:n,spec:s,filters:c.map(function(e){return t.expr(e)})});g.addListener(e)}function b(e,r,n,i){var s=e.name(),u=t.signal(s+l,null);u.evaluate=function(a){if(!a.signals[r.signal])return t.doNotPropagate;var u=n.fn();if(i.scale){u=o.scale(t,i,u)}if(u!==e.value()||e.verbose()){e.value(u);a.signals[s]=1;a.reflow=true}return a};u.dependency(a.Dependencies.SIGNALS,r.signal);u.addListener(e);t.signal(r.signal).addListener(u)}function x(e,n,i,a){var s=e.name(),o=s+u,l=n.middle,f=l.filters||(l.filters=[]),d=t.signal(o)||t.signal(o,false);y(d,[n.start],r,{});y(d,[n.end],c,{});f.push(d.name());y(e,[n.middle],i,a)}}e.exports=c;c.schema={defs:{streams:{type:"array",items:{type:"object",properties:{type:{type:"string"},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"}},additionalProperties:false,required:["type","expr"]}}}}},"736r":function(e,t,r){"use strict";var n=r("o+e1");var i=r("WJ2w");var a=r("ZAUf");var s=r("wKIX");var o;(function(e){function t(e){return e.reduce(function(e,t,r){var a=n.field(t,{nofn:true,datum:true});if(t.type===i.TEMPORAL&&t.timeUnit){var o=n.field(t);e[o]={type:"formula",field:n.field(t),expr:s.parseExpression(t.timeUnit,a)}}return e},{})}e.parseUnit=t;function r(e){var r=t(e);var n=e.child().component.data;if(!n.source){a.extend(r,n.timeUnit);delete n.timeUnit}return r}e.parseFacet=r;function o(e){var r=t(e);e.children().forEach(function(e){var t=e.component.data;if(!t.source){a.extend(r,t.timeUnit);delete t.timeUnit}});return r}e.parseLayer=o;function u(e){return a.vals(e.timeUnit)}e.assemble=u})(o=t.timeUnit||(t.timeUnit={}))},"7YRp":function(e,t,r){"use strict";var n=r("ZAUf");function i(e){if(!n.isArray(e)){return"fields"in e}return false}t.isUnionedDomain=i;function a(e){if(!n.isArray(e)){return"data"in e}return false}t.isDataRefDomain=a},"8NMF":function(e,t,r){var n=r("Za4h"),i={};i.load={baseURL:"",domainWhiteList:false};i.autopadInset=5;i.scale={time:n.time.scale,utc:n.time.scale.utc};i.render={retina:true};i.scene={fill:undefined,fillOpacity:undefined,stroke:undefined,strokeOpacity:undefined,strokeWidth:undefined,strokeDash:undefined,strokeDashOffset:undefined};i.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4};i.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"};i.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]};i.range={category10:n.scale.category10().range(),category20:n.scale.category20().range(),category20b:n.scale.category20b().range(),category20c:n.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]};e.exports=i},"8lgt":function(e,t,r){"use strict";var n=r("P/aK");var i=r("MtYt");var a;(function(e){function t(){return"rule"}e.markType=t;function r(e){var t={};if(e.config().mark.orient==="vertical"){if(e.has(n.X)){t.x={scale:e.scaleName(n.X),field:e.field(n.X,{binSuffix:"_mid"})}}else{t.x={value:0}}if(e.has(n.Y)){t.y={scale:e.scaleName(n.Y),field:e.field(n.Y,{binSuffix:"_mid"})}}else{t.y={field:{group:"height"}}}if(e.has(n.Y2)){t.y2={scale:e.scaleName(n.Y),field:e.field(n.Y2,{binSuffix:"_mid"})}}else{t.y2={value:0}}}else{if(e.has(n.Y)){t.y={scale:e.scaleName(n.Y),field:e.field(n.Y,{binSuffix:"_mid"})}}else{t.y={value:0}}if(e.has(n.X)){t.x={scale:e.scaleName(n.X),field:e.field(n.X,{binSuffix:"_mid"})}}else{t.x={value:0}}if(e.has(n.X2)){t.x2={scale:e.scaleName(n.X),field:e.field(n.X2,{binSuffix:"_mid"})}}else{t.x2={field:{group:"width"}}}}i.applyColorAndOpacity(t,e);if(e.has(n.SIZE)){t.strokeWidth={scale:e.scaleName(n.SIZE),field:e.field(n.SIZE)}}else{t.strokeWidth={value:a(e)}}return t}e.properties=r;function a(e){var t=e.fieldDef(n.SIZE);if(t&&t.value!==undefined){return t.value}return e.config().mark.ruleSize}function s(e){return undefined}e.labels=s})(a=t.rule||(t.rule={}))},"92+E":function(e,t,r){var n=r("SbOu"),i=r("h36N");function a(e,t,r,i){return{type:"group",width:r,height:i,properties:o(t.scene||{},e),scales:t.scales||[],axes:t.axes||[],legends:t.legends||[],marks:(t.marks||[]).map(function(t){return n(e,t,true)})}}var s=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];function o(e,t){var r=t.config().scene,n={},a,o,u,l,f;for(a=0,o=u=s.length;a<o;++a){l=s[a];if((f=e[l])!==undefined){n[l]=f.signal?f:{value:f}}else if(r[l]){n[l]={value:r[l]}}else{--u}}return u?{update:i(t,"group",n)}:{}}e.exports=a;a.schema={defs:{container:{type:"object",properties:{scene:{type:"object",properties:{fill:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},fillOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},stroke:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},strokeOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeDash:{oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},strokeDashOffset:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}},scales:{type:"array",items:{$ref:"#/defs/scale"}},axes:{type:"array",items:{$ref:"#/defs/axis"}},legends:{type:"array",items:{$ref:"#/defs/legend"}},marks:{type:"array",items:{oneOf:[{$ref:"#/defs/groupMark"},{$ref:"#/defs/visualMark"}]}}}},groupMark:{allOf:[{properties:{type:{enum:["group"]}},required:["type"]},{$ref:"#/defs/mark"},{$ref:"#/defs/container"}]},visualMark:{allOf:[{not:{properties:{type:{enum:["group"]}}}},{$ref:"#/defs/mark"}]}}}},Ad3P:function(e,t,r){var n=r("FF9f"),i=r("esTF"),a=r("YExv");var s=Math.sqrt(3),o=Math.tan(30*Math.PI/180);function u(e,t){var r=t.size!=null?t.size:100,n=t.x,u=t.y,f,c,d,p;e.beginPath();if(t.shape==null||t.shape==="circle"){f=Math.sqrt(r/Math.PI);e.arc(n,u,f,0,2*Math.PI,0);e.closePath();return}switch(t.shape){case"cross":f=Math.sqrt(r/5)/2;c=3*f;e.moveTo(n-c,u-f);e.lineTo(n-f,u-f);e.lineTo(n-f,u-c);e.lineTo(n+f,u-c);e.lineTo(n+f,u-f);e.lineTo(n+c,u-f);e.lineTo(n+c,u+f);e.lineTo(n+f,u+f);e.lineTo(n+f,u+c);e.lineTo(n-f,u+c);e.lineTo(n-f,u+f);e.lineTo(n-c,u+f);break;case"diamond":p=Math.sqrt(r/(2*o));d=p*o;e.moveTo(n,u-p);e.lineTo(n+d,u);e.lineTo(n,u+p);e.lineTo(n-d,u);break;case"square":c=Math.sqrt(r);f=c/2;e.rect(n-f,u-f,c,c);break;case"triangle-down":d=Math.sqrt(r/s);p=d*s/2;e.moveTo(n,u+p);e.lineTo(n+d,u-p);e.lineTo(n-d,u-p);break;case"triangle-up":d=Math.sqrt(r/s);p=d*s/2;e.moveTo(n,u-p);e.lineTo(n+d,u+p);e.lineTo(n-d,u+p);break;default:var h=l(i(t.shape),r);a(e,h,n,u)}e.closePath()}function l(e,t){var r=Math.sqrt(t),n,i,a,s,o;for(n=0,i=e.length;n<i;++n){for(o=e[n],a=1,s=o.length;a<s;++a){o[a]*=r}}return e}e.exports={draw:n.drawAll(u),pick:n.pickPath(u)}},"Aj/a":function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("zsFm").Tuple,s=r("J731"),o=r("4JPs"),u=r("acp7");var l=.5*(1+Math.sqrt(5));function f(e){u.prototype.init.call(this,e);o.addParameters(this,{sort:{type:"array<field>",default:["-value"]},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"field",default:"value"},size:{type:"array<value>",default:r("MRce").size},round:{type:"value",default:true},sticky:{type:"value",default:false},ratio:{type:"value",default:l},padding:{type:"value",default:null},mode:{type:"value",default:"squarify"}});this._layout=n.layout.treemap();this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var c=f.prototype=Object.create(u.prototype);c.constructor=f;c.batchTransform=function(e,t){s.debug(e,["treemap"]);var r=this._layout,n=this._output,o=this.param("sticky"),u=this.param("parent").accessor,l=t.filter(function(e){return u(e)===null})[0];if(r.sticky()!==o){r.sticky(o)}r.sort(i.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(l);t.forEach(function(e){a.set(e,n.x,e.x);a.set(e,n.y,e.y);a.set(e,n.width,e.dx);a.set(e,n.height,e.dy);a.set(e,n.depth,e.depth)});e.fields[n.x]=1;e.fields[n.y]=1;e.fields[n.width]=1;e.fields[n.height]=1;e.fields[n.depth]=1;return e};e.exports=f;f.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treemap transform",type:"object",properties:{type:{enum:["treemap"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:["-value"]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"parent"},field:{description:"The values to use to determine the area of each leaf-level treemap cell.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The treemap layout algorithm to use.",oneOf:[{enum:["squarify","slice","dice","slice-dice"]},{$ref:"#/refs/signal"}],default:"squarify"},size:{description:"The dimensions of the treemap layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[500,500]},round:{description:"If true, treemap cell dimensions will be rounded to integer pixels.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:true},sticky:{description:"If true, repeated runs of the treemap will use cached partition boundaries.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},ratio:{description:"The target aspect ratio for the layout to optimize.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:l},padding:{oneOf:[{type:"number"},{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:4,maxItems:4},{$ref:"#/refs/signal"}],description:"he padding (in pixels) to provide around internal nodes in the treemap."},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},width:{type:"string",default:"layout_width"},height:{type:"string",default:"layout_height"},depth:{type:"string",default:"layout_depth"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},BB2X:function(e,t,r){var n=r("zicW"),i=r("zsFm"),a=i.Node,s=i.Dependencies,o=i.Tuple,u=i.Collector,l=r("J731"),f=r("Vp7n"),c=r("NNYs"),d=r("W+IH"),p=r("v4pi");function h(){this._children={};this._scaler=null;this._recursor=null;this._scales={};this.scale=y.bind(this);return arguments.length?this.init.apply(this,arguments):this}var m=h.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"};var g=h.prototype=new f;g.init=function(e,t){var r=this,i;this._scaler=new a(e);(t.scales||[]).forEach(function(t){t=r.scale(i=t.name,new c(e,t,r));r.scale(i+":prev",t);r._scaler.addListener(t)});this._recursor=new a(e);this._recursor.evaluate=v.bind(this);var o=(t.axes||[]).reduce(function(e,t){e[t.scale]=1;return e},{});o=(t.legends||[]).reduce(function(e,t){e[t.size||t.shape||t.fill||t.stroke||t.opacity]=1;return e},o);this._recursor.dependency(s.SCALES,n.keys(o));this._collector=new u(e);return f.prototype.init.apply(this,arguments)};g.evaluate=function(){var e=f.prototype.evaluate.apply(this,arguments),t=this._graph,r=this,i=this._scales,a=this._mark.items;if(e.mod.length<a.length){var s=n.keys(i).some(function(t){return i[t].reevaluate(e)});if(!s&&this._def.axes){s=this._def.axes.reduce(function(t,r){return t||e.scales[r.scale]},false)}if(!s&&this._def.legends){s=this._def.legends.reduce(function(t,r){return t||e.scales[r.size||r.shape||r.fill||r.stroke]},false)}if(s){e.mod=e.mod.concat(o.idFilter(a,e.mod,e.add,e.rem))}}e.add.forEach(function(t){_.call(r,e,t)});e.rem.forEach(function(e){t.group(e._id,null)});return e};g.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]};g.disconnect=function(){var e=this;n.keys(e._children).forEach(function(t){e._children[t].forEach(function(t){e._recursor.removeListener(t.builder);t.builder.disconnect()})});e._children={};return f.prototype.disconnect.call(this)};g.child=function(e,t){var r=this._children[t],n=0,i=r.length,a;for(;n<i;++n){a=r[n];if(a.type==m.MARK&&a.builder._def.name==e)break}return a.builder};function v(e){var t=this,r=n.array(this._def.marks).length>0,i=n.array(this._def.axes).length>0,a=n.array(this._def.legends).length>0,s,o,u,l,f,c,d,p=false;for(s=0,l=e.add.length;s<l;++s){f=e.add[s];if(r)b.call(this,e,f);if(i)x.call(this,e,f);if(a)k.call(this,e,f)}for(s=e.add.length-1;s>=0;--s){f=e.add[s];for(o=this._children[f._id].length-1;o>=0;--o){u=this._children[f._id][o];u.builder.connect();c=u.builder.pipeline();d=u.builder._def;p=d.type!==m.GROUP;p=p&&this._graph.data(u.from)!==undefined;p=p&&c[c.length-1].listeners().length===1;p=p&&(d.from&&!d.from.mark);u.inline=p;if(p)this._graph.evaluate(e,u.builder);else this._recursor.addListener(u.builder)}}function h(e){if(e.type==m.MARK&&!e.inline&&t._graph.data(e.from)!==undefined){t._recursor.removeListener(e.builder)}}function g(t){var r=t.scale();if(!e.scales[r.scaleName])return;t.reset().def()}function v(t){var r=t.size()||t.shape()||t.fill()||t.stroke()||t.opacity();if(!e.scales[r.scaleName])return;t.reset().def()}for(s=0,l=e.mod.length;s<l;++s){f=e.mod[s];if(r)t._children[f._id].forEach(h);if(i)f.axes.forEach(g);if(a)f.legends.forEach(v)}function y(e){t._recursor.removeListener(e.builder);e.builder.disconnect()}for(s=0,l=e.rem.length;s<l;++s){f=e.rem[s];t._children[f._id].forEach(y);delete t._children[f._id]}return e}function y(e,t){var r=this,n=null;if(arguments.length===2)return r._scales[e]=t,t;while(n==null){n=r._scales[e];r=r.mark?r.mark.group:r._parent;if(!r)break}return n}function _(e,t){l.debug(e,["building group",t._id]);t._scales=t._scales||{};t.scale=y.bind(t);t.items=t.items||[];this._children[t._id]=this._children[t._id]||[];t.axes=t.axes||[];t.axisItems=t.axisItems||[];t.legends=t.legends||[];t.legendItems=t.legendItems||[];this._graph.group(t._id,t)}function b(e,t){l.debug(e,["building children marks #"+t._id]);var r=this._def.marks,n,i,a,s,o,u;for(s=0,o=r.length;s<o;++s){n=r[s];i=n.from||{};a=t.datum._facetID;t.items[s]={group:t,_scaleRefs:{}};u=n.type===m.GROUP?new h:new f;u.init(this._graph,n,t.items[s],this,t._id,a);this._children[t._id].push({builder:u,from:i.data||(i.mark?"vg_"+t._id+"_"+i.mark:a),type:m.MARK})}}function x(e,t){var r=t.axes,n=t.axisItems,i=this;d(this._graph,this._def.axes,r,t);r.forEach(function(e,r){var a=i._def.axes[r].scale,o=e.def(),u=null;n[r]={group:t,axis:e,layer:o.layer};u=o.type===m.GROUP?new h:new f;u.init(i._graph,o,n[r],i).dependency(s.SCALES,a);i._children[t._id].push({builder:u,type:m.AXIS,scale:a})})}function k(e,t){var r=t.legends,n=t.legendItems,i=this;p(this._graph,this._def.legends,r,t);r.forEach(function(e,r){var a=e.size()||e.shape()||e.fill()||e.stroke()||e.opacity(),o=e.def(),u=null;n[r]={group:t,legend:e};u=o.type===m.GROUP?new h:new f;u.init(i._graph,o,n[r],i).dependency(s.SCALES,a);i._children[t._id].push({builder:u,type:m.LEGEND,scale:a})})}e.exports=h},BO8z:function(e,t,r){var n=r("zsFm"),i=r("J731"),a=r("4JPs");function s(e){a.prototype.init.call(this,e);a.addParameters(this,{test:{type:"expr"}});this._skip={};return this.router(true)}var o=s.prototype=Object.create(a.prototype);o.constructor=s;o.transform=function(e){i.debug(e,["filtering"]);var t=n.ChangeSet.create(e),r=this._skip,a=this.param("test");e.rem.forEach(function(e){if(r[e._id]!==1)t.rem.push(e);else r[e._id]=0});e.add.forEach(function(e){if(a(e))t.add.push(e);else r[e._id]=1});e.mod.forEach(function(e){var n=a(e),i=r[e._id]===1;if(n&&i){r[e._id]=0;t.add.push(e)}else if(n&&!i){t.mod.push(e)}else if(!n&&i){}else{t.rem.push(e);r[e._id]=1}});return t};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Filter transform",description:"Filters elements from a data set to remove unwanted items.",type:"object",properties:{type:{enum:["filter"]},test:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the filter predicate."}},additionalProperties:false,required:["type","test"]}},C8zq:function(e,t,r){e.exports={aggregate:r("3Y21"),bin:r("RdYp"),cross:r("juLC"),countpattern:r("6+LD"),linkpath:r("rCVn"),facet:r("Uikm"),filter:r("BO8z"),fold:r("MZ+b"),force:r("pKLr"),formula:r("TXaq"),geo:r("ct8e"),geopath:r("snBf"),hierarchy:r("Sgrz"),impute:r("P7vC"),lookup:r("ec8D"),pie:r("58eP"),rank:r("yLCL"),sort:r("/lc5"),stack:r("wLy+"),treeify:r("ei6W"),treemap:r("Aj/a"),voronoi:r("3C/O"),wordcloud:r("GXXi")}},CBR6:function(e,t,r){var n=r("Za4h"),i=r("YzNj").util.mutator;e.exports={init:function(e,t,r){return a(t,r),s(e,t)},bind:function(e,t){e.dom.forEach(function(e){e.__vega__=t});t.onSignal(e.dom[0].name,function(t,r){e.set(r)})}};function a(e,t){var r=t.signals||(t.signals=[]);for(var n=0;n<r.length;++n){if(r[n].name===e.signal)break}if(n===r.length){r.push({name:e.signal,init:e.value})}(e.rewrite||[]).forEach(function(r){i(r)(t,{signal:e.signal})})}function s(e,t){var r=e.append("div").attr("class","vega-param");r.append("span").attr("class","vega-param-name").text(t.name||t.signal);var n=o;switch(t.type){case"checkbox":n=u;break;case"select":n=l;break;case"radio":n=f;break;case"range":n=c;break}return n(r,t)}function o(e,t){var r=e.append("input").on("input",d);for(var n in t){if(n==="signal"||n==="rewrite")continue;r.attr(n,t[n])}r.attr("name",t.signal);var i=r.node();return{dom:[i],set:function(e){i.value=e}}}function u(e,t){var r=e.append("input").on("change",function(){d.call(this,this.checked)}).attr("type","checkbox").attr("name",t.signal).attr("checked",t.value||null).node();return{dom:[r],set:function(e){r.checked=!!e||null}}}function l(e,t){var r=e.append("select").attr("name",t.signal).on("change",function(){d.call(this,this.options[this.selectedIndex].__data__)});r.selectAll("option").data(t.options).enter().append("option").attr("value",vg.util.identity).attr("selected",function(e){return e===t.value||null}).text(vg.util.identity);var n=r.node();return{dom:[n],set:function(e){var r=t.options.indexOf(e);n.selectedIndex=r}}}function f(e,t){var r=e.append("span").attr("class","vega-param-radio");var n=t.options.map(function(e){var n="vega-option-"+t.signal+"-"+e;var i=r.append("input").datum(e).on("change",d).attr("id",n).attr("type","radio").attr("name",t.signal).attr("value",e).attr("checked",e===t.value||null);r.append("label").attr("for",n).text(e);return i.node()});return{dom:n,set:function(e){for(var t=0;t<n.length;++t){if(n[t].value===e){n[t].checked=true}}}}}function c(e,t){var r=t.value!==undefined?t.value:(+t.max+ +t.min)/2;var n=e.append("input").on("input",function(){i.text(this.value);d.call(this,+this.value)}).attr("type","range").attr("name",t.signal).attr("value",r).attr("min",t.min).attr("max",t.max).attr("step",t.step||vg.util.bins({min:t.min,max:t.max,maxbins:100}).step);var i=e.append("label").attr("class","vega-range").text(r);var a=n.node();return{dom:[a],set:function(e){a.value=e;i.text(e)}}}function d(e){if(e===undefined)e=this.__data__||n.event.target.value;this.__vega__.signal(this.name,e).update()}},CXWl:function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("2pdF").Gradient,s=r("h36N"),o=r("SbOu"),u=r("v0Fq");function l(e){var t=null,r=null,l=null,y=null,_=null,b=null,x=null,k=null,S=null,T=null,E=e.config().legend,A=E.orient,O=E.offset,M=E.padding,w=[5],L={},N={},C={},R={},I={},D={titles:{},symbols:{},labels:{},gradient:{}};var U={},P={};function z(){P.type=null}function F(e,t){return{data:e,index:t}}U.def=function(){var e=t||r||l||y||_;if(!P.type){P=(e===l||e===y)&&!j(e.type)?q(e):Y(e)}P.orient=A;P.offset=O;P.padding=M;P.margin=E.margin;return P};function j(e){return e==="ordinal"||e==="quantize"||e==="quantile"||e==="threshold"}function Y(e){var a=$(t,r,l,y,_);var s=(x==null?e.ticks?e.ticks.apply(e,w):e.domain():x).map(F);var o=u.getTickFormat(e,s.length,S,k);var f,c,d,p=5,h=n.range(s.length);if(t){c=s.map(function(e){return Math.sqrt(t(e.data))});d=n.max(c);c=c.reduce(function(e,t,r,n){if(r>0)e[r]=e[r-1]+n[r-1]/2+p;return e[r]+=t/2,e},[0]).map(Math.round)}else{d=Math.round(Math.sqrt(E.symbolSize));c=b||(f=I.fontSize)&&f.value+p||E.labelFontSize+p;c=h.map(function(e,t){return Math.round(d/2+t*c)})}var m=M,g;if(T){g=R.fontSize;m+=5+(g&&g.value||E.titleFontSize)}for(var v=0,A=c.length;v<A;++v)c[v]+=m;a.scales=a.scales||[{}];i.extend(a.scales[0],{name:"legend",type:"ordinal",points:true,domain:h,range:c});var O=(T?[T]:[]).map(F);s.forEach(function(e){e.label=o(e.data);e.offset=d});a.marks[0].from=function(){return O};a.marks[1].from=function(){return s};a.marks[2].from=a.marks[1].from;return a}function $(t,r,n,a,u){var l=i.extend(D.titles,p(E)),f=i.extend(D.symbols,h(E)),g=i.extend(D.labels,m(E));d(f,t,r,n,a,u);i.extend(l.properties.update,R);i.extend(f.properties.update,N);i.extend(g.properties.update,I);l.properties.enter.x.value+=M;l.properties.enter.y.value+=M;g.properties.enter.x.offset+=M+1;f.properties.enter.x.offset=M+1;g.properties.update.x.offset+=M+1;f.properties.update.x.offset=M+1;i.extend(P,{type:"group",interactive:false,properties:{enter:s(e,"group",L),legendPosition:{encode:c.bind(null,E),signals:[],scales:[],data:[],fields:[]}}});P.marks=[l,f,g].map(function(t){return o(e,t)});return P}function q(e){var t=W(e),r=e.domain(),n=(x==null?r:x).map(F),a=C.width&&C.width.value||E.gradientWidth,s=u.getTickFormat(e,n.length,S,k);t.scales=t.scales||[{}];var o=i.extend(t.scales[0],{name:"legend",type:e.type,round:true,zero:false,domain:[r[0],r[r.length-1]],range:[M,a+M]});if(e.type==="pow")o.exponent=e.exponent();var l=(T?[T]:[]).map(F);n.forEach(function(e,t){e.label=s(e.data);e.align=t==n.length-1?"right":t===0?"left":"center"});t.marks[0].from=function(){return l};t.marks[1].from=function(){return[1]};t.marks[2].from=function(){return n};return t}function W(t){var r=i.extend(D.titles,p(E)),n=i.extend(D.gradient,g(E)),u=i.extend(D.labels,v(E)),l=new a;var f=t.domain(),d=f[0],h=f[f.length-1],m=t.copy().domain([d,h]).range([0,1]);var y=t.type!=="linear"&&t.ticks?t.ticks.call(t,15):f;if(d!==y[0])y.unshift(d);if(h!==y[y.length-1])y.push(h);for(var _=0,b=y.length;_<b;++_){l.stop(m(y[_]),t(y[_]))}n.properties.enter.fill={value:l};i.extend(r.properties.update,R);i.extend(n.properties.update,C);i.extend(u.properties.update,I);var x=n.properties,k=C.height,S=k&&k.value||x.enter.height.value;u.properties.enter.y.value=S;u.properties.update.y.value=S;if(T){var A=r.properties,O=R.fontSize,w=4+(O&&O.value||A.enter.fontSize.value);n.properties.enter.y.value+=w;u.properties.enter.y.value+=w;n.properties.update.y.value+=w;u.properties.update.y.value+=w}r.properties.enter.x.value+=M;r.properties.enter.y.value+=M;n.properties.enter.x.value+=M;n.properties.enter.y.value+=M;u.properties.enter.y.value+=M;n.properties.update.x.value+=M;n.properties.update.y.value+=M;u.properties.update.y.value+=M;i.extend(P,{type:"group",interactive:false,properties:{enter:s(e,"group",L),legendPosition:{encode:c.bind(null,E),signals:[],scales:[],data:[],fields:[]}}});P.marks=[r,n,u].map(function(t){return o(e,t)});return P}U.size=function(e){if(!arguments.length)return t;if(t!==e){t=e;z()}return U};U.shape=function(e){if(!arguments.length)return r;if(r!==e){r=e;z()}return U};U.fill=function(e){if(!arguments.length)return l;if(l!==e){l=e;z()}return U};U.stroke=function(e){if(!arguments.length)return y;if(y!==e){y=e;z()}return U};U.opacity=function(e){if(!arguments.length)return _;if(_!==e){_=e;z()}return U};U.title=function(e){if(!arguments.length)return T;if(T!==e){T=e;z()}return U};U.format=function(e){if(!arguments.length)return k;if(k!==e){k=e;z()}return U};U.formatType=function(e){if(!arguments.length)return S;if(S!==e){S=e;z()}return U};U.spacing=function(e){if(!arguments.length)return b;if(b!==+e){b=+e;z()}return U};U.orient=function(e){if(!arguments.length)return A;A=e in f?e+"":E.orient;return U};U.offset=function(e){if(!arguments.length)return O;O=+e;return U};U.values=function(e){if(!arguments.length)return x;x=e;return U};U.legendProperties=function(e){if(!arguments.length)return L;L=e;return U};U.symbolProperties=function(e){if(!arguments.length)return N;N=e;return U};U.gradientProperties=function(e){if(!arguments.length)return C;C=e;return U};U.labelProperties=function(e){if(!arguments.length)return I;I=e;return U};U.titleProperties=function(e){if(!arguments.length)return R;R=e;return U};U.reset=function(){z();return U};return U}var f={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};function c(e,t,r,n,i,a,s){var o=n?{}:t,u,l=t.mark.def,c=l.offset,d=l.orient,p=l.padding*2,h=d==="left"?0:r.width,m=~~t.bounds.width()+(t.width?0:p),g=~~t.bounds.height()+(t.height?0:p),v=r._legendPositions||(r._legendPositions={right:.5,left:.5});o.x=.5;o.y=.5;o.width=m;o.height=g;if(d==="left"||d==="right"){o.y=v[d];v[d]+=g+l.margin;var y=r.axes,_=r.axisItems,b=f[d];for(u=0;u<y.length;++u){if(y[u].orient()===d){h=Math.max(h,Math.abs(_[u].bounds[b]))}}}switch(d){case"left":o.x-=h+c+m;break;case"right":o.x+=h+c;break;case"top-left":o.x+=c;o.y+=c;break;case"top-right":o.x+=r.width-m-c;o.y+=c;break;case"bottom-left":o.x+=c;o.y+=r.height-g-c;break;case"bottom-right":o.x+=r.width-m-c;o.y+=r.height-g-c;break}var x=e.baseline,k=0;for(u=0;u<r.legendItems.length;u++){var S=r.legendItems[u];k+=S.bounds.height()+(t.height?0:p)}if(x==="middle"){o.y+=c+r.height/2-k/2}else if(x==="bottom"){o.y+=c+r.height-k}if(n)n.interpolate(t,o);var T=t.mark.def.properties.enter.encode;T.call(T,t,r,n,i,a,s);return true}function d(e,t,r,n,i,a){var s=e.properties.enter,o=e.properties.update;if(t)s.size=o.size={scale:t.scaleName,field:"data"};if(r)s.shape=o.shape={scale:r.scaleName,field:"data"};if(n)s.fill=o.fill={scale:n.scaleName,field:"data"};if(i)s.stroke=o.stroke={scale:i.scaleName,field:"data"};if(a)o.opacity={scale:a.scaleName,field:"data"}}function p(e){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:e.titleColor},font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function h(e){return{type:"symbol",interactive:false,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:e.symbolShape},size:{value:e.symbolSize},stroke:{value:e.symbolColor},strokeWidth:{value:e.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function m(e){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{value:e.labelAlign},baseline:{value:e.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function g(e){return{type:"rect",interactive:false,properties:{enter:{x:{value:0},y:{value:0},width:{value:e.gradientWidth},height:{value:e.gradientHeight},stroke:{value:e.gradientStrokeColor},strokeWidth:{value:e.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function v(e){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}e.exports=l},CiyH:function(e,t,r){var n=r("zicW"),i=r("UaGl"),a=r("NNYs"),s=r("8NMF");function o(e,t,r){var i=e.schema;if(!i)return;if(i.refs)n.extend(r.refs,i.refs);if(i.defs)n.extend(r.defs,i.defs)}e.exports=function(e){var t=null;e=e||{};if(e.url){t=n.json(n.extend({url:e.url},s.load))}else{t={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"};n.keys(i).forEach(function(r){o(i[r],e,t)});o(a,e,t)}if(e.properties)n.keys(e.properties).forEach(function(r){t.defs.propset.properties[r]={$ref:"#/refs/"+e.properties[r]+"Value"}});if(e.propertySets)n.keys(e.propertySets).forEach(function(e){t.defs.mark.properties.properties.properties[e]={$ref:"#/defs/propset"}});return t}},DUWk:function(e,t,r){var n=r("zicW"),i=r("C8zq");function a(e,t){var r=i[t.type],a;if(!r)throw new Error('"'+t.type+'" is not a valid transformation');a=new r(e);if(t.output)a.output(t.output);n.keys(t).forEach(function(e){if(e==="type"||e==="output")return;a.param(e,t[e])});return a}e.exports=a;var s=n.keys(i).filter(function(e){return i[e].schema});var o=s.reduce(function(e,t){return e[t+"Transform"]=i[t].schema,e},{});a.schema={defs:n.extend(o,{transform:{type:"array",items:{oneOf:s.map(function(e){return{$ref:"#/defs/"+e+"Transform"}})}}})}},DbaP:function(e,t){function r(e){return e.fontSize!=null?e.fontSize:11}e.exports={size:r,value:function(e){return e!=null?String(e):""},font:function(e,t){var n=e.font;if(t&&n){n=String(n).replace(/\"/g,"'")}return""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+r(e)+"px "+(n||"sans-serif")},offset:function(e){var t=e.baseline,n=r(e);return Math.round(t==="top"?.93*n:t==="middle"?.3*n:t==="bottom"?-.21*n:0)}}},EmQ7:function(e,t){e.exports=function(e){function t(t,r,n,i){var a=e(r[0]);if(n){a=n+"("+a+")";if(n.lastIndexOf("new ",0)===0)a="("+a+")"}return a+"."+t+(i<0?"":i===0?"()":"("+r.slice(1).map(e).join(",")+")")}function r(e,r,n){return function(i){return t(e,i,r,n)}}var n="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var r=t.map(e);return"Math.max("+r[1]+", Math.min("+r[2]+","+r[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:r("getDate",n,0),day:r("getDay",n,0),year:r("getFullYear",n,0),month:r("getMonth",n,0),hours:r("getHours",n,0),minutes:r("getMinutes",n,0),seconds:r("getSeconds",n,0),milliseconds:r("getMilliseconds",n,0),time:r("getTime",n,0),timezoneoffset:r("getTimezoneOffset",n,0),utcdate:r("getUTCDate",n,0),utcday:r("getUTCDay",n,0),utcyear:r("getUTCFullYear",n,0),utcmonth:r("getUTCMonth",n,0),utchours:r("getUTCHours",n,0),utcminutes:r("getUTCMinutes",n,0),utcseconds:r("getUTCSeconds",n,0),utcmilliseconds:r("getUTCMilliseconds",n,0),length:r("length",null,-1),indexof:r("indexOf",null),lastindexof:r("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:r("toUpperCase",i,0),lower:r("toLowerCase",i,0),slice:r("slice",i),substring:r("substring",i),replace:r("replace",i),regexp:a,test:r("test",a),if:function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var r=t.map(e);return"("+r[0]+"?"+r[1]+":"+r[2]+")"}}}},F3Ub:function(e,t,r){var n=r("m2QP"),i=r("SwAC"),a=r("oHkv"),s=r("UTTf"),o=r("DbaP"),u=r("LhY1"),l=u.parse,f=u.render,c=s.path.area,d=s.path.line,p=Math.PI/2,h=Math.sqrt(3),m=Math.tan(30*Math.PI/180),g=null,v=n();function y(){return g||(g=a.instance(1,1).getContext("2d"))}function _(e,t){if(e.stroke&&e.opacity!==0&&e.stokeOpacity!==0){t.expand(e.strokeWidth!=null?e.strokeWidth:1)}return t}function b(e,t,r,n,i){if(t==null){r.set(0,0,0,0)}else{f(v.bounds(r),t,n,i);_(e,r)}return r}function x(e,t){var r=e.path?e.pathCache||(e.pathCache=l(e.path)):null;return b(e,r,t,e.x,e.y)}function k(e,t){if(e.items.length===0)return t;var r=e.items,n=r[0],i=n.pathCache||(n.pathCache=l(c(r)));return b(n,i,t)}function S(e,t){if(e.items.length===0)return t;var r=e.items,n=r[0],i=n.pathCache||(n.pathCache=l(d(r)));return b(n,i,t)}function T(e,t){var r,n;return _(e,t.set(r=e.x||0,n=e.y||0,r+e.width||0,n+e.height||0))}function E(e,t){var r=e.x||0,n=e.y||0,i=e.width||0,a=e.height||0;r=r-(e.align==="center"?i/2:e.align==="right"?i:0);n=n-(e.baseline==="middle"?a/2:e.baseline==="bottom"?a:0);return t.set(r,n,r+i,n+a)}function A(e,t){var r,n;return _(e,t.set(r=e.x||0,n=e.y||0,e.x2!=null?e.x2:r,e.y2!=null?e.y2:n))}function O(e,t){var r=e.x||0,n=e.y||0,i=e.innerRadius||0,a=e.outerRadius||0,s=(e.startAngle||0)-p,o=(e.endAngle||0)-p,u=Infinity,l=-Infinity,f=Infinity,c=-Infinity,d,h,m,g,v,y,b,x,k;var S=[s,o],T=s-s%p;for(h=0;h<4&&T<o;++h,T+=p){S.push(T)}for(h=0,m=S.length;h<m;++h){d=S[h];g=Math.cos(d);y=i*g;x=a*g;v=Math.sin(d);b=i*v;k=a*v;u=Math.min(u,y,x);l=Math.max(l,y,x);f=Math.min(f,b,k);c=Math.max(c,b,k)}return _(e,t.set(r+u,n+f,r+l,n+c))}function M(e,t){var r=e.size!=null?e.size:100,n=e.x||0,i=e.y||0,a,s,o,u;switch(e.shape){case"cross":s=3*Math.sqrt(r/5)/2;t.set(n-s,i-s,n+s,i+s);break;case"diamond":u=Math.sqrt(r/(2*m));o=u*m;t.set(n-o,i-u,n+o,i+u);break;case"square":s=Math.sqrt(r);a=s/2;t.set(n-a,i-a,n+a,i+a);break;case"triangle-down":o=Math.sqrt(r/h);u=o*h/2;t.set(n-o,i-u,n+o,i+u);break;case"triangle-up":o=Math.sqrt(r/h);u=o*h/2;t.set(n-o,i-u,n+o,i+u);break;default:a=Math.sqrt(r/Math.PI);t.set(n-a,i-a,n+a,i+a)}return _(e,t)}function w(e,t,r){var n=y(),i=o.size(e),a=e.align,s=e.radius||0,u=e.x||0,l=e.y||0,f=e.dx||0,c=(e.dy||0)+o.offset(e)-Math.round(.8*i),d,p;if(s){p=(e.theta||0)-Math.PI/2;u+=s*Math.cos(p);l+=s*Math.sin(p)}n.font=o.font(e);d=n.measureText(o.value(e.text)).width;if(a==="center"){f-=d/2}else if(a==="right"){f-=d}else{}t.set(f+=u,c+=l,f+d,c+i);if(e.angle&&!r){t.rotate(e.angle*Math.PI/180,u,l)}return t.expand(r?0:1)}function L(e,t,r){var n=e.axisItems||[],i=e.items||[],a=e.legendItems||[],s,o;if(!e.clip){for(s=0,o=n.length;s<o;++s){t.union(n[s].bounds)}for(s=0,o=i.length;s<o;++s){if(i[s].bounds)t.union(i[s].bounds)}if(r){for(s=0,o=a.length;s<o;++s){t.union(a[s].bounds)}}}if(e.clip||e.width||e.height){_(e,t.add(0,0).add(e.width||0,e.height||0))}return t.translate(e.x||0,e.y||0)}var N={group:L,symbol:M,image:E,rect:T,rule:A,arc:O,text:w,path:x,area:k,line:S};N.area.nest=true;N.line.nest=true;function C(e,t,r){var n=e.mark.marktype;t=t||N[n];if(t.nest)e=e.mark;var a=e.bounds,s=e["bounds:prev"]||(e["bounds:prev"]=new i);if(a){s.clear().union(a);a.clear()}else{e.bounds=new i}t(e,e.bounds,r);if(!a)s.clear().union(e.bounds);return e.bounds}var R={mark:null};function I(e,t,r){var n=e.marktype,a=N[n],s=e.items,o=s&&s.length,u,l,f,c;if(a.nest){f=o?s[0]:(R.mark=e,R);c=C(f,a,r);t=t&&t.union(c)||c;return t}t=t||e.bounds&&e.bounds.clear()||new i;if(o){for(u=0,l=s.length;u<l;++u){t.union(C(s[u],a,r))}}return e.bounds=t}e.exports={mark:I,item:C,text:w,group:L}},F9eC:function(e,t,r){"use strict";var n=r("Py5Z");var i=r("QSMf");var a=r("j8cM");var s=r("f2i1");var o=r("P/aK");var u=r("QSMf");var l=r("ZAUf");function f(e){return e["facet"]!==undefined}t.isFacetSpec=f;function c(e){if(p(e)){var t=i.has(e.encoding,o.ROW);var r=i.has(e.encoding,o.COLUMN);return t||r}return false}t.isExtendedUnitSpec=c;function d(e){if(p(e)){return!c(e)}return false}t.isUnitSpec=d;function p(e){return e["mark"]!==undefined}t.isSomeUnitSpec=p;function h(e){return e["layers"]!==undefined}t.isLayerSpec=h;function m(e){if(c(e)){return g(e)}if(d(e)){return v(e)}return e}t.normalize=m;function g(e){var t=i.has(e.encoding,o.ROW);var r=i.has(e.encoding,o.COLUMN);var n=l.duplicate(e.encoding);delete n.column;delete n.row;return l.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},{data:e.data},e.transform?{transform:e.transform}:{},{facet:l.extend(t?{row:e.encoding.row}:{},r?{column:e.encoding.column}:{}),spec:v({mark:e.mark,encoding:n})},e.config?{config:e.config}:{})}t.normalizeExtendedUnitSpec=g;function v(e){var t=e.config;var r=t&&t.overlay;var s=r&&e.mark===a.AREA&&l.contains([n.AreaOverlay.LINEPOINT,n.AreaOverlay.LINE],r.area);var o=r&&(r.line&&e.mark===a.LINE||r.area===n.AreaOverlay.LINEPOINT&&e.mark===a.AREA);if(e.mark===a.ERRORBAR){return _(e)}if(i.isRanged(e.encoding)){return y(e)}if(T(e)){return e}if(o||s){return b(e,o,s)}return e}t.normalizeUnitSpec=v;function y(e){if(e.encoding){var t=i.has(e.encoding,o.X);var r=i.has(e.encoding,o.Y);var n=i.has(e.encoding,o.X2);var a=i.has(e.encoding,o.Y2);if(n&&!t||a&&!r){var s=l.duplicate(e);if(n&&!t){s.encoding.x=s.encoding.x2;delete s.encoding.x2}if(a&&!r){s.encoding.y=s.encoding.y2;delete s.encoding.y2}return s}}return e}t.normalizeRangedUnitSpec=y;function _(e){var t=l.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},e.data?{data:e.data}:{},e.transform?{transform:e.transform}:{},e.config?{config:e.config}:{},{layers:[]});if(!e.encoding){return t}if(e.mark===a.ERRORBAR){var r={mark:a.RULE,encoding:l.extend(e.encoding.x?{x:l.duplicate(e.encoding.x)}:{},e.encoding.y?{y:l.duplicate(e.encoding.y)}:{},e.encoding.x2?{x2:l.duplicate(e.encoding.x2)}:{},e.encoding.y2?{y2:l.duplicate(e.encoding.y2)}:{},{})};var n={mark:a.TICK,encoding:l.extend(e.encoding.x?{x:l.duplicate(e.encoding.x)}:{},e.encoding.y?{y:l.duplicate(e.encoding.y)}:{},e.encoding.size?{size:l.duplicate(e.encoding.size)}:{},{})};var i={mark:a.TICK,encoding:l.extend({x:e.encoding.x2?l.duplicate(e.encoding.x2):l.duplicate(e.encoding.x),y:e.encoding.y2?l.duplicate(e.encoding.y2):l.duplicate(e.encoding.y)},e.encoding.size?{size:l.duplicate(e.encoding.size)}:{})};t.layers.push(v(r));t.layers.push(v(n));t.layers.push(v(i))}return t}t.normalizeErrorBarUnitSpec=_;function b(e,t,r){var i=["name","description","data","transform"];var s=l.omit(e,i.concat("config"));var o=l.duplicate(e.config);delete o.overlay;var u=l.extend(l.pick(e,i),{layers:[s]},l.keys(o).length>0?{config:o}:{});if(r){var f=l.duplicate(s);f.mark=a.LINE;var c=l.extend({},n.defaultOverlayConfig.lineStyle,e.config.overlay.lineStyle);if(l.keys(c).length>0){f.config={mark:c}}u.layers.push(f)}if(t){var d=l.duplicate(s);d.mark=a.POINT;var c=l.extend({},n.defaultOverlayConfig.pointStyle,e.config.overlay.pointStyle);if(l.keys(c).length>0){d.config={mark:c}}u.layers.push(d)}return u}t.normalizeOverlay=b;function x(e){return u.isAggregate(e.encoding)}t.alwaysNoOcclusion=x;function k(e){return u.fieldDefs(e.encoding)}t.fieldDefs=k;function S(e){return e}t.getCleanSpec=S;function T(e){return s.stack(e.mark,e.encoding,e.config)!==null}t.isStacked=T;function E(e){var t=e.encoding;var r=l.duplicate(e.encoding);r.x=t.y;r.y=t.x;r.row=t.column;r.column=t.row;e.encoding=r;return e}t.transpose=E},FF9f:function(e,t){function r(e,t,r,n){if(e(t,n))return;var i=r.opacity==null?1:r.opacity;if(i===0)return;if(r.fill&&f(t,r,i)){t.fill()}if(r.stroke&&c(t,r,i)){t.stroke()}}function n(e,t,n,i){var a,s,o;for(a=0,s=n.items.length;a<s;++a){o=n.items[a];if(!i||i.intersects(o.bounds)){r(e,t,o,o)}}}function i(e){return function(t,r,i){n(e,t,r,i)}}function a(e){return function(t,n,i){if(!n.items.length)return;if(!i||i.intersects(n.bounds)){r(e,t,n.items[0],n.items)}}}var s=function(){return true};function o(e){if(!e)e=s;return function(t,r,n,i,a,s){if(!r.items.length)return null;var o,u,l;if(t.pixelratio!=null&&t.pixelratio!==1){n*=t.pixelratio;i*=t.pixelratio}for(l=r.items.length;--l>=0;){o=r.items[l];u=o.bounds;if(u&&!u.contains(a,s)||!u)continue;if(e(t,o,n,i,a,s))return o}return null}}function u(e,t){return function(r,n,i,a){var s=Array.isArray(n)?n[0]:n,o=t==null?s.fill:t,u=s.stroke&&r.isPointInStroke,l,f;if(u){l=s.strokeWidth;f=s.strokeCap;r.lineWidth=l!=null?l:1;r.lineCap=f!=null?f:"butt"}return e(r,n)?false:o&&r.isPointInPath(i,a)||u&&r.isPointInStroke(i,a)}}function l(e){return o(u(e))}function f(e,t,r){r*=t.fillOpacity==null?1:t.fillOpacity;if(r>0){e.globalAlpha=r;e.fillStyle=d(e,t,t.fill);return true}else{return false}}function c(e,t,r){var n=(n=t.strokeWidth)!=null?n:1,i;if(n<=0)return false;r*=t.strokeOpacity==null?1:t.strokeOpacity;if(r>0){e.globalAlpha=r;e.strokeStyle=d(e,t,t.stroke);e.lineWidth=n;e.lineCap=(i=t.strokeCap)!=null?i:"butt";e.vgLineDash(t.strokeDash||null);e.vgLineDashOffset(t.strokeDashOffset||0);return true}else{return false}}function d(e,t,r){return r.id?p(e,r,t.bounds):r}function p(e,t,r){var n=r.width(),i=r.height(),a=r.x1+t.x1*n,s=r.y1+t.y1*i,o=r.x1+t.x2*n,u=r.y1+t.y2*i,l=e.createLinearGradient(a,s,o,u),f=t.stops,c,d;for(c=0,d=f.length;c<d;++c){l.addColorStop(f[c].offset,f[c].color)}return l}e.exports={drawOne:a,drawAll:i,pick:o,pickPath:l,testPath:u,stroke:c,fill:f,color:d,gradient:p}},FmT5:function(e,t,r){"use strict";var n=r("P/aK");function i(e){switch(e){case n.ROW:case n.COLUMN:case n.SIZE:case n.SHAPE:return 6;default:return 10}}t.autoMaxBins=i},Fv98:function(e,t){var r=0;function n(e){this.id="gradient_"+r++;this.type=e||"linear";this.stops=[];this.x1=0;this.x2=1;this.y1=0;this.y2=0}var i=n.prototype;i.stop=function(e,t){this.stops.push({offset:e,color:t});return this};e.exports=n},"Fw/k":function(e,t,r){"use strict";(function(e){e[e["LINEAR"]="linear"]="LINEAR";e[e["LOG"]="log"]="LOG";e[e["POW"]="pow"]="POW";e[e["SQRT"]="sqrt"]="SQRT";e[e["QUANTILE"]="quantile"]="QUANTILE";e[e["QUANTIZE"]="quantize"]="QUANTIZE";e[e["ORDINAL"]="ordinal"]="ORDINAL";e[e["TIME"]="time"]="TIME";e[e["UTC"]="utc"]="UTC"})(t.ScaleType||(t.ScaleType={}));var n=t.ScaleType;(function(e){e[e["SECOND"]="second"]="SECOND";e[e["MINUTE"]="minute"]="MINUTE";e[e["HOUR"]="hour"]="HOUR";e[e["DAY"]="day"]="DAY";e[e["WEEK"]="week"]="WEEK";e[e["MONTH"]="month"]="MONTH";e[e["YEAR"]="year"]="YEAR"})(t.NiceTime||(t.NiceTime={}));var i=t.NiceTime;t.defaultScaleConfig={round:true,textBandWidth:90,bandSize:21,padding:1,useRawDomain:false,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]};t.defaultFacetScaleConfig={round:true,padding:16}},"G+HP":function(e,t,r){"use strict";var n=r("P/aK");var i=r("MtYt");var a=r("o+e1");var s=r("WJ2w");var o;(function(e){function t(){return"text"}e.markType=t;function r(e){return{x:{value:0},y:{value:0},width:{field:{group:"width"}},height:{field:{group:"height"}},fill:{scale:e.scaleName(n.COLOR),field:e.field(n.COLOR,e.fieldDef(n.COLOR).type===s.ORDINAL?{prefn:"rank_"}:{})}}}e.background=r;function o(e){var t={};i.applyMarkConfig(t,e,["angle","align","baseline","dx","dy","font","fontWeight","fontStyle","radius","theta","text"]);var r=e.config();var a=e.fieldDef(n.TEXT);t.x=u(e.encoding().x,e.scaleName(n.X),r,a);t.y=l(e.encoding().y,e.scaleName(n.Y),r);t.fontSize=f(e.encoding().size,e.scaleName(n.SIZE),r);t.text=c(e.encoding().text,e.scaleName(n.TEXT),r);if(e.config().mark.applyColorToBackground&&!e.has(n.X)&&!e.has(n.Y)){t.fill={value:"black"};var s=e.config().mark.opacity;if(s){t.opacity={value:s}}}else{i.applyColorAndOpacity(t,e)}return t}e.properties=o;function u(e,t,r,n){if(e){if(e.field){return{scale:t,field:a.field(e,{binSuffix:"_mid"})}}}if(n&&n.type===s.QUANTITATIVE){return{field:{group:"width"},offset:-5}}else{return{value:r.scale.textBandWidth/2}}}function l(e,t,r){if(e){if(e.field){return{scale:t,field:a.field(e,{binSuffix:"_mid"})}}}return{value:r.scale.bandSize/2}}function f(e,t,r){if(e){if(e.field){return{scale:t,field:a.field(e)}}if(e.value){return{value:e.value}}}return{value:r.mark.fontSize}}function c(e,t,r){if(e){if(e.field){if(s.QUANTITATIVE===e.type){var n=i.numberFormat(e,r.mark.format,r);var o="number"+(n?":'"+n+"'":"");return{template:"{{"+a.field(e,{datum:true})+" | "+o+"}}"}}else if(s.TEMPORAL===e.type){return{template:i.timeTemplate(a.field(e,{datum:true}),e.timeUnit,r.mark.format,r.mark.shortTimeLabels,r)}}else{return{field:e.field}}}else if(e.value){return{value:e.value}}}return{value:r.mark.text}}})(o=t.text||(t.text={}))},GMts:function(e,t,r){var n=r("5AQc");function i(e){this._pending=0;this._config=e||i.Config}i.Config=null;var a=i.prototype;a.pending=function(){return this._pending};a.params=function(e){var t={url:e},r;for(r in this._config){t[r]=this._config[r]}return t};a.imageURL=function(e){return n.sanitizeUrl(this.params(e))};function s(e,t){var r=n.sanitizeUrl(this.params(e));if(!r){if(t)t(e,null);return null}var i=this,a=new Image;i._pending+=1;a.onload=function(){i._pending-=1;a.loaded=true;if(t)t(null,a)};a.src=r;return a}function o(e,t){var i=this,a=new(r(11).Image);i._pending+=1;n(this.params(e),function(e,r){i._pending-=1;if(e){if(t)t(e,null);return null}a.src=r;a.loaded=true;if(t)t(null,a)});return a}a.loadImage=function(e,t){return n.useXHR?s.call(this,e,t):o.call(this,e,t)};e.exports=i},GXXi:function(e,t,r){var n=r("zicW"),i=r("Za4h"),a=r("NobO"),s=r("2pdF").canvas,o=r("Zrjw"),u=r("J731"),l=r("4JPs"),f=r("acp7");function c(e){f.prototype.init.call(this,e);l.addParameters(this,{size:{type:"array<value>",default:r("MRce").size},text:{type:"field",default:"data"},rotate:{type:"field|value",default:0},font:{type:"field|value",default:{value:"sans-serif"}},fontSize:{type:"field|value",default:14},fontStyle:{type:"field|value",default:{value:"normal"}},fontWeight:{type:"field|value",default:{value:"normal"}},fontScale:{type:"array<value>",default:[10,50]},padding:{type:"value",default:1},spiral:{type:"value",default:"archimedean"}});this._layout=a().canvas(s.instance);this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"};return this.mutates(true)}var d=c.prototype=Object.create(f.prototype);d.constructor=c;function p(e){return e&&e.accessor||e}function h(e){var t=Object.create(e);t._tuple=e;return t}d.batchTransform=function(e,t){u.debug(e,["wordcloud"]);var r=this._layout,a=this._output,s=this.param("fontSize"),l=s.accessor&&this.param("fontScale"),f,c;s=s.accessor||i.functor(s);if(l.length){c=i.scale.sqrt().domain(n.extent(t,f=s)).range(l);s=function(e){return c(f(e))}}r.size(this.param("size")).text(p(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(p(this.param("rotate"))).font(p(this.param("font"))).fontStyle(p(this.param("fontStyle"))).fontWeight(p(this.param("fontWeight"))).fontSize(s).words(t.map(h)).on("end",function(e){var t=r.size(),n=t[0]>>1,i=t[1]>>1,s,u,l,f;for(l=0,f=e.length;l<f;++l){s=e[l];u=s._tuple;o.set(u,a.x,s.x+n);o.set(u,a.y,s.y+i);o.set(u,a.font,s.font);o.set(u,a.fontSize,s.size);o.set(u,a.fontStyle,s.style);o.set(u,a.fontWeight,s.weight);o.set(u,a.rotate,s.rotate)}}).start();for(var d in a)e.fields[a[d]]=1;return e};e.exports=c;var m=r("fRRI");c.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Wordcloud transform",type:"object",properties:{type:{enum:["wordcloud"]},size:{description:"The dimensions of the wordcloud layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[900,500]},font:{description:"The font face to use for a word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],default:"sans-serif"},fontStyle:{description:"The font style to use for a word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],default:"normal"},fontWeight:{description:"The font weight to use for a word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],default:"normal"},fontSize:{description:"The font size to use for a word.",oneOf:[{type:"number"},m.schema,{type:"string"},{$ref:"#/refs/signal"}],default:14},fontScale:{description:"The minimum and maximum scaled font sizes, or null to prevent scaling.",oneOf:[{type:"null"},{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}],default:[10,50]},rotate:{description:"The field or number to set the roration angle (in degrees).",oneOf:[{type:"number"},{type:"string"},m.schema,{$ref:"#/refs/signal"}],default:0},text:{description:"The field containing the text to use for each word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],default:"data"},spiral:{description:"The type of spiral used for positioning words, either 'archimedean' or 'rectangular'.",oneOf:[{enum:["archimedean","rectangular"]},m.schema,{$ref:"#/refs/signal"}],default:"archimedean"},padding:{description:"The padding around each word.",oneOf:[{type:"number"},m.schema,{$ref:"#/refs/signal"}],default:1},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},font:{type:"string",default:"layout_font"},fontSize:{type:"string",default:"layout_fontSize"},fontStyle:{type:"string",default:"layout_fontStyle"},fontWeight:{type:"string",default:"layout_fontWeight"},rotate:{type:"string",default:"layout_rotate"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},GXhC:function(e,t,r){var n=r("zF6n"),i=r("pd8q"),a=r("4iS9"),s=r("U1Zs"),o=s,u=a,l=new Date(2e3,0,1),f,c,d,p;e.exports={numberLocale:m,number:function(e){return o.format(e)},numberPrefix:function(e,t){return o.formatPrefix(e,t)},timeLocale:g,time:function(e){return u.format(e)},utc:function(e){return u.utcFormat(e)},locale:function(e){m(e);g(e)},auto:{number:S,linear:T,time:function(){return E()},utc:function(){return A()}},month:O,day:M,quarter:w,utcQuarter:L};function h(e){return e.length>4&&"locale"+(e[0].toUpperCase()+e[1].toLowerCase()+e[3].toUpperCase()+e[4].toLowerCase())}function m(e){var t=n.isString(e)?s[h(e)]:s.locale(e);if(t==null)throw Error("Unrecognized locale: "+e);o=t}function g(e){var t=n.isString(e)?a[h(e)]:a.locale(e);if(t==null)throw Error("Unrecognized locale: "+e);u=t;f=c=d=p=null}var v=Math.sqrt(50),y=Math.sqrt(10),_=Math.sqrt(2);function b(e,t){if(!e.length)e=[0];if(t==null)t=10;var r=e[0],n=e[e.length-1];if(n<r){s=n;n=r;r=s}var i=n-r||(t=1,r||n||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),s=i/t/a;if(s>=v)a*=10;else if(s>=y)a*=5;else if(s>=_)a*=2;return[Math.ceil(r/a)*a,Math.floor(n/a)*a+a/2,a]}function x(e,t){return function(r){var n=e(r),i=n.indexOf(t);if(i<0)return n;var a=k(n,i),s=a<n.length?n.slice(a):"";while(--a>i){if(n[a]!=="0"){++a;break}}return n.slice(0,a)+s}}function k(e,t){var r=e.lastIndexOf("e"),n;if(r>0)return r;for(r=e.length;--r>t;){n=e.charCodeAt(r);if(n>=48&&n<=57)return r+1}}function S(e){var t=o.format(".1f")(1)[1];if(e==null)e=",";e=s.formatSpecifier(e);if(e.precision==null)e.precision=12;switch(e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return x(o.format(e),t)}function T(e,t,r){var n=b(e,t);if(r==null)r=",f";switch(r=s.formatSpecifier(r),r.type){case"s":{var i=Math.max(Math.abs(n[0]),Math.abs(n[1]));if(r.precision==null)r.precision=s.precisionPrefix(n[2],i);return o.formatPrefix(r,i)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null)r.precision=s.precisionRound(n[2],Math.max(Math.abs(n[0]),Math.abs(n[1])))-(r.type==="e");break}case"f":case"%":{if(r.precision==null)r.precision=s.precisionFixed(n[2])-2*(r.type==="%");break}}return o.format(r)}function E(){var e=u.format,t=e(".%L"),r=e(":%S"),n=e("%I:%M"),a=e("%I %p"),s=e("%a %d"),o=e("%b %d"),l=e("%B"),f=e("%Y");return function(e){var u=+e;return(i.second(e)<u?t:i.minute(e)<u?r:i.hour(e)<u?n:i.day(e)<u?a:i.month(e)<u?i.week(e)<u?s:o:i.year(e)<u?l:f)(e)}}function A(){var e=u.utcFormat,t=e(".%L"),r=e(":%S"),n=e("%I:%M"),a=e("%I %p"),s=e("%a %d"),o=e("%b %d"),l=e("%B"),f=e("%Y");return function(e){var u=+e;return(i.utcSecond(e)<u?t:i.utcMinute(e)<u?r:i.utcHour(e)<u?n:i.utcDay(e)<u?a:i.utcMonth(e)<u?i.utcWeek(e)<u?s:o:i.utcYear(e)<u?l:f)(e)}}function O(e,t){var r=t?c||(c=u.format("%b")):f||(f=u.format("%B"));return l.setMonth(e),r(l)}function M(e,t){var r=t?p||(p=u.format("%a")):d||(d=u.format("%A"));return l.setMonth(0),l.setDate(2+e),r(l)}function w(e){return Math.floor(e.getMonth()/3)+1}function L(e){return Math.floor(e.getUTCMonth()/3)+1}},HES2:function(e,t,r){"use strict";var n=r("P/aK");var i=r("o+e1");var a=r("MtYt");var s;(function(e){function t(){return"line"}e.markType=t;function r(e){var t={};var r=e.config();t.x=s(e.encoding().x,e.scaleName(n.X),r);t.y=o(e.encoding().y,e.scaleName(n.Y),r);var i=u(e.encoding().size,r);if(i){t.strokeWidth=i}a.applyColorAndOpacity(t,e);a.applyMarkConfig(t,e,["interpolate","tension"]);return t}e.properties=r;function s(e,t,r){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{value:0}}function o(e,t,r){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{field:{group:"height"}}}function u(e,t){if(e&&e.value!==undefined){return{value:e.value}}return{value:t.mark.lineSize}}function l(e){return undefined}e.labels=l})(s=t.line||(t.line={}))},HeGT:function(e,t,r){"use strict";var n=r("cihr");var i=r("P/aK");var a=r("o+e1");var s=r("WJ2w");var o=r("ZAUf");var u=r("MtYt");function l(e,t){return t.reduce(function(t,r){if(e.axis(r)){t[r]=c(r,e)}return t},{})}t.parseAxisComponent=l;function f(e,r){var n=e===i.COLUMN,a=e===i.ROW,s=n?"x":a?"y":e;var u={type:s,scale:r.scaleName(e),grid:true,tickSize:0,properties:{labels:{text:{value:""}},axis:{stroke:{value:"transparent"}}}};var l=r.axis(e);["layer","ticks","values","subdivide"].forEach(function(n){var i;var a=(i=t[n])?i(r,e,u):l[n];if(a!==undefined){u[n]=a}});var f=r.axis(e).properties||{};["grid"].forEach(function(t){var n=S[t]?S[t](r,e,f[t]||{},u):f[t];if(n!==undefined&&o.keys(n).length>0){u.properties=u.properties||{};u.properties[t]=n}});return u}t.parseInnerAxis=f;function c(e,r){var n=e===i.COLUMN,a=e===i.ROW,s=n?"x":a?"y":e;var u=r.axis(e);var l={type:s,scale:r.scaleName(e)};["format","grid","layer","offset","orient","tickSize","ticks","tickSizeEnd","title","titleOffset","tickPadding","tickSize","tickSizeMajor","tickSizeMinor","values","subdivide"].forEach(function(n){var i;var a=(i=t[n])?i(r,e,l):u[n];if(a!==undefined){l[n]=a}});var f=r.axis(e).properties||{};["axis","labels","grid","title","ticks","majorTicks","minorTicks"].forEach(function(t){var n=S[t]?S[t](r,e,f[t]||{},l):f[t];if(n!==undefined&&o.keys(n).length>0){l.properties=l.properties||{};l.properties[t]=n}});return l}t.parseAxis=c;function d(e,t){return u.numberFormat(e.fieldDef(t),e.axis(t).format,e.config())}t.format=d;function p(e,t){return e.axis(t).offset}t.offset=p;function h(e,t){var r=e.axis(t).grid;if(r!==undefined){return r}return!e.isOrdinalScale(t)&&!e.fieldDef(t).bin}t.gridShow=h;function m(e,t){if(t===i.ROW||t===i.COLUMN){return undefined}return h(e,t)&&((t===i.Y||t===i.X)&&!(e.parent()&&e.parent().isFacet()))}t.grid=m;function g(e,t,r){var n=e.axis(t).layer;if(n!==undefined){return n}if(r.grid){return"back"}return undefined}t.layer=g;function v(e,t){var r=e.axis(t).orient;if(r){return r}else if(t===i.COLUMN){return n.AxisOrient.TOP}return undefined}t.orient=v;function y(e,t){var r=e.axis(t).ticks;if(r!==undefined){return r}if(t===i.X&&!e.fieldDef(t).bin){return 5}return undefined}t.ticks=y;function _(e,t){var r=e.axis(t).tickSize;if(r!==undefined){return r}return undefined}t.tickSize=_;function b(e,t){var r=e.axis(t).tickSizeEnd;if(r!==undefined){return r}return undefined}t.tickSizeEnd=b;function x(e,t){var r=e.axis(t);if(r.title!==undefined){return r.title}var n=a.title(e.fieldDef(t),e.config());var s;if(r.titleMaxLength){s=r.titleMaxLength}else if(t===i.X&&!e.isOrdinalScale(i.X)){var u=e;s=u.config().cell.width/e.axis(i.X).characterWidth}else if(t===i.Y&&!e.isOrdinalScale(i.Y)){var u=e;s=u.config().cell.height/e.axis(i.Y).characterWidth}return s?o.truncate(n,s):n}t.title=x;function k(e,t){var r=e.axis(t).titleOffset;if(r!==undefined){return r}return undefined}t.titleOffset=k;var S;(function(e){function t(e,t,r){var n=e.axis(t);return o.extend(n.axisColor!==undefined?{stroke:{value:n.axisColor}}:{},n.axisWidth!==undefined?{strokeWidth:{value:n.axisWidth}}:{},r||{})}e.axis=t;function r(e,t,r){var n=e.axis(t);return o.extend(n.gridColor!==undefined?{stroke:{value:n.gridColor}}:{},n.gridOpacity!==undefined?{strokeOpacity:{value:n.gridOpacity}}:{},n.gridWidth!==undefined?{strokeWidth:{value:n.gridWidth}}:{},n.gridDash!==undefined?{strokeDashOffset:{value:n.gridDash}}:{},r||{})}e.grid=r;function n(e,t,r,n){var l=e.fieldDef(t);var f=e.axis(t);var c=e.config();if(!f.labels){return o.extend({text:""},r)}if(o.contains([s.NOMINAL,s.ORDINAL],l.type)&&f.labelMaxLength){r=o.extend({text:{template:"{{ datum.data | truncate:"+f.labelMaxLength+" }}"}},r||{})}else if(l.type===s.TEMPORAL){r=o.extend({text:{template:u.timeTemplate("datum.data",l.timeUnit,f.format,f.shortTimeLabels,c)}},r)}if(f.labelAngle!==undefined){r.angle={value:f.labelAngle}}else{if(t===i.X&&(a.isDimension(l)||l.type===s.TEMPORAL)){r.angle={value:270}}}if(f.labelAlign!==undefined){r.align={value:f.labelAlign}}else{if(r.angle){if(r.angle.value===270){r.align={value:n.orient==="top"?"left":n.type==="x"?"right":"center"}}else if(r.angle.value===90){r.align={value:"center"}}}}if(f.labelBaseline!==undefined){r.baseline={value:f.labelBaseline}}else{if(r.angle){if(r.angle.value===270){r.baseline={value:n.type==="x"?"middle":"bottom"}}else if(r.angle.value===90){r.baseline={value:"bottom"}}}}if(f.tickLabelColor!==undefined){r.stroke={value:f.tickLabelColor}}if(f.tickLabelFont!==undefined){r.font={value:f.tickLabelFont}}if(f.tickLabelFontSize!==undefined){r.fontSize={value:f.tickLabelFontSize}}return o.keys(r).length===0?undefined:r}e.labels=n;function l(e,t,r){var n=e.axis(t);return o.extend(n.tickColor!==undefined?{stroke:{value:n.tickColor}}:{},n.tickWidth!==undefined?{strokeWidth:{value:n.tickWidth}}:{},r||{})}e.ticks=l;function f(e,t,r){var n=e.axis(t);return o.extend(n.titleColor!==undefined?{stroke:{value:n.titleColor}}:{},n.titleFont!==undefined?{font:{value:n.titleFont}}:{},n.titleFontSize!==undefined?{fontSize:{value:n.titleFontSize}}:{},n.titleFontWeight!==undefined?{fontWeight:{value:n.titleFontWeight}}:{},r||{})}e.title=f})(S=t.properties||(t.properties={}))},IRQj:function(e,t,r){var n=r("Za4h"),i=r("YzNj"),a=r("wWYS"),s=r("CBR6"),o=r("4Wr6");var u={editor_url:"http://vega.github.io/vega-editor/",source_header:"",source_footer:""};var l={vega:"vega","vega-lite":"vega-lite"};var f={vega:function(e){return e},"vega-lite":function(e){return a.compile(e).spec}};function c(e,t,r,n,a){i.util.load({url:e},function(s,o){var u;if(s||!o){console.error(s||"No data found at "+e)}else{if(!t){u=JSON.parse(o)}else{u=i.util.extend({},t);u[r]=r==="source"?o:JSON.parse(o)}d(n,u,a)}})}function d(e,t,r){var a=r||function(){},u=[],h,m,g,v;try{if(i.util.isString(t)){return c(t,null,null,e,r)}else if(t.source){h=t.source;m=JSON.parse(h)}else if(t.spec){m=t.spec;h=JSON.stringify(m,null,2)}else if(t.url){return c(t.url,t,"source",e,r)}else{m=t;h=JSON.stringify(m,null,2);t={spec:m,actions:false}}g=l[t.mode]||l.vega;m=f[g](m);if(i.util.isString(t.config)){return c(t.config,t,"config",e,r)}else if(t.config){v=t.config}var y=n.select(e).classed("vega-embed",true).html("");if(t.parameters){var _=t.parameter_el?n.select(t.parameter_el):y;var b=_.append("div").attr("class","vega-params");u=t.parameters.map(function(e){return s.init(b,e,m)})}}catch(e){a(e)}i.parse.spec(m,v,function(r,i){if(r){a(r);return}try{var l=t.renderer||"canvas",f=t.actions||{};var c=i({el:e,data:t.data||undefined,renderer:l});if(t.actions!==false){var v=y.append("div").attr("class","vega-actions");if(f.export!==false){var _=l==="canvas"?"png":"svg";v.append("a").text("Export as "+_.toUpperCase()).attr("href","#").attr("target","_blank").attr("download",(m.name||"vega")+"."+_).on("mousedown",function(){this.href=c.toImageURL(_);n.event.preventDefault()})}if(f.source!==false){v.append("a").text("View Source").attr("href","#").on("click",function(){p(h);n.event.preventDefault()})}if(f.editor!==false){v.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){o(window,d.config.editor_url,{spec:h,mode:g});n.event.preventDefault()})}}u.forEach(function(e){s.bind(e,c)});c.update();a(null,{view:c,spec:m})}catch(e){a(e)}})}function p(e){var t="<html><head>"+u.source_header+"</head>"+'<body><pre><code class="json">';var r="</code></pre>"+u.source_footer+"</body></html>";var n=window.open("");n.document.write(t+e+r);n.document.title="Vega JSON Source"}d.config=u;e.exports=d},ISRz:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)};var i=r("cihr");var a=r("P/aK");var s=r("Py5Z");var o=r("x6Fv");var u=r("QSMf");var l=r("o+e1");var f=r("Fw/k");var c=r("WJ2w");var d=r("ZAUf");var p=r("HeGT");var h=r("MtYt");var m=r("V22v");var g=r("YBv9");var v=r("jGoH");var y=r("TLMq");var _=function(e){n(t,e);function t(t,r,n){e.call(this,t,r,n);var i=this._config=this._initConfig(t.config,r);var a=this._child=h.buildModel(t.spec,this,this.name("child"));var s=this._facet=this._initFacet(t.facet);this._scale=this._initScale(s,i,a);this._axis=this._initAxis(s,i,a)}t.prototype._initConfig=function(e,t){return d.mergeDeep(d.duplicate(s.defaultConfig),e,t?t.config():{})};t.prototype._initFacet=function(e){e=d.duplicate(e);var t=this;u.channelMappingForEach(this.channels(),e,function(e,r){if(!l.isDimension(e)){t.addWarning(r+" encoding should be ordinal.")}if(e.type){e.type=c.getFullName(e.type)}});return e};t.prototype._initScale=function(e,t,r){return[a.ROW,a.COLUMN].reduce(function(n,i){if(e[i]){var s=e[i].scale||{};n[i]=d.extend({type:f.ScaleType.ORDINAL,round:t.facet.scale.round,padding:i===a.ROW&&r.has(a.Y)||i===a.COLUMN&&r.has(a.X)?t.facet.scale.padding:0},s)}return n},{})};t.prototype._initAxis=function(e,t,r){return[a.ROW,a.COLUMN].reduce(function(n,s){if(e[s]){var o=e[s].axis;if(o!==false){var u=n[s]=d.extend({},t.facet.axis,o===true?{}:o||{});if(s===a.ROW){var l=r.axis(a.Y);if(l&&l.orient!==i.AxisOrient.RIGHT&&!u.orient){u.orient=i.AxisOrient.RIGHT}if(r.has(a.X)&&!u.labelAngle){u.labelAngle=u.orient===i.AxisOrient.RIGHT?90:270}}}}return n},{})};t.prototype.facet=function(){return this._facet};t.prototype.has=function(e){return!!this._facet[e]};t.prototype.child=function(){return this._child};t.prototype.hasSummary=function(){var e=this.component.data.summary;for(var t=0;t<e.length;t++){if(d.keys(e[t].measures).length>0){return true}}return false};t.prototype.dataTable=function(){return(this.hasSummary()?o.SUMMARY:o.SOURCE)+""};t.prototype.fieldDef=function(e){return this.facet()[e]};t.prototype.stack=function(){return null};t.prototype.parseData=function(){this.child().parseData();this.component.data=m.parseFacetData(this)};t.prototype.parseSelectionData=function(){};t.prototype.parseLayoutData=function(){this.child().parseLayoutData();this.component.layout=g.parseFacetLayout(this)};t.prototype.parseScale=function(){var e=this.child();var t=this;e.parseScale();var r=this.component.scale=y.parseScaleComponent(this);d.keys(e.component.scale).forEach(function(n){if(true){r[n]=e.component.scale[n];d.vals(r[n]).forEach(function(r){var n=r.name.substr(e.name("").length);var i=t.scaleName(n);e.renameScale(r.name,i);r.name=i});delete e.component.scale[n]}})};t.prototype.parseMark=function(){this.child().parseMark();this.component.mark=d.extend({name:this.name("cell"),type:"group",from:d.extend(this.dataTable()?{data:this.dataTable()}:{},{transform:[{type:"facet",groupby:[].concat(this.has(a.ROW)?[this.field(a.ROW)]:[],this.has(a.COLUMN)?[this.field(a.COLUMN)]:[])}]}),properties:{update:b(this)}},this.child().assembleGroup())};t.prototype.parseAxis=function(){this.child().parseAxis();this.component.axis=p.parseAxisComponent(this,[a.ROW,a.COLUMN])};t.prototype.parseAxisGroup=function(){var e=x(this,a.X);var t=x(this,a.Y);this.component.axisGroup=d.extend(e?{x:e}:{},t?{y:t}:{})};t.prototype.parseGridGroup=function(){var e=this.child();this.component.gridGroup=d.extend(!e.has(a.X)&&this.has(a.COLUMN)?{column:E(this)}:{},!e.has(a.Y)&&this.has(a.ROW)?{row:T(this)}:{})};t.prototype.parseLegend=function(){this.child().parseLegend();this.component.legend=this._child.component.legend;this._child.component.legend={}};t.prototype.assembleParentGroupProperties=function(){return null};t.prototype.assembleData=function(e){m.assembleData(this,e);return this._child.assembleData(e)};t.prototype.assembleLayout=function(e){this._child.assembleLayout(e);return g.assembleLayout(this,e)};t.prototype.assembleMarks=function(){return[].concat(d.vals(this.component.axisGroup),d.flatten(d.vals(this.component.gridGroup)),this.component.mark)};t.prototype.channels=function(){return[a.ROW,a.COLUMN]};t.prototype.mapping=function(){return this.facet()};t.prototype.isFacet=function(){return true};return t}(v.Model);t.FacetModel=_;function b(e){var t=e.child();var r=d.extend({},t.config().cell,t.config().facet.cell);return d.extend({x:e.has(a.COLUMN)?{scale:e.scaleName(a.COLUMN),field:e.field(a.COLUMN),offset:e.scale(a.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2},y:e.has(a.ROW)?{scale:e.scaleName(a.ROW),field:e.field(a.ROW),offset:e.scale(a.ROW).padding/2}:{value:e.config().facet.scale.padding/2},width:{field:{parent:e.child().sizeName("width")}},height:{field:{parent:e.child().sizeName("height")}}},t.assembleParentGroupProperties(r))}function x(e,t){var r=null;var n=e.child();if(n.has(t)){if(n.axis(t)){if(true){r=t===a.X?k(e):S(e);if(n.axis(t)&&p.gridShow(n,t)){n.component.axis[t]=p.parseInnerAxis(t,n)}else{delete n.component.axis[t]}}else{}}}return r}function k(e){var t=e.has(a.COLUMN);return d.extend({name:e.name("x-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(a.COLUMN)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{parent:e.child().sizeName("width")}},height:{field:{group:"height"}},x:t?{scale:e.scaleName(a.COLUMN),field:e.field(a.COLUMN),offset:e.scale(a.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[p.parseAxis(a.X,e.child())]})}function S(e){var t=e.has(a.ROW);return d.extend({name:e.name("y-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(a.ROW)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{group:"width"}},height:{field:{parent:e.child().sizeName("height")}},y:t?{scale:e.scaleName(a.ROW),field:e.field(a.ROW),offset:e.scale(a.ROW).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[p.parseAxis(a.Y,e.child())]})}function T(e){var t=e.config().facet.grid;var r={name:e.name("row-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(a.ROW)]}]},properties:{update:{y:{scale:e.scaleName(a.ROW),field:e.field(a.ROW)},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[r,{name:e.name("row-grid-end"),type:"rule",properties:{update:{y:{field:{group:"height"}},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}function E(e){var t=e.config().facet.grid;var r={name:e.name("column-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(a.COLUMN)]}]},properties:{update:{x:{scale:e.scaleName(a.COLUMN),field:e.field(a.COLUMN)},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[r,{name:e.name("column-grid-end"),type:"rule",properties:{update:{x:{field:{group:"width"}},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}},J731:function(e,t){var r=Date.now();function n(e){console.log("[Vega Log]",e)}function i(e){console.error("[Vega Err]",e)}function a(e,t){if(!a.enable)return;var n=Function.prototype.bind.call(console.log,console);var i={prevTime:Date.now()-r,stamp:e.stamp};if(e.add){i.add=e.add.length;i.mod=e.mod.length;i.rem=e.rem.length;i.reflow=!!e.reflow}n.apply(console,(t.push(JSON.stringify(i)),t));r=Date.now()}e.exports={log:n,error:i,debug:(a.enable=false,a)}},KKvq:function(e,t,r){e.exports={arc:r("xNCi"),area:r("LqIm"),group:r("OgTP"),image:r("pvXc"),line:r("tT5v"),path:r("3lgv"),rect:r("tbPx"),rule:r("qtVb"),symbol:r("Ad3P"),text:r("ZvZD")}},LhY1:function(e,t,r){e.exports={parse:r("esTF"),render:r("YExv")}},"Lp/H":function(e,t,r){var n=r("Za4h"),i=r("2pdF").bound,a=r("zsFm").Tuple,s=r("Vp7n").STATUS;function o(e,t){this.duration=e||500;this.ease=t&&n.ease(t)||n.ease("cubic-in-out");this.updates={next:null}}var u=o.prototype;var l={text:1,url:1};u.interpolate=function(e,t){var r,i,o,u,f=null;for(r in t){i=e[r];o=t[r];if(i!==o){if(l[r]||i===undefined){a.set(e,r,o)}else if(typeof i==="number"&&!isFinite(i)){a.set(e,r,o)}else{u=n.interpolate(i,o);u.property=r;(f||(f=[])).push(u)}}}if(f===null&&e.status===s.EXIT){f=[]}if(f!=null){f.item=e;f.ease=e.mark.ease||this.ease;f.next=this.updates.next;this.updates.next=f}return this};u.start=function(e){var t=this,r=t.updates,i=r.next;for(;i!=null;r=i,i=r.next){if(i.item.status===s.EXIT){i.item.status=s.UPDATE;i.remove=true}}t.callback=e;n.timer(function(e){return f.call(t,e)})};function f(e){var t=this.updates,r=t,n=r.next,a=this.duration,o,u,l,f,c,d,p=true;for(;n!=null;r=n,n=r.next){o=n.item;u=o.delay||0;l=(e-u)/a;if(l<0){p=false;continue}if(l>1)l=1;f=n.ease(l);for(c=0,d=n.length;c<d;++c){o[n[c].property]=n[c](f)}o.touch();i.item(o);if(l===1){if(n.remove){o.status=s.EXIT;o.remove()}r.next=n.next;n=r}else{p=false}}this.callback();return p}e.exports=o},LqIm:function(e,t,r){var n=r("FF9f"),i=r("esTF"),a=r("YExv"),s=r("UTTf").path.area;function o(e,t){var r=t[0],n=r.pathCache||(r.pathCache=i(s(t)));a(e,n)}function u(e,t,r,n,i,a){var s=t.items,o=t.bounds;if(!s||!s.length||o&&!o.contains(i,a)){return null}if(e.pixelratio!=null&&e.pixelratio!==1){r*=e.pixelratio;n*=e.pixelratio}return l(e,s,r,n)?s[0]:null}var l=n.testPath(o);e.exports={draw:n.drawOne(o),pick:u,nested:true}},MRce:function(e,t){e.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},"MZ+b":function(e,t,r){var n=r("zsFm"),i=n.Tuple,a=r("J731"),s=r("4JPs");function o(e){s.prototype.init.call(this,e);s.addParameters(this,{fields:{type:"array<field>"}});this._output={key:"key",value:"value"};this._cache={};return this.router(true).produces(true)}var u=o.prototype=Object.create(s.prototype);u.constructor=o;u._reset=function(e,t){for(var r in this._cache){t.rem.push.apply(t.rem,this._cache[r])}this._cache={}};u._tuple=function(e,t,r){var n=this._cache[e._id]||(this._cache[e._id]=Array(r));return n[t]?i.rederive(e,n[t]):n[t]=i.derive(e)};u._fn=function(e,t,r){var n,a,s,o,u,l;for(n=0,s=e.length;n<s;++n){u=e[n];for(a=0,o=t.field.length;a<o;++a){l=this._tuple(u,a,o);i.set(l,this._output.key,t.field[a]);i.set(l,this._output.value,t.accessor[a](u));r.push(l)}}};u.transform=function(e,t){a.debug(e,["folding"]);var r=this,i=this.param("fields"),s=n.ChangeSet.create(e);if(t)this._reset(e,s);this._fn(e.add,i,s.add);this._fn(e.mod,i,t?s.add:s.mod);e.rem.forEach(function(e){s.rem.push.apply(s.rem,r._cache[e._id]);r._cache[e._id]=null});if(e.add.length||e.rem.length||i.field.some(function(t){return!!e.fields[t]})){s.fields[this._output.key]=1;s.fields[this._output.value]=1}return s};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Fold transform",description:'Collapse ("fold") one or more data properties into two properties.',type:"object",properties:{type:{enum:["fold"]},fields:{oneOf:[{type:"array",description:"An array of field references indicating the data properties to fold.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},minItems:1,uniqueItems:true},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{key:{type:"string",default:"key"},value:{type:"string",default:"value"}},additionalProperties:false}},additionalProperties:false,required:["type","fields"]}},MtYt:function(e,t,r){"use strict";var n=r("P/aK");var i=r("o+e1");var a=r("yLwJ");var s=r("WJ2w");var o=r("ZAUf");var u=r("ISRz");var l=r("Wwtv");var f=r("z5TJ");var c=r("zYzi");var d=r("F9eC");function p(e,t,r){if(d.isFacetSpec(e)){return new u.FacetModel(e,t,r)}if(d.isLayerSpec(e)){return new l.LayerModel(e,t,r)}if(d.isUnitSpec(e)){return new c.UnitModel(e,t,r)}console.error("Invalid spec.");return null}t.buildModel=p;t.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","opacity"];t.FILL_CONFIG=["fill","fillOpacity","opacity"];t.FILL_STROKE_CONFIG=o.union(t.STROKE_CONFIG,t.FILL_CONFIG);function h(e,r){var i=r.config().mark.filled;var a=r.fieldDef(n.COLOR);var o=r.fieldDef(n.OPACITY);if(i){g(e,r,t.FILL_CONFIG)}else{g(e,r,t.STROKE_CONFIG)}var u;var l;if(r.has(n.COLOR)){u={scale:r.scaleName(n.COLOR),field:r.field(n.COLOR,a.type===s.ORDINAL?{prefn:"rank_"}:{})}}else if(a&&a.value){u={value:a.value}}if(r.has(n.OPACITY)){l={scale:r.scaleName(n.OPACITY),field:r.field(n.OPACITY,o.type===s.ORDINAL?{prefn:"rank_"}:{})}}else if(o&&o.value){l={value:o.value}}if(u!==undefined){if(i){e.fill=u}else{e.stroke=u}}else{e[i?"fill":"stroke"]=e[i?"fill":"stroke"]||{value:r.config().mark.color}}if(l!==undefined){e.opacity=l}}t.applyColorAndOpacity=h;function m(e,t,r){r.forEach(function(r){var n=t[r];if(n!==undefined){e[r]={value:n}}});return e}t.applyConfig=m;function g(e,t,r){return m(e,t.config().mark,r)}t.applyMarkConfig=g;function v(e,t,r){if(e.type===s.QUANTITATIVE&&!e.bin){return t||r.numberFormat}return undefined}t.numberFormat=v;function y(e){return(e.sort===a.SortOrder.DESCENDING?"-":"")+i.field(e,{binSuffix:"_mid"})}t.sortField=y;function _(e,t,r,n,i){if(!t||r){var a=r||i.timeFormat;return"{{"+e+" | time:'"+a+"'}}"}else{return f.template(t,e,n)}}t.timeTemplate=_},"N4b/":function(e,t,r){var n=r("VY+T"),i=r("3Lw3");function a(){i.call(this)}var s=i.prototype;var o=a.prototype=Object.create(s);o.constructor=a;o.initialize=function(e,t,r){this._svg=n.find(e,"svg");return s.initialize.call(this,e,t,r)};o.svg=function(){return this._svg};o.listener=function(e){var t=this;return function(r){var n=r.target,i=n.__data__;r.vegaType=r.type;i=Array.isArray(i)?i[0]:i;e.call(t._obj,r,i)}};o.on=function(e,t){var r=this.eventName(e),n=this._svg,i=this._handlers,a={type:e,handler:t,listener:this.listener(t)};(i[r]||(i[r]=[])).push(a);n.addEventListener(r,a.listener);return this};o.off=function(e,t){var r=this.eventName(e),n=this._svg,i=this._handlers[r],a;if(!i)return;for(a=i.length;--a>=0;){if(i[a].type===e&&!t||i[a].handler===t){n.removeEventListener(r,i[a].listener);i.splice(a,1)}}return this};e.exports=a},NNYs:function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("zsFm"),s=r("J731"),o=a.Node,u=a.Dependencies,l=r("3Y21");var f={width:1,height:1};var c={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"};var d={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"};function p(e,t,r){this._def=t;this._parent=r;this._updated=false;return o.prototype.init.call(this,e).reflows(true)}var h=p.prototype=new o;h.evaluate=function(e){var t=this,r=function(e){m.call(t,e)};this._updated=false;e.add.forEach(r);e.mod.forEach(r);if(this._updated){e.scales[this._def.name]=1;s.debug(e,["scale",this._def.name])}return a.ChangeSet.create(e,true)};h.dependency=function(e,t){if(arguments.length==2){var r=e===u.DATA?"data":"signal";t=i.array(t);for(var n=0,a=t.length;n<a;++n){this._graph[r](t[n]).addListener(this._parent)}}return o.prototype.dependency.call(this,e,t)};function m(e){var t=this._def.name,r=t+":prev",n=g.call(this,e.scale(t)),i=n.type===c.ORDINAL?v:k,a=C.call(this,e);i.call(this,n,a,e);e.scale(t,n);e.scale(r,e.scale(r)||n);return n}function g(e){var t=this._graph.config(),r=this._def.type||c.LINEAR;if(!e||r!==e.type){var i=t.scale[r]||n.scale[r];if(!i)throw Error("Unrecognized scale type: "+r);(e=i()).type=e.type||r;e.scaleName=this._def.name;e._prev={}}return e}function v(e,t,r){var n=this._def,a=e._prev,s=false,o=L.call(this,n.padding)||0,u=n.outerPadding==null?o:L.call(this,n.outerPadding),l=n.points&&L.call(this,n.points),f=L.call(this,n.round)||n.round==null,c,p,h=true;if(i.isObject(n.range)&&!i.isArray(n.range)){s=true;t=w.call(this,d.RANGE,n.range,e,r)}c=w.call(this,d.DOMAIN,n.domain,e,r);if(c&&!i.equal(a.domain,c)){e.domain(c);a.domain=c;this._updated=true}if(!i.equal(a.range,t)){if(n.bandSize){var m=L.call(this,n.bandSize),g=c.length,v=n.points?o*m:o*m*(g-1)+2*u,y;if(t[0]>t[1]){y=t[1]||0;t=[y+(m*g+v),y]}else{y=t[0]||0;t=[y,y+(m*g+v)]}if(n.reverse)t=t.reverse()}p=typeof t[0]==="string";if(p||t.length>2||t.length===1||s){e.range(t);h=false}else if(l&&f){e.rangeRoundPoints(t,o)}else if(l){e.rangePoints(t,o)}else if(f){e.rangeRoundBands(t,o,u)}else{e.rangeBands(t,o,u)}a.range=t;this._updated=true}if(!e.invert&&h)x(e)}var y=n.bisector(i.numcmp).right,_=function(e,t){return y(e,t)-1},b=n.bisector(function(e,t){return-1*i.numcmp(e,t)}).left;function x(e){e.invert=function(t,r){var n=e.range(),a=n[0]<n[1],s=a?_:b;if(arguments.length===1){if(!i.isNumber(t)){throw Error("Ordinal scale inversion is only supported for numeric input ("+t+").")}return e.domain()[s(n,t)]}else if(arguments.length===2){if(!i.isNumber(t)||!i.isNumber(r)){throw Error("Extents to ordinal invert are not numbers ("+t+", "+r+").")}var o=e.domain(),u=s(n,t),l=s(n,r),f=n.length-1,c;if(l<u){c=u;u=l;l=u}if(u<0)u=0;if(l>f)l=f;return(a?i.range(u,l+1):i.range(l,u-1,-1)).map(function(e){return o[e]})}}}function k(e,t,r){var a=this._def,o=e._prev,u=L.call(this,a.round),l=L.call(this,a.exponent),f=L.call(this,a.clamp),p=L.call(this,a.nice),h,m;h=a.type===c.QUANTILE?w.call(this,d.DOMAIN,a.domain,e,r):N.call(this,e,r);if(h&&!i.equal(o.domain,h)){e.domain(h);o.domain=h;this._updated=true}if(L.call(this,a.range)==="height")t=t.reverse();if(t&&!i.equal(o.range,t)){e[u&&e.rangeRound?"rangeRound":"range"](t);o.range=t;this._updated=true}if(l&&a.type===c.POWER)e.exponent(l);if(f)e.clamp(true);if(p){if(a.type===c.TIME){m=n.time[p];if(!m)s.error("Unrecognized interval: "+m);e.nice(m)}else{e.nice()}}}function S(e){return e.type===c.ORDINAL||e.type===c.QUANTILE}function T(e){return e.fields||i.array(e)}function E(e){return e.some(function(e){if(!e.data)return true;return e.data&&i.array(e.field).some(function(e){return e.parent})})}function A(e,t){return i.array(e.field).map(function(e){return e.parent?i.accessor(e.parent)(t.datum):e})}function O(e,t){var r=T(e);if(r.length==1&&i.array(r[0].field).length==1){return l.TYPES.TUPLE}if(!S(t))return l.TYPES.VALUE;if(!i.isObject(e.sort))return l.TYPES.VALUE;return l.TYPES.MULTI}function M(e,t,r,n){var a=T(t),s=E(a),o=O(t,r),u=S(r),f=t.sort,c="_"+e,p=A(a[0],n);if(r[c]||this[c])return r[c]||this[c];var h=new l(this._graph).type(o),m,g;if(s){r[c]=h}else{this[c]=h}if(u){if(o===l.TYPES.VALUE){m=[{name:d.GROUPBY,get:i.identity}];g={"*":d.COUNT}}else if(o===l.TYPES.TUPLE){m=[{name:d.GROUPBY,get:i.$(p[0])}];g=i.isObject(f)?[{field:d.VALUE,get:i.$(f.field),ops:[f.op]}]:{"*":d.COUNT}}else{m=d.GROUPBY;g=[{field:d.VALUE,ops:[f.op]}]}}else{m=[];g=[{field:d.VALUE,get:o==l.TYPES.TUPLE?i.$(p[0]):i.identity,ops:[d.MIN,d.MAX],as:[d.MIN,d.MAX]}]}h.param("groupby",m).param("summarize",g);return h._lastUpdate=-1,h}function w(e,t,r,n){if(t==null){return[]}if(i.isArray(t))return t.map(L.bind(this));var a=this,s=this._graph,o=T(t),f=E(o),c=O(t,r),p=M.apply(this,arguments),h=t.sort,m=S(r),g,v,y,_,b,x,k,w,N,C;function R(e){a.dependency(u.SIGNALS,e)}if(f||!f&&p._lastUpdate<this._stamp){for(g=0,v=o.length;g<v;++g){b=o[g];N=b.data||n.datum._facetID;w=s.data(N).last();if(w.stamp<=this._stamp)continue;x=A(b,n);for(y=0,_=x.length;y<_;++y){k=x[y];if(c===l.TYPES.VALUE){p.accessors(null,k)}else if(c===l.TYPES.MULTI){p.accessors(k,b.sort||h.field)}p.evaluate(w)}this.dependency(u.DATA,N);p.dependency(u.SIGNALS).forEach(R)}p._lastUpdate=this._stamp;w=p.aggr().result();if(m){if(i.isObject(h)){C=h.op+"_"+d.VALUE;C=i.comparator(C)}else if(h===true){C=i.comparator(d.GROUPBY)}if(C)w=w.sort(C);p._values=w.map(function(e){return e[d.GROUPBY]})}else{w=w[0];p._values=!i.isValid(w)?[]:[w[d.MIN],w[d.MAX]]}}return p._values}function L(e){if(!e||!e.signal)return e;var t=e.signal,r;this.dependency(u.SIGNALS,(r=i.field(t))[0]);return this._graph.signalRef(r)}function N(e,t){var r=this._def,n=[null,null],a,s;if(r.domain!==undefined){n=!i.isObject(r.domain)?n:w.call(this,d.DOMAIN,r.domain,e,t)}s=n.length-1;if(r.domainMin!==undefined){if(i.isObject(r.domainMin)){if(r.domainMin.signal){n[0]=i.isValid(a=L.call(this,r.domainMin))?a:n[0]}else{n[0]=w.call(this,d.DOMAIN+d.MIN,r.domainMin,e,t)[0]}}else{n[0]=r.domainMin}}if(r.domainMax!==undefined){if(i.isObject(r.domainMax)){if(r.domainMax.signal){n[s]=i.isValid(a=L.call(this,r.domainMax))?a:n[s]}else{n[s]=w.call(this,d.DOMAIN+d.MAX,r.domainMax,e,t)[1]}}else{n[s]=r.domainMax}}if(r.type!==c.LOG&&r.type!==c.TIME&&r.type!==c.TIME_UTC&&(r.zero||r.zero===undefined)){n[0]=Math.min(0,n[0]);n[s]=Math.max(0,n[s])}return n}function C(e){var t=this._def,r=this._graph.config(),n=L.call(this,t.range),a=[null,null];if(n!==undefined){if(typeof n==="string"){if(f[n]){a=[0,e[n]]}else if(r.range[n]){a=r.range[n]}else{s.error("Unrecogized range: "+n);return a}}else if(i.isArray(n)){a=i.duplicate(n).map(L.bind(this))}else if(i.isObject(n)){return null}else{a=[0,n]}}if(t.rangeMin!==undefined){a[0]=t.rangeMin.signal?L.call(this,t.rangeMin):t.rangeMin}if(t.rangeMax!==undefined){a[a.length-1]=t.rangeMax.signal?L.call(this,t.rangeMax):t.rangeMax}if(t.reverse!==undefined){var o=L.call(this,t.reverse);if(i.isObject(o)){o=i.accessor(o.field)(e.datum)}if(o)a=a.reverse()}var u=a[0],l=a[a.length-1];if(u===null&&l!==null||u!==null&&l===null){s.error("Range is underspecified. Please ensure either the "+'"range" property or both "rangeMin" and "rangeMax" are specified.')}return a}e.exports=p;var R=[{enum:["width","height","shapes","category10","category20","category20b","category20c"]},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}];p.schema={refs:{data:{type:"object",properties:{data:{oneOf:[{type:"string"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},field:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}},{type:"object",properties:{parent:{type:"string"}},required:["parent"]},{type:"array",items:{type:"object",properties:{parent:{type:"string"}},required:["parent"]}}]},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{field:{type:"string"},op:{enum:r("3Y21").VALID_OPS}}}]}},additionalProperties:false}},defs:{scale:{title:"Scale function",type:"object",allOf:[{properties:{name:{type:"string"},type:{enum:[c.LINEAR,c.ORDINAL,c.TIME,c.TIME_UTC,c.LOG,c.POWER,c.SQRT,c.QUANTILE,c.QUANTIZE,c.THRESHOLD],default:c.LINEAR},domain:{oneOf:[{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/data"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},domainMin:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},domainMax:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},rangeMin:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},rangeMax:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},reverse:{oneOf:[{type:"boolean"},{$ref:"#/refs/data"}]},round:{type:"boolean"}},required:["name"]},{oneOf:[{properties:{type:{enum:[c.ORDINAL]},range:{oneOf:R.concat({$ref:"#/refs/data"})},points:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},padding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},outerPadding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},bandSize:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]},{properties:{type:{enum:[c.TIME,c.TIME_UTC]},range:{oneOf:R},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{enum:["second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]}},required:["type"]},{anyOf:[{properties:{type:{enum:[c.LINEAR,c.LOG,c.POWER,c.SQRT,c.QUANTILE,c.QUANTIZE,c.THRESHOLD],default:c.LINEAR},range:{oneOf:R},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},zero:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}}},{properties:{type:{enum:[c.POWER]},exponent:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]}]}]}]}}}},NQGN:function(e,t,r){var n=r("J731"),i=r("Zrjw"),a=r("dhxB").prototype,s=r("T3kM");function o(e){a.init.call(this,e);this._data=[];this.router(true).collector(true)}var u=o.prototype=Object.create(a);u.constructor=o;u.data=function(){return this._data};u.evaluate=function(e){n.debug(e,["collecting"]);var t=s.create(e);if(e.rem.length){this._data=i.idFilter(this._data,e.rem);t.rem=e.rem.slice(0)}if(e.add.length){this._data=this._data.concat(e.add);t.add=e.add.slice(0)}if(e.mod.length){t.mod=e.mod.slice(0)}if(e.sort){this._data.sort(e.sort)}if(e.reflow){t.mod=t.mod.concat(i.idFilter(this._data,t.add,t.mod,t.rem));t.reflow=false}return t};e.exports=o},NdEd:function(e,t){e.exports={name:"datalib",version:"1.8.0",description:"JavaScript utilites for loading, summarizing and working with data.",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],repository:{type:"git",url:"http://github.com/vega/datalib.git"},author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],license:"BSD-3-Clause",dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",topojson:"^1.6.19",request:"^2.67.0","sync-request":"^2.1.0"},devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},main:"src/index.js",scripts:{deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",build:"browserify src/index.js -d -s dl -o datalib.js",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js"},browser:{buffer:false,fs:false,http:false,request:false,"sync-request":false,url:false}}},NobO:function(e,t,r){var n=r("7rLc").dispatch;var i=Math.PI/180,a=1<<11>>5,s=1<<11;e.exports=function(){var e=[256,256],t=o,r=u,i=f,y=l,S=l,T=c,E=d,A=v,O=[],M=Infinity,w=n("word","end"),L=null,N=Math.random,C={},R=b;C.canvas=function(e){return arguments.length?(R=x(e),C):R};C.start=function(){var n=I(R()),a=_((e[0]>>5)*e[1]),s=null,o=O.length,u=-1,l=[],f=O.map(function(e,n){e.text=t.call(this,e,n);e.font=r.call(this,e,n);e.style=y.call(this,e,n);e.weight=S.call(this,e,n);e.rotate=T.call(this,e,n);e.size=~~i.call(this,e,n);e.padding=E.call(this,e,n);return e}).sort(function(e,t){return t.size-e.size});if(L)clearInterval(L);L=setInterval(c,0);c();return C;function c(){var t=Date.now();while(Date.now()-t<M&&++u<o&&L){var r=f[u];r.x=e[0]*(N()+.5)>>1;r.y=e[1]*(N()+.5)>>1;p(n,r,f,u);if(r.hasText&&D(a,r,s)){l.push(r);w.call("word",C,r);if(s)m(s,r);else s=[{x:r.x+r.x0,y:r.y+r.y0},{x:r.x+r.x1,y:r.y+r.y1}];r.x-=e[0]>>1;r.y-=e[1]>>1}}if(u>=o){C.stop();w.call("end",C,l,s)}}};C.stop=function(){if(L){clearInterval(L);L=null}return C};function I(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(a<<5)/t;e.height=s/t;var r=e.getContext("2d");r.fillStyle=r.strokeStyle="red";r.textAlign="center";return{context:r,ratio:t}}function D(t,r,n){var i=[{x:0,y:0},{x:e[0],y:e[1]}],a=r.x,s=r.y,o=Math.sqrt(e[0]*e[0]+e[1]*e[1]),u=A(e),l=N()<.5?1:-1,f=-l,c,d,p;while(c=u(f+=l)){d=~~c[0];p=~~c[1];if(Math.min(Math.abs(d),Math.abs(p))>=o)break;r.x=a+d;r.y=s+p;if(r.x+r.x0<0||r.y+r.y0<0||r.x+r.x1>e[0]||r.y+r.y1>e[1])continue;if(!n||!h(r,t,e[0])){if(!n||g(r,n)){var m=r.sprite,v=r.width>>5,y=e[0]>>5,_=r.x-(v<<4),b=_&127,x=32-b,k=r.y1-r.y0,S=(r.y+r.y0)*y+(_>>5),T;for(var E=0;E<k;E++){T=0;for(var O=0;O<=v;O++){t[S+O]|=T<<x|(O<v?(T=m[E*v+O])>>>b:0)}S+=y}delete r.sprite;return true}}}return false}C.timeInterval=function(e){return arguments.length?(M=e==null?Infinity:e,C):M};C.words=function(e){return arguments.length?(O=e,C):O};C.size=function(t){return arguments.length?(e=[+t[0],+t[1]],C):e};C.font=function(e){return arguments.length?(r=x(e),C):r};C.fontStyle=function(e){return arguments.length?(y=x(e),C):y};C.fontWeight=function(e){return arguments.length?(S=x(e),C):S};C.rotate=function(e){return arguments.length?(T=x(e),C):T};C.text=function(e){return arguments.length?(t=x(e),C):t};C.spiral=function(e){return arguments.length?(A=k[e]||e,C):A};C.fontSize=function(e){return arguments.length?(i=x(e),C):i};C.padding=function(e){return arguments.length?(E=x(e),C):E};C.random=function(e){return arguments.length?(N=e,C):N};C.on=function(){var e=w.on.apply(w,arguments);return e===w?C:e};return C};function o(e){return e.text}function u(){return"serif"}function l(){return"normal"}function f(e){return Math.sqrt(e.value)}function c(){return(~~(Math.random()*6)-3)*30}function d(){return 1}function p(e,t,r,n){if(t.sprite)return;var o=e.context,u=e.ratio;o.clearRect(0,0,(a<<5)/u,s/u);var l=0,f=0,c=0,d=r.length;--n;while(++n<d){t=r[n];o.save();o.font=t.style+" "+t.weight+" "+~~((t.size+1)/u)+"px "+t.font;var p=o.measureText(t.text+"m").width*u,h=t.size<<1;if(t.rotate){var m=Math.sin(t.rotate*i),g=Math.cos(t.rotate*i),v=p*g,y=p*m,_=h*g,b=h*m;p=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5;h=~~Math.max(Math.abs(y+_),Math.abs(y-_))}else{p=p+31>>5<<5}if(h>c)c=h;if(l+p>=a<<5){l=0;f+=c;c=0}if(f+h>=s)break;o.translate((l+(p>>1))/u,(f+(h>>1))/u);if(t.rotate)o.rotate(t.rotate*i);o.fillText(t.text,0,0);if(t.padding)o.lineWidth=2*t.padding,o.strokeText(t.text,0,0);o.restore();t.width=p;t.height=h;t.xoff=l;t.yoff=f;t.x1=p>>1;t.y1=h>>1;t.x0=-t.x1;t.y0=-t.y1;t.hasText=true;l+=p}var x=o.getImageData(0,0,(a<<5)/u,s/u).data,k=[];while(--n>=0){t=r[n];if(!t.hasText)continue;var p=t.width,S=p>>5,h=t.y1-t.y0;for(var T=0;T<h*S;T++)k[T]=0;l=t.xoff;if(l==null)return;f=t.yoff;var E=0,A=-1;for(var O=0;O<h;O++){for(var T=0;T<p;T++){var M=S*O+(T>>5),w=x[(f+O)*(a<<5)+(l+T)<<2]?1<<31-T%32:0;k[M]|=w;E|=w}if(E)A=O;else{t.y0++;h--;O--;f++}}t.y1=t.y0+A;t.sprite=k.slice(0,(t.y1-t.y0)*S)}}function h(e,t,r){r>>=5;var n=e.sprite,i=e.width>>5,a=e.x-(i<<4),s=a&127,o=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*r+(a>>5),f;for(var c=0;c<u;c++){f=0;for(var d=0;d<=i;d++){if((f<<o|(d<i?(f=n[c*i+d])>>>s:0))&t[l+d])return true}l+=r}return false}function m(e,t){var r=e[0],n=e[1];if(t.x+t.x0<r.x)r.x=t.x+t.x0;if(t.y+t.y0<r.y)r.y=t.y+t.y0;if(t.x+t.x1>n.x)n.x=t.x+t.x1;if(t.y+t.y1>n.y)n.y=t.y+t.y1}function g(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function v(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function y(e){var t=4,r=t*e[0]/e[1],n=0,i=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:n+=r;break;case 1:i+=t;break;case 2:n-=r;break;default:i-=t;break}return[n,i]}}function _(e){var t=[],r=-1;while(++r<e)t[r]=0;return t}function b(){return document.createElement("canvas")}function x(e){return typeof e==="function"?e:function(){return e}}var k={archimedean:v,rectangular:y}},O3lN:function(e,t,r){var n=r("zicW");function i(e){return e==null?"auto":n.isObject(e)?e:n.isNumber(e)?{top:e,left:e,right:e,bottom:e}:e==="strict"?e:"auto"}e.exports=i;i.schema={defs:{padding:{oneOf:[{enum:["strict","auto"]},{type:"number"},{type:"object",properties:{top:{type:"number"},bottom:{type:"number"},left:{type:"number"},right:{type:"number"}},additionalProperties:false}]}}}},OTIj:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("DUWk"),s=r("r7he");function o(e,t,r){var a=e.config(),s=0;function u(e,t){i.error("PARSE DATA FAILED: "+t.name+" "+e);s=-1;r(e)}function l(t){return function(i,a){if(i){u(i,t)}else if(s>0){try{e.data(t.name).values(n.read(a,t.format));if(--s===0)r()}catch(e){u(e,t)}}}}(t||[]).forEach(function(t){if(t.url){s+=1;n.load(n.extend({url:t.url},a.load),l(t))}try{o.datasource(e,t)}catch(e){u(e,t)}});if(s===0)setTimeout(r,1);return t}o.datasource=function(e,t){var r=(t.transform||[]).map(function(t){return a(e,t)}),i=(t.modify||[]).map(function(r){return s(e,r,t)}),o=e.data(t.name,i.concat(r));if(t.values){o.values(n.read(t.values,t.format))}else if(t.source){o.source(t.source).addListener(o);e.removeListener(o.pipeline()[0])}return o};e.exports=o;var u={oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{enum:["number","boolean","date","string"]}}]};o.schema={defs:{data:{title:"Input data set definition",type:"object",allOf:[{properties:{name:{type:"string"},transform:{$ref:"#/defs/transform"},modify:{$ref:"#/defs/modify"},format:{type:"object",oneOf:[{properties:{type:{enum:["json"]},parse:u,property:{type:"string"}},additionalProperties:false},{properties:{type:{enum:["csv","tsv"]},parse:u},additionalProperties:false},{oneOf:[{properties:{type:{enum:["topojson"]},feature:{type:"string"}},additionalProperties:false},{properties:{type:{enum:["topojson"]},mesh:{type:"string"}},additionalProperties:false}]},{properties:{type:{enum:["treejson"]},children:{type:"string"},parse:u},additionalProperties:false}]}},required:["name"]},{anyOf:[{required:["name","modify"]},{oneOf:[{properties:{source:{type:"string"}},required:["source"]},{properties:{values:{type:"array"}},required:["values"]},{properties:{url:{type:"string"}},required:["url"]}]}]}]}}}},OgTP:function(e,t,r){var n=r("FF9f"),i=[];function a(e,t,r){if(!t.items||!t.items.length)return;var a=t.items,s=this,o,u,l,f,c,d,p,h,m,g,v,y,_;for(g=0,v=a.length;g<v;++g){o=a[g];l=o.axisItems||i;u=o.items||i;f=o.legendItems||i;c=o.x||0;d=o.y||0;p=o.width||0;h=o.height||0;if(o.stroke||o.fill){m=o.opacity==null?1:o.opacity;if(m>0){if(o.fill&&n.fill(e,o,m)){e.fillRect(c,d,p,h)}if(o.stroke&&n.stroke(e,o,m)){e.strokeRect(c,d,p,h)}}}e.save();e.translate(c,d);if(o.clip){e.beginPath();e.rect(0,0,p,h);e.clip()}if(r)r.translate(-c,-d);for(y=0,_=l.length;y<_;++y){if(l[y].layer==="back"){s.draw(e,l[y],r)}}for(y=0,_=u.length;y<_;++y){s.draw(e,u[y],r)}for(y=0,_=l.length;y<_;++y){if(l[y].layer!=="back"){s.draw(e,l[y],r)}}for(y=0,_=f.length;y<_;++y){s.draw(e,f[y],r)}if(r)r.translate(c,d);e.restore()}}function s(e,t,r,n,a,s){if(t.bounds&&!t.bounds.contains(a,s)){return null}var o=t.items||i,u,l,f,c,d,p,h,m,g,v,y;for(g=o.length;--g>=0;){l=o[g];y=l.bounds;if(y&&!y.contains(a,s))continue;f=l.axisItems||i;c=l.items||i;d=l.legendItems||i;h=l.x||0;m=l.y||0;e.save();e.translate(h,m);h=a-h;m=s-m;for(v=d.length;--v>=0;){u=d[v];if(u.interactive!==false){p=this.pick(u,r,n,h,m);if(p){e.restore();return p}}}for(v=f.length;--v>=0;){u=f[v];if(u.interactive!==false&&u.layer!=="back"){p=this.pick(u,r,n,h,m);if(p){e.restore();return p}}}for(v=c.length;--v>=0;){u=c[v];if(u.interactive!==false){p=this.pick(u,r,n,h,m);if(p){e.restore();return p}}}for(v=f.length;--v>=0;){u=f[v];if(u.interative!==false&&u.layer==="back"){p=this.pick(u,r,n,h,m);if(p){e.restore();return p}}}e.restore();if(t.interactive!==false&&(l.fill||l.stroke)&&h>=0&&h<=l.width&&m>=0&&m<=l.height){return l}}return null}e.exports={draw:a,pick:s}},"P/aK":function(e,t,r){"use strict";var n=r("ZAUf");(function(e){e[e["X"]="x"]="X";e[e["Y"]="y"]="Y";e[e["X2"]="x2"]="X2";e[e["Y2"]="y2"]="Y2";e[e["ROW"]="row"]="ROW";e[e["COLUMN"]="column"]="COLUMN";e[e["SHAPE"]="shape"]="SHAPE";e[e["SIZE"]="size"]="SIZE";e[e["COLOR"]="color"]="COLOR";e[e["TEXT"]="text"]="TEXT";e[e["DETAIL"]="detail"]="DETAIL";e[e["LABEL"]="label"]="LABEL";e[e["PATH"]="path"]="PATH";e[e["ORDER"]="order"]="ORDER";e[e["OPACITY"]="opacity"]="OPACITY"})(t.Channel||(t.Channel={}));var i=t.Channel;t.X=i.X;t.Y=i.Y;t.X2=i.X2;t.Y2=i.Y2;t.ROW=i.ROW;t.COLUMN=i.COLUMN;t.SHAPE=i.SHAPE;t.SIZE=i.SIZE;t.COLOR=i.COLOR;t.TEXT=i.TEXT;t.DETAIL=i.DETAIL;t.LABEL=i.LABEL;t.PATH=i.PATH;t.ORDER=i.ORDER;t.OPACITY=i.OPACITY;t.CHANNELS=[t.X,t.Y,t.X2,t.Y2,t.ROW,t.COLUMN,t.SIZE,t.SHAPE,t.COLOR,t.PATH,t.ORDER,t.OPACITY,t.TEXT,t.DETAIL,t.LABEL];t.UNIT_CHANNELS=n.without(t.CHANNELS,[t.ROW,t.COLUMN]);t.UNIT_SCALE_CHANNELS=n.without(t.UNIT_CHANNELS,[t.PATH,t.ORDER,t.DETAIL,t.TEXT,t.LABEL,t.X2,t.Y2]);t.NONSPATIAL_CHANNELS=n.without(t.UNIT_CHANNELS,[t.X,t.Y,t.X2,t.Y2]);t.NONSPATIAL_SCALE_CHANNELS=n.without(t.UNIT_SCALE_CHANNELS,[t.X,t.Y,t.X2,t.Y2]);t.STACK_GROUP_CHANNELS=[t.COLOR,t.DETAIL,t.ORDER,t.OPACITY,t.SIZE];function a(e,t){return!!s(e)[t]}t.supportMark=a;function s(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.DETAIL:case t.ORDER:case t.OPACITY:case t.ROW:case t.COLUMN:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,line:true,area:true,text:true};case t.X2:case t.Y2:return{rule:true,bar:true,area:true};case t.SIZE:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,text:true};case t.SHAPE:return{point:true};case t.TEXT:return{text:true};case t.PATH:return{line:true}}return{}}t.getSupportedMark=s;function o(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.OPACITY:case t.LABEL:case t.DETAIL:return{measure:true,dimension:true};case t.ROW:case t.COLUMN:case t.SHAPE:return{measure:false,dimension:true};case t.X2:case t.Y2:case t.SIZE:case t.TEXT:return{measure:true,dimension:false};case t.PATH:return{measure:false,dimension:true}}throw new Error("Invalid encoding channel"+e)}t.getSupportedRole=o;function u(e){return!n.contains([t.DETAIL,t.PATH,t.TEXT,t.LABEL,t.ORDER],e)}t.hasScale=u},P7vC:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("zsFm").Tuple,s=r("4JPs"),o=r("acp7");function u(e){o.prototype.init.call(this,e);s.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value",default:"value"},value:{type:"value",default:0}});return this.router(true).produces(true)}var l=u.prototype=Object.create(o.prototype);l.constructor=u;l.batchTransform=function(e,t){i.debug(e,["imputing"]);var r=this.param("groupby"),a=this.param("orderby"),s=this.param("method"),o=this.param("value"),u=this.param("field"),l=u.accessor,d=u.field,p=this._imputed||[],h=[],m=c(t,r.accessor,a.accessor),g=m.domain,v,y,_,b,x,k;function S(e){return e==null?null:l(e)}for(_=0,x=m.length;_<x;++_){v=m[_];if(s!=="value"){o=n[s](v,S)}for(y=0,b=v.length;y<b;++y){if(v[y]==null){k=f(r.field,v.values,a.field,g[y]);k[d]=o;h.push(k)}}}for(y=0,b=h.length;y<b;++y){e.add.push(h[y])}for(y=0,b=p.length;y<b;++y){e.rem.push(p[y])}this._imputed=h;return e};function f(e,t,r,n){var i={_imputed:true},s;for(s=0;s<t.length;++s)i[e[s]]=t[s];for(s=0;s<n.length;++s)i[r[s]]=n[s];return a.ingest(i)}function c(e,t,r){var i=[],a=function(e){return e(l)},s=function(e){return l=e,r.map(a)},o,u,l,f,c,d,p,h;d=i.domain=n.unique(e,s);h=d.length;p=d.reduce(function(e,t,r){return e[t]={value:t,index:r},e},{});for(o={},u=0;u<e.length;++u){l=e[u];f=t==null?[]:t.map(a);c=o[f]||(i.push(o[f]=Array(h)),o[f].values=f,o[f]);c[p[s(l)].index]=l}return i}e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Impute transform",description:"Performs imputation of missing values.",type:"object",properties:{type:{enum:["impute"]},method:{description:"The imputation method to use.",oneOf:[{enum:["value","mean","median","min","max"]},{$ref:"#/refs/signal"}],default:"value"},value:{description:"The value to use for missing data if the method is 'value'.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"},{type:"null"},{$ref:"#/refs/signal"}],default:0},field:{description:"The data field to impute.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},groupby:{description:"A list of fields to group the data into series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},orderby:{description:"A list of fields to determine ordering within series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:false,required:["type","groupby","orderby","field"]}},PwiD:function(e,t,r){var n=r("zicW"),i=r("zsFm"),a=i.ChangeSet,s=i.Graph.prototype,o=i.Node,u=r("BB2X"),l=r("Qpkz"),f=r("TrdW"),c=r("8NMF");function d(e){this._defs={};this._predicates={};this._scene=null;this._groups=null;this._node=null;this._builder=null;this._reset={axes:false,legends:false};this.config(e);this.expr=f(this);s.init.call(this)}var p=d.prototype=Object.create(s);p.constructor=d;p.defs=function(e){if(!arguments.length)return this._defs;this._defs=e;return this};p.config=function(e){if(!arguments.length)return this._config;this._config=Object.create(c);for(var t in e){var r=e[t],i=this._config[t];if(n.isObject(r)&&n.isObject(i)){this._config[t]=n.extend({},i,r)}else{this._config[t]=r}}return this};p.width=function(e){if(this._defs)this._defs.width=e;if(this._defs&&this._defs.marks)this._defs.marks.width=e;if(this._scene){this._scene.items[0].width=e;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};p.height=function(e){if(this._defs)this._defs.height=e;if(this._defs&&this._defs.marks)this._defs.marks.height=e;if(this._scene){this._scene.items[0].height=e;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};p.node=function(){return this._node||(this._node=new o(this))};p.data=function(){var e=s.data.apply(this,arguments);if(arguments.length>1){this.node().addListener(e.pipeline()[0])}return e};function h(e){var t=this,r={};if(!n.isArray(e))return this._predicates[e];e.forEach(function(e){r[e]=t._predicates[e]});return r}p.predicate=function(e,t){if(arguments.length===1)return h.call(this,e);return this._predicates[e]=t};p.predicates=function(){return this._predicates};p.scene=function(e){if(!arguments.length)return this._scene;if(this._builder){this.node().removeListener(this._builder);this._builder._groupBuilder.disconnect()}var t=this,r=this._builder=new o(this);r.evaluate=function(n){if(r._groupBuilder)return n;var i=r._groupBuilder=new u(t,t._defs.marks,t._scene={}),a=i.pipeline();t._groups={};this.addListener(i.connect());a[a.length-1].addListener(e);return n};this.addListener(r);return this};p.group=function(e,t){var r=this._groups;if(arguments.length===1)return r[e];return r[e]=t,this};p.reset=function(){if(this._scene&&this._reset.axes){l(this._scene,function(e){if(e.axes)e.axes.forEach(function(e){e.reset()})});this._reset.axes=false}if(this._scene&&this._reset.legends){l(this._scene,function(e){if(e.legends)e.legends.forEach(function(e){e.reset()})});this._reset.legends=false}return this};p.addListener=function(e){this.node().addListener(e)};p.removeListener=function(e){this.node().removeListener(e)};p.fire=function(e){if(!e)e=a.create();this.propagate(e,this.node())};e.exports=d},Py5Z:function(e,t,r){"use strict";var n=r("Fw/k");var i=r("cihr");var a=r("ZE31");t.defaultCellConfig={width:200,height:200};t.defaultFacetCellConfig={stroke:"#ccc",strokeWidth:1};var s={color:"#000000",opacity:.4,offset:0};t.defaultFacetConfig={scale:n.defaultFacetScaleConfig,axis:i.defaultFacetAxisConfig,grid:s,cell:t.defaultFacetCellConfig};(function(e){e[e["NORMAL"]="normal"]="NORMAL";e[e["BOLD"]="bold"]="BOLD"})(t.FontWeight||(t.FontWeight={}));var o=t.FontWeight;(function(e){e[e["CIRCLE"]="circle"]="CIRCLE";e[e["SQUARE"]="square"]="SQUARE";e[e["CROSS"]="cross"]="CROSS";e[e["DIAMOND"]="diamond"]="DIAMOND";e[e["TRIANGLEUP"]="triangle-up"]="TRIANGLEUP";e[e["TRIANGLEDOWN"]="triangle-down"]="TRIANGLEDOWN"})(t.Shape||(t.Shape={}));var u=t.Shape;(function(e){e[e["LEFT"]="left"]="LEFT";e[e["RIGHT"]="right"]="RIGHT";e[e["CENTER"]="center"]="CENTER"})(t.HorizontalAlign||(t.HorizontalAlign={}));var l=t.HorizontalAlign;(function(e){e[e["TOP"]="top"]="TOP";e[e["MIDDLE"]="middle"]="MIDDLE";e[e["BOTTOM"]="bottom"]="BOTTOM"})(t.VerticalAlign||(t.VerticalAlign={}));var f=t.VerticalAlign;(function(e){e[e["NORMAL"]="normal"]="NORMAL";e[e["ITALIC"]="italic"]="ITALIC"})(t.FontStyle||(t.FontStyle={}));var c=t.FontStyle;(function(e){e[e["LINEAR"]="linear"]="LINEAR";e[e["LINEAR_CLOSED"]="linear-closed"]="LINEAR_CLOSED";e[e["STEP"]="step"]="STEP";e[e["STEP_BEFORE"]="step-before"]="STEP_BEFORE";e[e["STEP_AFTER"]="step-after"]="STEP_AFTER";e[e["BASIS"]="basis"]="BASIS";e[e["BASIS_OPEN"]="basis-open"]="BASIS_OPEN";e[e["BASIS_CLOSED"]="basis-closed"]="BASIS_CLOSED";e[e["CARDINAL"]="cardinal"]="CARDINAL";e[e["CARDINAL_OPEN"]="cardinal-open"]="CARDINAL_OPEN";e[e["CARDINAL_CLOSED"]="cardinal-closed"]="CARDINAL_CLOSED";e[e["BUNDLE"]="bundle"]="BUNDLE";e[e["MONOTONE"]="monotone"]="MONOTONE"})(t.Interpolate||(t.Interpolate={}));var d=t.Interpolate;(function(e){e[e["LINE"]="line"]="LINE";e[e["LINEPOINT"]="linepoint"]="LINEPOINT";e[e["NONE"]="none"]="NONE"})(t.AreaOverlay||(t.AreaOverlay={}));var p=t.AreaOverlay;t.defaultOverlayConfig={line:false,pointStyle:{filled:true},lineStyle:{}};t.defaultMarkConfig={color:"#4682b4",shape:u.CIRCLE,strokeWidth:2,size:30,barThinSize:2,ruleSize:1,tickThickness:1,fontSize:10,baseline:f.MIDDLE,text:"Abc",shortTimeLabels:false,applyColorToBackground:false};t.defaultConfig={numberFormat:"s",timeFormat:"%Y-%m-%d",countTitle:"Number of Records",cell:t.defaultCellConfig,mark:t.defaultMarkConfig,overlay:t.defaultOverlayConfig,scale:n.defaultScaleConfig,axis:i.defaultAxisConfig,legend:a.defaultLegendConfig,facet:t.defaultFacetConfig}},QNWf:function(e,t,r){"use strict";var n=r("h/tW");var i=r("x6Fv");var a=r("o+e1");var s=r("ZAUf");var o;(function(e){function t(e,t){if(t.bin){e[a.field(t,{binSuffix:"_start"})]=true;e[a.field(t,{binSuffix:"_mid"})]=true;e[a.field(t,{binSuffix:"_end"})]=true;e[a.field(t,{binSuffix:"_range"})]=true}else{e[a.field(t)]=true}return e}function r(e){var r={};var a={};e.forEach(function(e,i){if(e.aggregate){if(e.aggregate===n.AggregateOp.COUNT){a["*"]=a["*"]||{};a["*"]["count"]=true}else{a[e.field]=a[e.field]||{};a[e.field][e.aggregate]=true}}else{t(r,e)}});return[{name:e.dataName(i.SUMMARY),dimensions:r,measures:a}]}e.parseUnit=r;function o(e){var r=e.child().component.data;if(!r.source&&r.summary){var n=r.summary.map(function(r){r.dimensions=e.reduce(t,r.dimensions);var n=r.name.substr(e.child().name("").length);e.child().renameData(r.name,n);r.name=n;return r});delete r.summary;return n}return[]}e.parseFacet=o;function u(e,t){for(var r in t){if(t.hasOwnProperty(r)){var n=t[r];for(var i in n){if(n.hasOwnProperty(i)){if(r in e){e[r][i]=true}else{e[r]={op:true}}}}}}}function l(e){var t={};e.children().forEach(function(r){var n=r.component.data;if(!n.source&&n.summary){n.summary.forEach(function(a){var o=s.hash(a.dimensions);if(o in t){u(t[o].measures,a.measures)}else{a.name=e.dataName(i.SUMMARY)+"_"+s.keys(t).length;t[o]=a}r.renameData(r.dataName(i.SUMMARY),t[o].name);delete n.summary})}});return s.vals(t)}e.parseLayer=l;function f(e,t){if(!e.summary){return[]}return e.summary.reduce(function(e,r){var n=r.dimensions;var a=r.measures;var o=s.keys(n);var u=s.reduce(a,function(e,t,r){e[r]=s.keys(t);return e},{});if(s.keys(a).length>0){e.push({name:r.name,source:t.dataName(i.SOURCE),transform:[{type:"aggregate",groupby:o,summarize:u}]})}return e},[])}e.assemble=f})(o=t.summary||(t.summary={}))},QSMf:function(e,t,r){"use strict";var n=r("P/aK");var i=r("ZAUf");function a(e){var t=0;if(e.color){t++}if(e.opacity){t++}if(e.size){t++}if(e.shape){t++}return t}t.countRetinal=a;function s(e){return n.CHANNELS.filter(function(t){return o(e,t)})}t.channels=s;function o(e,t){var r=e&&e[t];return r&&(r.field!==undefined||i.isArray(r)&&r.length>0)}t.has=o;function u(e){return i.some(n.CHANNELS,function(t){if(o(e,t)&&e[t].aggregate){return true}return false})}t.isAggregate=u;function l(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}t.isRanged=l;function f(e){var t=[];n.CHANNELS.forEach(function(r){if(o(e,r)){if(i.isArray(e[r])){e[r].forEach(function(e){t.push(e)})}else{t.push(e[r])}}});return t}t.fieldDefs=f;function c(e,t,r){d(n.CHANNELS,e,t,r)}t.forEach=c;function d(e,t,r,n){var a=0;e.forEach(function(e){if(o(t,e)){if(i.isArray(t[e])){t[e].forEach(function(t){r.call(n,t,e,a++)})}else{r.call(n,t[e],e,a++)}}})}t.channelMappingForEach=d;function p(e,t,r){return h(n.CHANNELS,e,t,r)}t.map=p;function h(e,t,r,n){var a=[];e.forEach(function(e){if(o(t,e)){if(i.isArray(t[e])){t[e].forEach(function(t){a.push(r.call(n,t,e))})}else{a.push(r.call(n,t[e],e))}}});return a}t.channelMappingMap=h;function m(e,t,r,i){return g(n.CHANNELS,e,t,r,i)}t.reduce=m;function g(e,t,r,a,s){var u=a;n.CHANNELS.forEach(function(e){if(o(t,e)){if(i.isArray(t[e])){t[e].forEach(function(t){u=r.call(s,u,t,e)})}else{u=r.call(s,u,t[e],e)}}});return u}t.channelMappingReduce=g},Qpkz:function(e,t){e.exports=function e(t,r){var n,i,a,s,o;if(r(t))return true;var u=["items","axisItems","legendItems"];for(a=0,s=u.length;a<s;++a){if(o=t[u[a]]){for(n=0,i=o.length;n<i;++n){if(e(o[n],r))return true}}}}},QvNu:function(e,t,r){var n=r("zicW"),i=n.Aggregator,a=i.prototype,s=r("zsFm"),o=s.Tuple,u=r("J731"),l=0;function f(){i.call(this);this._facet=null;this._facetID=++l}var c=f.prototype=Object.create(a);c.constructor=f;c.facet=function(e){return arguments.length?(this._facet=e,this):this._facet};c._ingest=function(e){return o.ingest(e,null)};c._assign=o.set;function d(e){u.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]);e._graph.removeListener(t[0]);e._graph.disconnect(t)}c._newcell=function(e,t){var r=a._newcell.call(this,e,t),n=this._facet;if(n){var i=n._graph,s=r.tuple,o=n.param("transform");r.ds=i.data(s._facetID,o,s);r.disconnect=d;n.addListener(o[0])}return r};c._newtuple=function(e,t){var r=a._newtuple.call(this,e);if(this._facet){o.set(r,"key",t);o.set(r,"_facetID",this._facetID+"_"+t)}return r};c.clear=function(){if(this._facet){for(var e in this._cells){this._cells[e].disconnect(this._facet)}}return a.clear.call(this)};c._on_add=function(e,t){if(this._facet)t.ds._input.add.push(e)};c._on_rem=function(e,t){if(this._facet)t.ds._input.rem.push(e)};c._on_mod=function(e,t,r,n){if(this._facet){if(r===n){r.ds._input.mod.push(e)}else{r.ds._input.rem.push(e);n.ds._input.add.push(e)}}};c._on_drop=function(e){if(this._facet)e.disconnect(this._facet)};c._on_keep=function(e){if(this._facet)s.ChangeSet.copy(this._input,e.ds._input)};e.exports=f},RXBq:function(e,t){var r=e.exports={ALL:["data","fields","scales","signals"]};r.ALL.forEach(function(e){r[e.toUpperCase()]=e})},RdYp:function(e,t,r){var n=r("zicW"),i=r("zsFm").Tuple,a=r("J731"),s=r("4JPs"),o=r("acp7");function u(e){o.prototype.init.call(this,e);s.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value",default:10},maxbins:{type:"value",default:20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>",default:[5,2]}});this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"};return this.mutates(true)}var l=u.prototype=Object.create(o.prototype);l.constructor=u;l.extent=function(e){var t=[this.param("min"),this.param("max")],r;if(t[0]==null||t[1]==null){r=n.extent(e,this.param("field").accessor);if(t[0]==null)t[0]=r[0];if(t[1]==null)t[1]=r[1]}return t};l.batchTransform=function(e,t){a.debug(e,["binning"]);var r=this.extent(t),s=this._output,o=this.param("step"),u=this.param("steps"),l=this.param("minstep"),f=this.param("field").accessor,c={min:r[0],max:r[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};if(o)c.step=o;if(u)c.steps=u;if(l)c.minstep=l;var d=n.bins(c),p=d.step;function h(e){var t=f(e);t=t==null?null:d.start+p*~~((t-d.start)/p);i.set(e,s.start,t);i.set(e,s.end,t+p);i.set(e,s.mid,t+p/2)}e.add.forEach(h);e.mod.forEach(h);e.rem.forEach(h);e.fields[s.start]=1;e.fields[s.end]=1;e.fields[s.mid]=1;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Bin transform",description:"Bins values into quantitative bins (e.g., for a histogram).",type:"object",properties:{type:{enum:["bin"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The name of the field to bin values from."},min:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The minimum bin value to consider."},max:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum bin value to consider."},base:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The number base to use for automatic bin determination.",default:10},maxbins:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum number of allowable bins.",default:20},step:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"An exact step size to use between bins. If provided, options such as maxbins will be ignored."},steps:{description:"An array of allowable step sizes to choose from.",oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},minstep:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"A minimum allowable step size (particularly useful for integer values)."},div:{description:"An array of scale factors indicating allowable subdivisions.",oneOf:[{type:"array",items:{type:"number"},default:[5,2]},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"bin_start"},end:{type:"string",default:"bin_end"},mid:{type:"string",default:"bin_mid"}},additionalProperties:false}},additionalProperties:false,required:["type","field"]}},"S/OH":function(e,t,r){var n=r("zicW"),i=r("TrdW"),a=r("zsFm").Dependencies.SIGNALS;var s=["datum","event","signals","width","height","padding"].concat(n.keys(i.codegen.functions));function o(e,t){(t||[]).forEach(function(t){if(s.indexOf(t.name)!==-1){throw Error('Signal name "'+t.name+'" is a '+"reserved keyword ("+s.join(", ")+").")}var r=e.signal(t.name,t.init).verbose(t.verbose);if(t.init&&t.init.expr){t.init.expr=e.expr(t.init.expr);r.value(u(e,t.init))}if(t.expr){t.expr=e.expr(t.expr);r.evaluate=function(n){var i=u(e,t),a=n.signals;if(i!==r.value()||r.verbose()){r.value(i);a[t.name]=1}return a[t.name]?n:e.doNotPropagate};r.dependency(a,t.expr.globals);t.expr.globals.forEach(function(t){e.signal(t).addListener(r)})}});return t}function u(e,t){var r=t.expr,n=r.fn();return t.scale?o.scale(e,t,n):n}o.scale=function e(t,r,a,s,o){var u=r.scale,l=u.name||u.signal||u,f=u.scope,c;if(f){if(f.signal){f=t.signalRef(f.signal)}else if(n.isString(f)){c=u._expr=u._expr||t.expr(f);f=c.fn(s,o)}}return i.scale(t,u.invert,l,a,f)};e.exports=o;o.schema={refs:{signal:{title:"SignalRef",type:"object",properties:{signal:{type:"string"}},required:["signal"]},scopedScale:{oneOf:[{type:"string"},{type:"object",properties:{name:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},scope:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},invert:{type:"boolean",default:false}},additionalProperties:false,required:["name"]}]}},defs:{signal:{type:"object",properties:{name:{type:"string",not:{enum:s}},init:{},verbose:{type:"boolean",default:false},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"},streams:{$ref:"#/defs/streams"}},additionalProperties:false,required:["name"]}}}},SAbC:function(e,t,r){(function(e,r){true?r(t):typeof define==="function"&&define.amd?define(["exports"],r):r(e.d3_dsv={})})(this,function(e){"use strict";function t(e){return new a(e)}function r(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function n(e,t){var n=r(e);return function(r,i){return t(n(r),i,e)}}function i(e){var t=Object.create(null),r=[];e.forEach(function(e){for(var n in e){if(!(n in t)){r.push(t[n]=n)}}});return r}function a(e){var t=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);this.parse=function(e,t){var i,a,s=this.parseRows(e,function(e,s){if(i)return i(e,s-1);a=e,i=t?n(e,t):r(e)});s.columns=a;return s};this.parseRows=function(e,t){var r={},n={},i=[],s=e.length,o=0,u=0,l,f;function c(){if(o>=s)return n;if(f)return f=false,r;var t=o,i;if(e.charCodeAt(t)===34){var u=t;while(u++<s){if(e.charCodeAt(u)===34){if(e.charCodeAt(u+1)!==34)break;++u}}o=u+2;i=e.charCodeAt(u+1);if(i===13){f=true;if(e.charCodeAt(u+2)===10)++o}else if(i===10){f=true}return e.slice(t+1,u).replace(/""/g,'"')}while(o<s){var l=1;i=e.charCodeAt(o++);if(i===10)f=true;else if(i===13){f=true;if(e.charCodeAt(o)===10)++o,++l}else if(i!==a)continue;return e.slice(t,o-l)}return e.slice(t)}while((l=c())!==n){var d=[];while(l!==r&&l!==n){d.push(l);l=c()}if(t&&(d=t(d,u++))==null)continue;i.push(d)}return i};this.format=function(t,r){if(r==null)r=i(t);return[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")};this.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(o).join(e)}function o(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}}t.prototype=a.prototype;var s=t(",");var o=t("\t");var u="0.1.14";e.version=u;e.dsv=t;e.csv=s;e.tsv=o})},SIx5:function(e,t,r){"use strict";var n=r("P/aK");var i=r("o+e1");var a=r("MtYt");var s;(function(e){function t(){return"rect"}e.markType=t;function r(e){var t={};var r=e.config().mark.orient;var o=e.stack();var u=e.encoding().x;var l=e.encoding().x2;var f=i.isMeasure(u)||i.isMeasure(l);if(o&&n.X===o.fieldChannel){t.x={scale:e.scaleName(n.X),field:e.field(n.X,{suffix:"_start"})};t.x2={scale:e.scaleName(n.X),field:e.field(n.X,{suffix:"_end"})}}else if(f){if(r==="horizontal"){if(e.has(n.X)){t.x={scale:e.scaleName(n.X),field:e.field(n.X)}}else{t.x={scale:e.scaleName(n.X),value:0}}if(e.has(n.X2)){t.x2={scale:e.scaleName(n.X),field:e.field(n.X2)}}else{t.x2={scale:e.scaleName(n.X),value:0}}}else{t.xc={scale:e.scaleName(n.X),field:e.field(n.X)};t.width={value:s(e,n.X)}}}else if(e.fieldDef(n.X).bin){if(e.has(n.SIZE)&&r!=="horizontal"){t.xc={scale:e.scaleName(n.X),field:e.field(n.X,{binSuffix:"_mid"})};t.width={scale:e.scaleName(n.SIZE),field:e.field(n.SIZE)}}else{t.x={scale:e.scaleName(n.X),field:e.field(n.X,{binSuffix:"_start"}),offset:1};t.x2={scale:e.scaleName(n.X),field:e.field(n.X,{binSuffix:"_end"})}}}else{if(e.has(n.X)){t.xc={scale:e.scaleName(n.X),field:e.field(n.X)}}else{t.x={value:0,offset:2}}t.width=e.has(n.SIZE)&&r!=="horizontal"?{scale:e.scaleName(n.SIZE),field:e.field(n.SIZE)}:{value:s(e,n.X)}}var c=e.encoding().y;var d=e.encoding().y2;var p=i.isMeasure(c)||i.isMeasure(d);if(o&&n.Y===o.fieldChannel){t.y={scale:e.scaleName(n.Y),field:e.field(n.Y,{suffix:"_start"})};t.y2={scale:e.scaleName(n.Y),field:e.field(n.Y,{suffix:"_end"})}}else if(p){if(r!=="horizontal"){if(e.has(n.Y)){t.y={scale:e.scaleName(n.Y),field:e.field(n.Y)}}else{t.y={scale:e.scaleName(n.Y),value:0}}if(e.has(n.Y2)){t.y2={scale:e.scaleName(n.Y),field:e.field(n.Y2)}}else{t.y2={scale:e.scaleName(n.Y),value:0}}}else{t.yc={scale:e.scaleName(n.Y),field:e.field(n.Y)};t.height={value:s(e,n.Y)}}}else if(e.fieldDef(n.Y).bin){if(e.has(n.SIZE)&&r==="horizontal"){t.yc={scale:e.scaleName(n.Y),field:e.field(n.Y,{binSuffix:"_mid"})};t.height={scale:e.scaleName(n.SIZE),field:e.field(n.SIZE)}}else{t.y={scale:e.scaleName(n.Y),field:e.field(n.Y,{binSuffix:"_start"})};t.y2={scale:e.scaleName(n.Y),field:e.field(n.Y,{binSuffix:"_end"}),offset:1}}}else{if(e.has(n.Y)){t.yc={scale:e.scaleName(n.Y),field:e.field(n.Y)}}else{t.y2={field:{group:"height"},offset:-1}}t.height=e.has(n.SIZE)&&r==="horizontal"?{scale:e.scaleName(n.SIZE),field:e.field(n.SIZE)}:{value:s(e,n.Y)}}a.applyColorAndOpacity(t,e);return t}e.properties=r;function s(e,t){var r=e.fieldDef(n.SIZE);if(r&&r.value!==undefined){return r.value}var i=e.config().mark;if(i.barSize){return i.barSize}return e.isOrdinalScale(t)?e.scale(t).bandSize-1:!e.has(t)?e.config().scale.bandSize-1:i.barThinSize}function o(e){return undefined}e.labels=o})(s=t.bar||(t.bar={}))},SbOu:function(e,t,r){var n=r("zicW"),i=r("h36N");function a(e,t,r){var s=t.properties||r&&(t.properties={}),o=s.enter||r&&(s.enter={}),u=t.marks,l=e.config().marks||{};if(r){if(t.type==="symbol"&&!o.size&&l.symbolSize){o.size={value:l.symbolSize}}var f={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"};var c=f[t.type];if(!o[c]&&l.color){o[c]={value:l.color}}}n.keys(s).forEach(function(r){s[r]=i(e,t.type,s[r])});if(t.delay){t.delay=i(e,t.type,{delay:t.delay})}if(u){t.marks=u.map(function(t){return a(e,t,true)})}return t}e.exports=a;a.schema={defs:{mark:{type:"object",properties:{name:{type:"string"},key:{type:"string"},type:{enum:["rect","symbol","path","arc","area","line","rule","image","text","group"]},from:{type:"object",properties:{data:{type:"string"},mark:{type:"string"},transform:{$ref:"#/defs/transform"}},additionalProperties:false},delay:{$ref:"#/refs/numberValue"},ease:{enum:["linear","quad","cubic","sin","exp","circle","bounce"].reduce(function(e,t){["in","out","in-out","out-in"].forEach(function(r){e.push(t+"-"+r)});return e},[])},interactive:{type:"boolean"},properties:{type:"object",properties:{enter:{$ref:"#/defs/propset"},update:{$ref:"#/defs/propset"},exit:{$ref:"#/defs/propset"},hover:{$ref:"#/defs/propset"}},additionalProperties:false,anyOf:[{required:["enter"]},{required:["update"]}]}},required:["type"]}}}},Sgrz:function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("zsFm").Tuple,s=r("J731"),o=r("4JPs"),u=r("acp7");function l(e){u.prototype.init.call(this,e);o.addParameters(this,{sort:{type:"array<field>",default:null},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"value",default:null},mode:{type:"value",default:"tidy"},size:{type:"array<value>",default:r("MRce").size},nodesize:{type:"array<value>",default:null},orient:{type:"value",default:"cartesian"}});this._mode=null;this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var f="partition";var c={cartesian:function(e,t){return e.parent===t.parent?1:2},radial:function(e,t){return(e.parent===t.parent?1:2)/e.depth}};var d=l.prototype=Object.create(u.prototype);d.constructor=l;d.batchTransform=function(e,t){s.debug(e,["hierarchy layout"]);var r=this._layout,o=this._output,u=this.param("mode"),l=this.param("sort"),d=this.param("nodesize"),p=this.param("parent").accessor,h=t.filter(function(e){return p(e)===null})[0];if(u!==this._mode){this._mode=u;if(u==="tidy")u="tree";r=this._layout=n.layout[u]()}e.fields[o.x]=1;e.fields[o.y]=1;e.fields[o.depth]=1;if(u===f){e.fields[o.width]=1;e.fields[o.height]=1;r.value(this.param("field").accessor)}else{r.separation(c[this.param("orient")])}if(d.length&&u!==f){r.nodeSize(d)}else{r.size(this.param("size"))}r.sort(l.field.length?i.comparator(l.field):null).children(this.param("children").accessor).nodes(h);t.forEach(function(e){a.set(e,o.x,e.x);a.set(e,o.y,e.y);a.set(e,o.depth,e.depth);if(u===f){a.set(e,o.width,e.dx);a.set(e,o.height,e.dy)}});return e};e.exports=l;l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Hierarchy transform",type:"object",properties:{type:{enum:["hierarchy"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"parent"},field:{description:"The value for the area of each leaf-level node for partition layouts.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The layout algorithm mode to use.",oneOf:[{enum:["tidy","cluster","partition"]},{$ref:"#/refs/signal"}],default:"tidy"},orient:{description:"The layout orientation to use.",oneOf:[{enum:["cartesian","radial"]},{$ref:"#/refs/signal"}],default:"cartesian"},size:{description:"The dimensions of the tree layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[500,500]},nodesize:{description:"Sets a fixed x,y size for each node (overrides the size parameter)",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:null},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},width:{type:"string",default:"layout_width"},height:{type:"string",default:"layout_height"},depth:{type:"string",default:"layout_depth"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},SwAC:function(e,t){function r(e){this.clear();if(e)this.union(e)}var n=r.prototype;n.clone=function(){return new r(this)};n.clear=function(){this.x1=+Number.MAX_VALUE;this.y1=+Number.MAX_VALUE;this.x2=-Number.MAX_VALUE;this.y2=-Number.MAX_VALUE;return this};n.set=function(e,t,r,n){this.x1=e;this.y1=t;this.x2=r;this.y2=n;return this};n.add=function(e,t){if(e<this.x1)this.x1=e;if(t<this.y1)this.y1=t;if(e>this.x2)this.x2=e;if(t>this.y2)this.y2=t;return this};n.expand=function(e){this.x1-=e;this.y1-=e;this.x2+=e;this.y2+=e;return this};n.round=function(){this.x1=Math.floor(this.x1);this.y1=Math.floor(this.y1);this.x2=Math.ceil(this.x2);this.y2=Math.ceil(this.y2);return this};n.translate=function(e,t){this.x1+=e;this.x2+=e;this.y1+=t;this.y2+=t;return this};n.rotate=function(e,t,r){var n=Math.cos(e),i=Math.sin(e),a=t-t*n+r*i,s=r-t*i-r*n,o=this.x1,u=this.x2,l=this.y1,f=this.y2;return this.clear().add(n*o-i*l+a,i*o+n*l+s).add(n*o-i*f+a,i*o+n*f+s).add(n*u-i*l+a,i*u+n*l+s).add(n*u-i*f+a,i*u+n*f+s)};n.union=function(e){if(e.x1<this.x1)this.x1=e.x1;if(e.y1<this.y1)this.y1=e.y1;if(e.x2>this.x2)this.x2=e.x2;if(e.y2>this.y2)this.y2=e.y2;return this};n.encloses=function(e){return e&&(this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2)};n.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)};n.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)};n.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)};n.width=function(){return this.x2-this.x1};n.height=function(){return this.y2-this.y1};e.exports=r},T3kM:function(e,t,r){var n=r("RXBq").ALL;function i(e,t){var r={};a(e,r);r.add=[];r.mod=[];r.rem=[];r.reflow=t;return r}function a(e,t){t.stamp=e?e.stamp:0;t.sort=e?e.sort:null;t.facet=e?e.facet:null;t.trans=e?e.trans:null;t.dirty=e?e.dirty:[];t.request=e?e.request:null;for(var r,i=0,a=n.length;i<a;++i){t[r=n[i]]=e?e[r]:{}}}e.exports={create:i,copy:a}},TLMq:function(e,t,r){"use strict";var n=r("h/tW");var i=r("P/aK");var a=r("x6Fv");var s=r("o+e1");var o=r("j8cM");var u=r("Fw/k");var l=r("f2i1");var f=r("z5TJ");var c=r("WJ2w");var d=r("ZAUf");var p=r("wKIX");t.COLOR_LEGEND="color_legend";t.COLOR_LEGEND_LABEL="color_legend_label";function h(e){return e.channels().reduce(function(t,r){if(e.scale(r)){var n=e.fieldDef(r);var a={main:m(e,n,r)};if(r===i.COLOR&&e.legend(i.COLOR)&&(n.type===c.ORDINAL||n.bin||n.timeUnit)){a.colorLegend=g(e,n);if(n.bin){a.binColorLegend=v(e,n)}}t[r]=a}return t},{})}t.parseScaleComponent=h;function m(e,r,n){var a=e.scale(n);var s=e.sort(n);var o={name:e.scaleName(n),type:a.type};if(n===i.X&&e.has(i.X2)){if(e.has(i.X)){o.domain={fields:[_(a,e,i.X),_(a,e,i.X2)]}}else{o.domain=_(a,e,i.X2)}}else if(n===i.Y&&e.has(i.Y2)){if(e.has(i.Y)){o.domain={fields:[_(a,e,i.Y),_(a,e,i.Y2)]}}else{o.domain=_(a,e,i.Y2)}}else{o.domain=_(a,e,n)}d.extend(o,k(a,e,n));if(s&&(typeof s==="string"?s:s.order)==="descending"){o.reverse=true}["round","clamp","nice","exponent","zero","padding","points"].forEach(function(i){var s=t[i](a,n,r,e);if(s!==undefined){o[i]=s}});return o}function g(e,r){return{name:e.scaleName(t.COLOR_LEGEND),type:u.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(i.COLOR,r.bin||r.timeUnit?{}:{prefn:"rank_"}),sort:true},range:{data:e.dataTable(),field:e.field(i.COLOR),sort:true}}}function v(e,r){return{name:e.scaleName(t.COLOR_LEGEND_LABEL),type:u.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(i.COLOR),sort:true},range:{data:e.dataTable(),field:s.field(r,{binSuffix:"_range"}),sort:{field:e.field(i.COLOR,{binSuffix:"_start"}),op:"min"}}}}function y(e,t,r,n){if(!i.hasScale(r)){return null}if(d.contains([i.ROW,i.COLUMN,i.SHAPE],r)){return u.ScaleType.ORDINAL}if(e.type!==undefined){return e.type}switch(t.type){case c.NOMINAL:return u.ScaleType.ORDINAL;case c.ORDINAL:if(r===i.COLOR){return u.ScaleType.LINEAR}return u.ScaleType.ORDINAL;case c.TEMPORAL:if(r===i.COLOR){return u.ScaleType.TIME}if(t.timeUnit){switch(t.timeUnit){case f.TimeUnit.HOURS:case f.TimeUnit.DAY:case f.TimeUnit.MONTH:case f.TimeUnit.QUARTER:return u.ScaleType.ORDINAL;default:return u.ScaleType.TIME}}return u.ScaleType.TIME;case c.QUANTITATIVE:if(t.bin){return d.contains([i.X,i.Y,i.COLOR],r)?u.ScaleType.LINEAR:u.ScaleType.ORDINAL}return u.ScaleType.LINEAR}return null}t.scaleType=y;function _(e,t,r){var n=t.fieldDef(r);if(e.domain){return e.domain}if(n.type===c.TEMPORAL){if(p.rawDomain(n.timeUnit,r)){return{data:n.timeUnit,field:"date"}}return{data:t.dataTable(),field:t.field(r),sort:{field:t.field(r),op:"min"}}}var s=t.stack();if(s&&r===s.fieldChannel){if(s.offset===l.StackOffset.NORMALIZE){return[0,1]}return{data:t.dataName(a.STACKED_SCALE),field:t.field(r,{prefn:"sum_"})}}var o=x(e,t,r),f=b(t,r,e.type);if(o){return{data:a.SOURCE,field:t.field(r,{noAggregate:true})}}else if(n.bin){if(e.type===u.ScaleType.ORDINAL){return{data:t.dataTable(),field:t.field(r,{binSuffix:"_range"}),sort:{field:t.field(r,{binSuffix:"_start"}),op:"min"}}}else if(r===i.COLOR){return{data:t.dataTable(),field:t.field(r,{binSuffix:"_start"})}}else{return{data:t.dataTable(),field:[t.field(r,{binSuffix:"_start"}),t.field(r,{binSuffix:"_end"})]}}}else if(f){return{data:f.op?a.SOURCE:t.dataTable(),field:n.type===c.ORDINAL&&r===i.COLOR?t.field(r,{prefn:"rank_"}):t.field(r),sort:f}}else{return{data:t.dataTable(),field:n.type===c.ORDINAL&&r===i.COLOR?t.field(r,{prefn:"rank_"}):t.field(r)}}}t.domain=_;function b(e,t,r){if(r!==u.ScaleType.ORDINAL){return undefined}var n=e.sort(t);if(d.contains(["ascending","descending",undefined],n)){return true}if(typeof n!=="string"){return{op:n.op,field:n.field}}return undefined}t.domainSort=b;function x(e,t,r){var i=t.fieldDef(r);return e.useRawDomain&&i.aggregate&&n.SHARED_DOMAIN_OPS.indexOf(i.aggregate)>=0&&(i.type===c.QUANTITATIVE&&!i.bin||i.type===c.TEMPORAL&&d.contains([u.ScaleType.TIME,u.ScaleType.UTC],e.type))}function k(e,t,r){var n=t.fieldDef(r);var a=t.config().scale;if(e.type===u.ScaleType.ORDINAL&&e.bandSize&&d.contains([i.X,i.Y],r)){return{bandSize:e.bandSize}}if(e.range&&!d.contains([i.X,i.Y,i.ROW,i.COLUMN],r)){return{range:e.range}}switch(r){case i.ROW:return{range:"height"};case i.COLUMN:return{range:"width"}}var s=t;switch(r){case i.X:return{rangeMin:0,rangeMax:s.config().cell.width};case i.Y:return{rangeMin:s.config().cell.height,rangeMax:0};case i.SIZE:if(s.mark()===o.BAR){if(a.barSizeRange!==undefined){return{range:a.barSizeRange}}var l=t.config().mark.orient==="horizontal"?i.Y:i.X;return{range:[t.config().mark.barThinSize,t.scale(l).bandSize]}}else if(s.mark()===o.TEXT){return{range:a.fontSizeRange}}else if(s.mark()===o.RULE){return{range:a.ruleSizeRange}}else if(s.mark()===o.TICK){return{range:a.tickSizeRange}}if(a.pointSizeRange!==undefined){return{range:a.pointSizeRange}}var f=S(s);return{range:[9,(f-2)*(f-2)]};case i.SHAPE:return{range:a.shapeRange};case i.COLOR:if(n.type===c.NOMINAL){return{range:a.nominalColorRange}}return{range:a.sequentialColorRange};case i.OPACITY:return{range:a.opacity}}return{}}t.rangeMixins=k;function S(e){var t=e.config().scale;var r=e.has(i.X);var n=e.has(i.Y);var a=s.isMeasure(e.encoding().x);var o=s.isMeasure(e.encoding().y);if(r&&n){return a!==o?e.scale(a?i.Y:i.X).bandSize:Math.min(e.scale(i.X).bandSize||t.bandSize,e.scale(i.Y).bandSize||t.bandSize)}else if(n){return o?e.config().scale.bandSize:e.scale(i.Y).bandSize}else if(r){return a?e.config().scale.bandSize:e.scale(i.X).bandSize}return e.config().scale.bandSize}function T(e){if(d.contains([u.ScaleType.LINEAR,u.ScaleType.POW,u.ScaleType.SQRT,u.ScaleType.LOG,u.ScaleType.TIME,u.ScaleType.UTC],e.type)){return e.clamp}return undefined}t.clamp=T;function E(e){if(e.type===u.ScaleType.POW){return e.exponent}return undefined}t.exponent=E;function A(e,t,r){if(d.contains([u.ScaleType.LINEAR,u.ScaleType.POW,u.ScaleType.SQRT,u.ScaleType.LOG,u.ScaleType.TIME,u.ScaleType.UTC,u.ScaleType.QUANTIZE],e.type)){if(e.nice!==undefined){return e.nice}if(d.contains([u.ScaleType.TIME,u.ScaleType.UTC],e.type)){return p.smallestUnit(r.timeUnit)}return d.contains([i.X,i.Y],t)}return undefined}t.nice=A;function O(e,t){if(e.type===u.ScaleType.ORDINAL&&d.contains([i.X,i.Y],t)){return e.padding}return undefined}t.padding=O;function M(e,t,r,n){if(e.type===u.ScaleType.ORDINAL&&d.contains([i.X,i.Y],t)){return true}return undefined}t.points=M;function w(e,t){if(d.contains([i.X,i.Y,i.ROW,i.COLUMN,i.SIZE],t)&&e.round!==undefined){return e.round}return undefined}t.round=w;function L(e,t,r){if(!d.contains([u.ScaleType.TIME,u.ScaleType.UTC,u.ScaleType.ORDINAL],e.type)){if(e.zero!==undefined){return e.zero}return!r.bin&&d.contains([i.X,i.Y],t)}return undefined}t.zero=L},TXaq:function(e,t,r){var n=r("zsFm"),i=n.Tuple,a=r("J731"),s=r("4JPs");function o(e){s.prototype.init.call(this,e);s.addParameters(this,{field:{type:"value"},expr:{type:"expr"}});return this.mutates(true)}var u=o.prototype=Object.create(s.prototype);u.constructor=o;u.transform=function(e){a.debug(e,["formulating"]);var t=this.param("field"),r=this.param("expr"),n=false;function s(e){i.set(e,t,r(e));n=true}e.add.forEach(s);if(this.reevaluate(e)){e.mod.forEach(s)}if(n)e.fields[t]=1;return e};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Formula transform",description:"Extends data elements with new values according to a calculation formula.",type:"object",properties:{type:{enum:["formula"]},field:{type:"string",description:"The property name in which to store the computed formula value."},expr:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the formula."}},required:["type","field","expr"]}},TrdW:function(e,t,r){var n=r("zicW"),i=n.template,a=r("1ifp"),s=["datum","parent","event","signals"];var o=a.compiler(s,{idWhiteList:s,fieldVar:s[0],globalVar:function(e){return"this.sig["+n.str(e)+"]._value"},functions:function(e){var t=a.functions(e);t.eventItem="event.vg.getItem";t.eventGroup="event.vg.getGroup";t.eventX="event.vg.getX";t.eventY="event.vg.getY";t.open=u(e);t.scale=f(e,false);t.iscale=f(e,true);t.inrange="this.defs.inrange";t.indata=p(e);t.format="this.defs.format";t.timeFormat="this.defs.timeFormat";t.utcFormat="this.defs.utcFormat";return t},functionDefs:function(){return{scale:c,inrange:d,indata:h,format:m,timeFormat:g,utcFormat:v,open:l}}});function u(e){return function(t){t=t.map(e);var r=t.length;if(r<1||r>2){throw Error("open takes exactly 1 or 2 arguments.")}return"this.defs.open(this.model, "+t[0]+(r>1?","+t[1]:"")+")"}}function l(e,t,r){if(typeof window!=="undefined"&&window&&window.open){var i=n.extend({type:"open",url:t,name:r},e.config().load),a=n.load.sanitizeUrl(i);if(a){window.open(a,r)}else{throw Error("Invalid URL: "+i.url)}}else{throw Error("Open function can only be invoked in a browser.")}}function f(e,t){return function(r){r=r.map(e);var n=r.length;if(n<2||n>3){throw Error("scale takes exactly 2 or 3 arguments.")}return"this.defs.scale(this.model, "+t+", "+r[0]+","+r[1]+(n>2?","+r[2]:"")+")"}}function c(e,t,r,n,i){if(!i||!i.scale){i=i&&i.mark?i.mark.group:e.scene().items[0]}if(e.group(i._id)!==i){throw Error('Scope for scale "'+r+'" is not a valid group item.')}var a=i.scale(r);return!a?n:t?a.invert(n):a(n)}function d(e,t,r,n){var i=t,a=r;if(t>r){i=r;a=t}return n?i<e&&a>e:i<=e&&a>=e}function p(e){return function(t,r,n,i){var a;if(t.length!==3){throw Error("indata takes 3 arguments.")}if(t[0].type!=="Literal"){throw Error("Data source name must be a literal for indata.")}a=t[0].value;i[a]=1;if(t[2].type==="Literal"){p.model.requestIndex(a,t[2].value)}t=t.map(e);return"this.defs.indata(this.model,"+t[0]+","+t[1]+","+t[2]+")"}}function h(e,t,r,n){var i=e.data(t),a=i.getIndex(n);return a[r]>0}function m(e,t){return i.format(e,"number")(t)}function g(e,t){return i.format(e,"time")(t)}function v(e,t){return i.format(e,"utc")(t)}function y(e){return function(t){p.model=e;var r=o(t);r.model=e;r.sig=e?e._signals:{};return r}}y.scale=c;y.codegen=o.codegen;e.exports=y},U1Zs:function(e,t,r){(function(e,r){true?r(t):typeof define==="function"&&define.amd?define("d3-format",["exports"],r):r(e.d3_format={})})(this,function(e){"use strict";function t(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function r(e){return e=t(Math.abs(e)),e?e[1]:NaN}function n(e,t){return function(r,n){var i=r.length,a=[],s=0,o=e[0],u=0;while(i>0&&o>0){if(u+o+1>n)o=Math.max(1,n-u);a.push(r.substring(i-=o,i+o));if((u+=o+1)>n)break;o=e[s=(s+1)%e.length]}return a.reverse().join(t)}}var i;function a(e,r){var n=t(e,r);if(!n)return e+"";var a=n[0],s=n[1],o=s-(i=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+t(e,Math.max(0,r+o-1))[0]}function s(e,r){var n=t(e,r);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function o(e,t){e=e.toPrecision(t);e:for(var r=e.length,n=1,i=-1,a;n<r;++n){switch(e[n]){case".":i=a=n;break;case"0":if(i===0)i=n;a=n;break;case"e":break e;default:if(i>0)i=0;break}}return i>0?e.slice(0,i)+e.slice(a+1):e}var u={"":o,"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return s(e*100,t)},r:s,s:a,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};var l=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function f(e){return new c(e)}function c(e){if(!(t=l.exec(e)))throw new Error("invalid format: "+e);var t,r=t[1]||" ",n=t[2]||">",i=t[3]||"-",a=t[4]||"",s=!!t[5],o=t[6]&&+t[6],f=!!t[7],c=t[8]&&+t[8].slice(1),d=t[9]||"";if(d==="n")f=true,d="g";else if(!u[d])d="";if(s||r==="0"&&n==="=")s=true,r="0",n="=";this.fill=r;this.align=n;this.sign=i;this.symbol=a;this.zero=s;this.width=o;this.comma=f;this.precision=c;this.type=d}c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var d=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function p(e){return e}function h(e){var t=e.grouping&&e.thousands?n(e.grouping,e.thousands):p,a=e.currency,s=e.decimal;function o(e){e=f(e);var r=e.fill,n=e.align,o=e.sign,l=e.symbol,c=e.zero,p=e.width,h=e.comma,m=e.precision,g=e.type;var v=l==="$"?a[0]:l==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",y=l==="$"?a[1]:/[%p]/.test(g)?"%":"";var _=u[g],b=!g||/[defgprs%]/.test(g);m=m==null?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));return function(e){var a=v,u=y;if(g==="c"){u=_(e)+u;e=""}else{e=+e;var l=(e<0||1/e<0)&&(e*=-1,true);e=_(e,m);if(l){var f=-1,x=e.length,k;l=false;while(++f<x){if(k=e.charCodeAt(f),48<k&&k<58||g==="x"&&96<k&&k<103||g==="X"&&64<k&&k<71){l=true;break}}}a=(l?o==="("?o:"-":o==="-"||o==="("?"":o)+a;u=u+(g==="s"?d[8+i/3]:"")+(l&&o==="("?")":"");if(b){var f=-1,x=e.length,k;while(++f<x){if(k=e.charCodeAt(f),48>k||k>57){u=(k===46?s+e.slice(f+1):e.slice(f))+u;e=e.slice(0,f);break}}}}if(h&&!c)e=t(e,Infinity);var S=a.length+e.length+u.length,T=S<p?new Array(p-S+1).join(r):"";if(h&&c)e=t(T+e,T.length?p-u.length:Infinity),T="";switch(n){case"<":return a+e+u+T;case"=":return a+T+e+u;case"^":return T.slice(0,S=T.length>>1)+a+e+u+T.slice(S)}return T+a+e+u}}function l(e,t){var n=o((e=f(e),e.type="f",e)),i=Math.max(-8,Math.min(8,Math.floor(r(t)/3)))*3,a=Math.pow(10,-i),s=d[8+i/3];return function(e){return n(a*e)+s}}return{format:o,formatPrefix:l}}var m=h({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var g=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var v=h({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]});var y=h({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]});var _=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var b=h({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var x=h({decimal:".",thousands:",",grouping:[3],currency:["£",""]});var k=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var S=h({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]});var T=h({decimal:",",thousands:" ",grouping:[3],currency:["","$"]});var E=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var A=h({decimal:".",thousands:",",grouping:[3],currency:["₪",""]});var O=h({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]});var M=h({decimal:",",thousands:".",grouping:[3],currency:["€",""]});var w=h({decimal:".",thousands:",",grouping:[3],currency:["","円"]});var L=h({decimal:".",thousands:",",grouping:[3],currency:["₩",""]});var N=h({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]});var C=h({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]});var R=h({decimal:",",thousands:".",grouping:[3],currency:["","zł"]});var I=h({decimal:",",thousands:".",grouping:[3],currency:["R$",""]});var D=h({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]});var U=h({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]});var P=h({decimal:".",thousands:",",grouping:[3],currency:["¥",""]});function z(e){return Math.max(0,-r(Math.abs(e)))}function F(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(r(t)/3)))*3-r(Math.abs(e)))}function j(e,t){e=Math.abs(e),t=Math.abs(t)-e;return Math.max(0,r(t)-r(e))+1}var Y=m.format;var $=m.formatPrefix;var q="0.4.2";e.version=q;e.format=Y;e.formatPrefix=$;e.locale=h;e.localeCaEs=g;e.localeCsCz=v;e.localeDeCh=y;e.localeDeDe=_;e.localeEnCa=b;e.localeEnGb=x;e.localeEnUs=m;e.localeEsEs=k;e.localeFiFi=S;e.localeFrCa=T;e.localeFrFr=E;e.localeHeIl=A;e.localeHuHu=O;e.localeItIt=M;e.localeJaJp=w;e.localeKoKr=L;e.localeMkMk=N;e.localeNlNl=C;e.localePlPl=R;e.localePtBr=I;e.localeRuRu=D;e.localeSvSe=U;e.localeZhCn=P;e.formatSpecifier=f;e.precisionFixed=z;e.precisionPrefix=F;e.precisionRound=j})},UTTf:function(e,t,r){var n=r("zicW"),i=r("Za4h").svg,a=r("esTF");function s(e){return e.x||0}function o(e){return e.y||0}function u(e){return(e.x||0)+(e.width||0)}function l(e){return(e.y||0)+(e.height||0)}function f(e){return e.size==null?100:e.size}function c(e){return e.shape||"circle"}var d=i.area().x(s).y1(o).y0(l),p=i.area().y(o).x1(s).x0(u),h=i.line().x(s).y(o);e.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:i.arc(),symbol:i.symbol().type(c).size(f),area:function(e){var t=e[0];return(t.orient==="horizontal"?p:d).interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},line:function(e){var t=e[0];return h.interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},resize:function(e,t){var r=a(e),n="",i,s,o,u,l,f,c;t=Math.sqrt(t);for(u=0,l=r.length;u<l;++u){for(i=r[u],f=0,c=i.length;f<c;++f){if(i[f]==="Z")break;if((s=+i[f])===s){o=e.indexOf(s);n+=e.substring(0,o)+s*t;e=e.substring(o+(s+"").length)}}}return n+"Z"}},symbolTypes:n.toMap(i.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}},UaGl:function(e,t,r){e.exports={axes:r("W+IH"),background:r("fxxq"),data:r("OTIj"),events:r("WcUm"),expr:r("TrdW"),legends:r("v4pi"),mark:r("SbOu"),marks:r("92+E"),modify:r("r7he"),padding:r("O3lN"),predicates:r("yaQe"),properties:r("h36N"),signals:r("S/OH"),spec:r("ybCx"),streams:r("6gf1"),transforms:r("DUWk")}},Uikm:function(e,t,r){var n=r("4JPs"),i=r("3Y21");function a(e){n.addParameters(this,{transform:{type:"custom",set:function(e){return this._transform._pipeline=e,this._transform},get:function(){var e=r("DUWk"),t=this._transform;return t._pipeline.map(function(r){return e(t._graph,r)})}}});this._pipeline=[];return i.call(this,e)}var s=a.prototype=Object.create(i.prototype);s.constructor=a;s.aggr=function(){return i.prototype.aggr.call(this).facet(this)};s.transform=function(e,t){var r=i.prototype.transform.call(this,e,t);if(e.add.length){this.listeners()[0].rerank()}return r};e.exports=a;var o=r("zicW");a.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Facet transform",description:'A special aggregate transform that organizes a data set into groups or "facets".',type:"object",properties:o.extend({},i.schema.properties,{type:{enum:["facet"]},transform:{$ref:"#/defs/transform"}}),additionalProperties:false,required:["type"]}},"Utn/":function(e,t,r){"use strict";var n=r("ZAUf");var i=r("j8cM");t.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]};t.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:n.toMap(["row","column","x","y","size","color","detail"]),line:n.toMap(["row","column","x","y","color","detail"]),area:n.toMap(["row","column","x","y","color","detail"]),tick:n.toMap(["row","column","x","y","color","detail"]),circle:n.toMap(["row","column","x","y","color","size","detail"]),square:n.toMap(["row","column","x","y","color","size","detail"]),point:n.toMap(["row","column","x","y","color","size","detail","shape"]),text:n.toMap(["row","column","size","color","text"])};function a(e,r,n){if(r===void 0){r=t.DEFAULT_REQUIRED_CHANNEL_MAP}if(n===void 0){n=t.DEFAULT_SUPPORTED_CHANNEL_TYPE}var a=e.mark;var s=e.encoding;var o=r[a];var u=n[a];for(var l in o){if(!(o[l]in s)){return'Missing encoding channel "'+o[l]+'" for mark "'+a+'"'}}for(var f in s){if(!u[f]){return'Encoding channel "'+f+'" is not supported by mark type "'+a+'"'}}if(a===i.BAR&&!s.x&&!s.y){return"Missing both x and y for bar"}return null}t.getEncodingMappingError=a},V22v:function(e,t,r){"use strict";var n=r("ZAUf");var i=r("jMte");var a=r("hBex");var s=r("t3C9");var o=r("1PdY");var u=r("nOes");var l=r("pAWG");var f=r("yixx");var c=r("QNWf");var d=r("kowr");var p=r("736r");var h=r("k66X");var m=r("vY52");function g(e){return{formatParse:a.formatParse.parseUnit(e),nullFilter:s.nullFilter.parseUnit(e),filter:o.filter.parseUnit(e),nonPositiveFilter:f.nonPositiveFilter.parseUnit(e),source:i.source.parseUnit(e),bin:u.bin.parseUnit(e),calculate:l.formula.parseUnit(e),timeUnit:p.timeUnit.parseUnit(e),timeUnitDomain:h.timeUnitDomain.parseUnit(e),summary:c.summary.parseUnit(e),stackScale:d.stackScale.parseUnit(e),colorRank:m.colorRank.parseUnit(e)}}t.parseUnitData=g;function v(e){return{formatParse:a.formatParse.parseFacet(e),nullFilter:s.nullFilter.parseFacet(e),filter:o.filter.parseFacet(e),nonPositiveFilter:f.nonPositiveFilter.parseFacet(e),source:i.source.parseFacet(e),bin:u.bin.parseFacet(e),calculate:l.formula.parseFacet(e),timeUnit:p.timeUnit.parseFacet(e),timeUnitDomain:h.timeUnitDomain.parseFacet(e),summary:c.summary.parseFacet(e),stackScale:d.stackScale.parseFacet(e),colorRank:m.colorRank.parseFacet(e)}}t.parseFacetData=v;function y(e){return{filter:o.filter.parseLayer(e),formatParse:a.formatParse.parseLayer(e),nullFilter:s.nullFilter.parseLayer(e),nonPositiveFilter:f.nonPositiveFilter.parseLayer(e),source:i.source.parseLayer(e),bin:u.bin.parseLayer(e),calculate:l.formula.parseLayer(e),timeUnit:p.timeUnit.parseLayer(e),timeUnitDomain:h.timeUnitDomain.parseLayer(e),summary:c.summary.parseLayer(e),stackScale:d.stackScale.parseLayer(e),colorRank:m.colorRank.parseLayer(e)}}t.parseLayerData=y;function _(e,t){var r=e.component.data;var a=i.source.assemble(e,r);if(a){t.push(a)}c.summary.assemble(r,e).forEach(function(e){t.push(e)});if(t.length>0){var s=t[t.length-1];var o=m.colorRank.assemble(r);if(o.length>0){s.transform=(s.transform||[]).concat(o)}var u=f.nonPositiveFilter.assemble(r);if(u.length>0){s.transform=(s.transform||[]).concat(u)}}else{if(n.keys(r.colorRank).length>0){throw new Error("Invalid colorRank not merged")}else if(n.keys(r.nonPositiveFilter).length>0){throw new Error("Invalid nonPositiveFilter not merged")}}var l=d.stackScale.assemble(r);if(l){t.push(l)}h.timeUnitDomain.assemble(r).forEach(function(e){t.push(e)});return t}t.assembleData=_},"VY+T":function(e,t){function r(e,t,r){return r?e.createElementNS(r,t):e.createElement(t)}function n(e){if(!e)return;var t=e.parentNode;if(t){t.removeChild(e);if(!t.childNodes||!t.childNodes.length)n(t)}}e.exports={find:function(e,t){t=t.toLowerCase();for(var r=0,n=e.childNodes.length;r<n;++r){if(e.childNodes[r].tagName.toLowerCase()===t){return e.childNodes[r]}}},child:function(e,t,n,i,a,s){var o,u;o=u=e.childNodes[t];if(!o||s||o.tagName.toLowerCase()!==n.toLowerCase()||a&&o.getAttribute("class")!=a){o=r(e.ownerDocument,n,i);e.insertBefore(o,u||null);if(a)o.setAttribute("class",a)}return o},clear:function(e,t){var r=e.childNodes.length;while(r>t){e.removeChild(e.childNodes[--r])}return e},remove:n,cssClass:function(e){return"mark-"+e.marktype+(e.name?" "+e.name:"")},openTag:function(e,t,r){var n="<"+e,i,a;if(t){for(i in t){a=t[i];if(a!=null){n+=" "+i+'="'+a+'"'}}}if(r)n+=" "+r;return n+">"},closeTag:function(e){return"</"+e+">"}}},VkFx:function(e,t){function r(){this._el=null;this._bgcolor=null}var n=r.prototype;n.initialize=function(e,t,r,n){this._el=e;return this.resize(t,r,n)};n.element=function(){return this._el};n.scene=function(){return this._el&&this._el.firstChild};n.background=function(e){if(arguments.length===0)return this._bgcolor;this._bgcolor=e;return this};n.resize=function(e,t,r){this._width=e;this._height=t;this._padding=r||{top:0,left:0,bottom:0,right:0};return this};n.render=function(){return this};e.exports=r},Vp7n:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("2pdF").Item,s=r("zsFm"),o=s.Node,u=s.Dependencies,l=s.Tuple,f=s.ChangeSet,c={},d=r("XVii"),p=r("rnWk"),h=r("OTIj");function m(){return arguments.length?this.init.apply(this,arguments):this}var g=m.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"};var v=1,y=2;var _=m.prototype=new o;_.init=function(e,t,r,i,a,s){o.prototype.init.call(this,e).router(true).collector(true);this._def=t;this._mark=r;this._from=(t.from?t.from.data:null)||s;this._ds=n.isString(this._from)?e.data(this._from):null;this._map={};this._status=null;r.def=t;r.marktype=t.type;r.interactive=t.interactive!==false;r.items=[];if(n.isValid(t.name))r.name=t.name;this._parent=i;this._parent_id=a;if(t.from&&(t.from.mark||t.from.transform||t.from.modify)){b.call(this)}this._isSuper=this._def.type!=="group";this._encoder=new d(this._graph,this._mark,this);this._bounder=new p(this._graph,this._mark);this._output=null;if(this._ds){this._encoder.dependency(u.DATA,this._from)}this.dependency(u.DATA,this._encoder.dependency(u.DATA));this.dependency(u.SCALES,this._encoder.dependency(u.SCALES));this.dependency(u.SIGNALS,this._encoder.dependency(u.SIGNALS));return this};function b(){var e=this._def.from,t=e.mark,r,n,i,a,s,u,l;if(t){a=this.sibling(t);r=a._isSuper?a:a._bounder;n=["vg",this._parent_id,t,r.listeners(true).length].join("_");i={name:n,transform:e.transform,modify:e.modify}}else{r=this._graph.data(this._from);if(!r)throw Error('Data source "'+this._from+'" is not defined.');n=["vg",this._from,this._def.type,r.listeners(true).length].join("_");i={name:n,source:this._from,transform:e.transform,modify:e.modify}}this._from=n;this._ds=h.datasource(this._graph,i);if(t){l=new o(this._graph).addListener(this._ds.listener());l.evaluate=function(e){var t=f.create(e),r=a._output;t.add=r.add;t.mod=r.mod;t.rem=r.rem;return t};r.addListener(l)}else{s=this._ds.source().last();u=f.create(s);u.add=s.add;u.mod=s.mod;u.rem=s.rem;u.stamp=null;this._graph.propagate(u,this._ds.listener(),s.stamp)}}_.ds=function(){return this._ds};_.parent=function(){return this._parent};_.encoder=function(){return this._encoder};_.pipeline=function(){return[this]};_.connect=function(){var e=this;this._graph.connect(this.pipeline());this._encoder._scales.forEach(function(t){if(!(t=e._parent.scale(t)))return;t.addListener(e)});if(this._parent){if(this._isSuper)this.addListener(this._parent._collector);else this._bounder.addListener(this._parent._collector)}return this._status=v,this};_.disconnect=function(){var e=this;if(!this._listeners.length)return this;function t(t){for(var r=0,n=t.length,i;r<n;++r){if(!(i=e._parent.scale(t[r])))continue;i.removeListener(e)}}o.prototype.disconnect.call(this);this._graph.disconnect(this.pipeline());t(this._encoder._scales);t(n.keys(this._mark._scaleRefs));return this._status=y,this};_.sibling=function(e){return this._parent.child(e,this._parent_id)};_.evaluate=function(e){i.debug(e,["building",this._from||this._def.from,this._def.type]);var t=this,r=this._mark.def,a=r.properties||{},s=a.update||{},o=f.create(e),l,d,p,h;if(this._ds){p=o.data[h=this._ds.name()];o.data[h]=null;l=this._encoder.reevaluate(o);o.data[h]=p;d=this._ds.last();if(!d)throw Error("Builder evaluated before backing DataSource.");if(d.stamp>this._stamp){k.call(this,d,o,this._ds.values(),true,l)}else if(l){o.mod=this._mark.items.slice()}}else{p=n.isFunction(this._def.from)?this._def.from():[c];k.call(this,e,o,p)}this._output=o=this._graph.evaluate(o,this._encoder);if(s.nested&&s.nested.length&&this._status===v){n.keys(this._mark._scaleRefs).forEach(function(e){var r=t._parent.scale(e);if(!r)return;r.addListener(t);t.dependency(u.SCALES,e);t._encoder.dependency(u.SCALES,e)})}if(this._isSuper){o.mod=o.mod.filter(function(e){return e._dirty});o=this._graph.evaluate(o,this._bounder)}return o};function x(){var e=l.ingest(new a(this._mark));if(this._def.width)l.set(e,"width",this._def.width);if(this._def.height)l.set(e,"height",this._def.height);return e}function k(e,t,r,n,i){var a=S(this._def.key||(n?"_id":null)),s=this._mark.items||[],o=n?e.rem:s,u=l.idMap(!n||i?r:e.mod),f=[],c,d,p,h,m,v,y;for(c=0,p=o.length;c<p;++c){h=o[c]===s[c]?s[c]:a?this._map[a(o[c])]:o[c];h.status=g.EXIT}for(c=0,p=r.length;c<p;++c){m=r[c];h=a?this._map[d=a(m)]:s[c];v=h?false:(h=x.call(this),true);h.status=v?g.ENTER:g.UPDATE;y=!v&&h.datum!==m;h.datum=m;if(a){l.set(h,"key",d);this._map[d]=h}if(v){t.add.push(h)}else if(y||u[m._id]){t.mod.push(h)}f.push(h)}for(c=0,p=o.length;c<p;++c){h=o[c]===s[c]?s[c]:a?this._map[d=a(o[c])]:o[c];if(h.status===g.EXIT){h._dirty=true;e.dirty.push(h);f.push(h);t.rem.push(h);if(a)this._map[d]=null}}return this._mark.items=f,t}function S(e){if(e==null)return null;var t=n.array(e).map(n.accessor);return function(e){for(var r="",n=0,i=t.length;n<i;++n){if(n>0)r+="|";r+=String(t[n](e))}return r}}e.exports=m},"W+IH":function(e,t,r){var n=r("zicW"),i=r("lKLM"),a=r("YvtE");var s={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};function o(e,t,r,n){var a=l(e);(t||[]).forEach(function(t,s){r[s]=r[s]||i(e,a[t.type]);u(a[t.type],t,s,r[s],n)})}function u(e,t,r,i,o){var u;if(t.scale!==undefined){i.scale(u=o.scale(t.scale))}var l=e.grid;if(n.isObject(l)){e.grid=l[u.type]!==undefined?l[u.type]:l.default}i.orient(a(t,e,"orient",s[t.type]));i.offset(a(t,e,"offset",0));i.layer(a(t,e,"layer","front"));i.grid(a(t,e,"grid",false));i.title(t.title||null);i.titleOffset(a(t,e,"titleOffset"));i.tickValues(t.values||null);i.tickFormat(t.format||null);i.tickFormatType(t.formatType||null);i.tickSubdivide(t.subdivide||0);i.tickPadding(a(t,e,"tickPadding",e.padding));var f=a(t,e,"tickSize"),c=[f,f,f];c[0]=a(t,e,"tickSizeMajor",c[0]);c[1]=a(t,e,"tickSizeMinor",c[1]);c[2]=a(t,e,"tickSizeEnd",c[2]);if(c.length){i.tickSize.apply(i,c)}i.tickCount(a(t,e,"ticks"));var d=t.properties;if(d&&d.ticks){i.majorTickProperties(d.majorTicks?n.extend({},d.ticks,d.majorTicks):d.ticks);i.minorTickProperties(d.minorTicks?n.extend({},d.ticks,d.minorTicks):d.ticks)}else{i.majorTickProperties(d&&d.majorTicks||{});i.minorTickProperties(d&&d.minorTicks||{})}i.tickLabelProperties(d&&d.labels||{});i.titleProperties(d&&d.title||{});i.gridLineProperties(d&&d.grid||{});i.domainProperties(d&&d.axis||{})}function l(e){var t=e.config(),r=t.axis;return{x:n.extend(n.duplicate(r),t.axis_x),y:n.extend(n.duplicate(r),t.axis_y)}}e.exports=o;o.schema={defs:{axis:{type:"object",properties:{type:{enum:["x","y"]},scale:{type:"string"},orient:{enum:["top","bottom","left","right"]},title:{type:"string"},titleOffset:{type:"number"},format:{type:"string"},formatType:{enum:["time","utc","string","number"]},ticks:{type:"number"},values:{type:"array",items:{type:["string","number"]}},subdivide:{type:"number"},tickPadding:{type:"number"},tickSize:{type:"number"},tickSizeMajor:{type:"number"},tickSizeMinor:{type:"number"},tickSizeEnd:{type:"number"},offset:{oneOf:[{type:"number"},{type:"object",properties:{scale:{type:"string"},value:{type:["string","number"]}},required:["scale","value"],additionalProperties:false}]},layer:{enum:["front","back"],default:"front"},grid:{type:"boolean"},properties:{type:"object",properties:{ticks:{$ref:"#/defs/propset"},majorTicks:{$ref:"#/defs/propset"},minorTicks:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},title:{$ref:"#/defs/propset"},grid:{$ref:"#/defs/propset"},axis:{$ref:"#/defs/propset"}},additionalProperties:false}},additionalProperties:false,required:["type","scale"]}}}},WJ2w:function(e,t,r){"use strict";(function(e){e[e["QUANTITATIVE"]="quantitative"]="QUANTITATIVE";e[e["ORDINAL"]="ordinal"]="ORDINAL";e[e["TEMPORAL"]="temporal"]="TEMPORAL";e[e["NOMINAL"]="nominal"]="NOMINAL"})(t.Type||(t.Type={}));var n=t.Type;t.QUANTITATIVE=n.QUANTITATIVE;t.ORDINAL=n.ORDINAL;t.TEMPORAL=n.TEMPORAL;t.NOMINAL=n.NOMINAL;t.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"};t.TYPE_FROM_SHORT_TYPE={Q:t.QUANTITATIVE,T:t.TEMPORAL,O:t.ORDINAL,N:t.NOMINAL};function i(e){var r=e;return t.TYPE_FROM_SHORT_TYPE[r.toUpperCase()]||r.toLowerCase()}t.getFullName=i},WcUm:function(e,t){e.exports=function(){"use strict";function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r}function t(e,r,n,i){this.message=e;this.expected=r;this.found=n;this.location=i;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,t)}}e(t,Error);function r(e){var r=arguments.length>1?arguments[1]:{},n=this,i={},a={start:ct},s=ct,o=",",u={type:"literal",value:",",description:'","'},l=function(e,t){return[e].concat(t)},f=function(e){return[e]},c="[",d={type:"literal",value:"[",description:'"["'},p="]",h={type:"literal",value:"]",description:'"]"'},m=">",g={type:"literal",value:">",description:'">"'},v=function(e,t,r){return{start:e,middle:r,end:t,str:"["+e.str+", "+t.str+"] > "+r.str}},y=function(e,t){e.filters=t;e.str+=t.map(function(e){return"["+e+"]"}).join("");return e},_=function(e){return e},b="(",x={type:"literal",value:"(",description:'"("'},k=")",S={type:"literal",value:")",description:'")"'},T=function(e){return{stream:e,str:"("+e.map(function(e){return e.str}).join(", ")+")"}},E="@",A={type:"literal",value:"@",description:'"@"'},O=":",M={type:"literal",value:":",description:'":"'},w=function(e,t){return{event:t,name:e,str:"@"+e+":"+t}},L=function(e,t){return{event:t,mark:e,str:e+":"+t}},N=function(e,t){return{event:t,target:e,str:e+":"+t}},C=function(e){return{event:e,str:e}},R=function(e){return{signal:e,str:e}},I="rect",D={type:"literal",value:"rect",description:'"rect"'},U="symbol",P={type:"literal",value:"symbol",description:'"symbol"'},z="path",F={type:"literal",value:"path",description:'"path"'},j="arc",Y={type:"literal",value:"arc",description:'"arc"'},$="area",q={type:"literal",value:"area",description:'"area"'},W="line",H={type:"literal",value:"line",description:'"line"'},X="rule",G={type:"literal",value:"rule",description:'"rule"'},V="image",B={type:"literal",value:"image",description:'"image"'},J="text",Z={type:"literal",value:"text",description:'"text"'},Q="group",K={type:"literal",value:"group",description:'"group"'},ee="mousedown",te={type:"literal",value:"mousedown",description:'"mousedown"'},re="mouseup",ne={type:"literal",value:"mouseup",description:'"mouseup"'},ie="click",ae={type:"literal",value:"click",description:'"click"'},se="dblclick",oe={type:"literal",value:"dblclick",description:'"dblclick"'},ue="wheel",le={type:"literal",value:"wheel",description:'"wheel"'},fe="keydown",ce={type:"literal",value:"keydown",description:'"keydown"'},de="keypress",pe={type:"literal",value:"keypress",description:'"keypress"'},he="keyup",me={type:"literal",value:"keyup",description:'"keyup"'},ge="mousewheel",ve={type:"literal",value:"mousewheel",description:'"mousewheel"'},ye="mousemove",_e={type:"literal",value:"mousemove",description:'"mousemove"'},be="mouseout",xe={type:"literal",value:"mouseout",description:'"mouseout"'},ke="mouseover",Se={type:"literal",value:"mouseover",description:'"mouseover"'},Te="mouseenter",Ee={type:"literal",value:"mouseenter",description:'"mouseenter"'},Ae="touchstart",Oe={type:"literal",value:"touchstart",description:'"touchstart"'},Me="touchmove",we={type:"literal",value:"touchmove",description:'"touchmove"'},Le="touchend",Ne={type:"literal",value:"touchend",description:'"touchend"'},Ce="dragenter",Re={type:"literal",value:"dragenter",description:'"dragenter"'},Ie="dragover",De={type:"literal",value:"dragover",description:'"dragover"'},Ue="dragleave",Pe={type:"literal",value:"dragleave",description:'"dragleave"'},ze=function(e){return e},Fe=/^[a-zA-Z0-9_\-]/,je={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},Ye=function(e){return e.join("")},$e=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,qe={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},We=function(e){return e.join("")},He=/^['"a-zA-Z0-9_().><=! \t-&|~]/,Xe={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},Ge=function(e){return e.join("")},Ve=/^[ \t\r\n]/,Be={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},Je=0,Ze=0,Qe=[{line:1,column:1,seenCR:false}],Ke=0,et=[],tt=0,rt;if("startRule"in r){if(!(r.startRule in a)){throw new Error("Can't start parsing from rule \""+r.startRule+'".')}s=a[r.startRule]}function nt(){return e.substring(Ze,Je)}function it(){return ut(Ze,Je)}function at(t){throw ft(null,[{type:"other",description:t}],e.substring(Ze,Je),ut(Ze,Je))}function st(t){throw ft(t,null,e.substring(Ze,Je),ut(Ze,Je))}function ot(t){var r=Qe[t],n,i;if(r){return r}else{n=t-1;while(!Qe[n]){n--}r=Qe[n];r={line:r.line,column:r.column,seenCR:r.seenCR};while(n<t){i=e.charAt(n);if(i==="\n"){if(!r.seenCR){r.line++}r.column=1;r.seenCR=false}else if(i==="\r"||i==="\u2028"||i==="\u2029"){r.line++;r.column=1;r.seenCR=true}else{r.column++;r.seenCR=false}n++}Qe[t]=r;return r}}function ut(e,t){var r=ot(e),n=ot(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function lt(e){if(Je<Ke){return}if(Je>Ke){Ke=Je;et=[]}et.push(e)}function ft(e,r,n,i){function a(e){var t=1;e.sort(function(e,t){if(e.description<t.description){return-1}else if(e.description>t.description){return 1}else{return 0}});while(t<e.length){if(e[t-1]===e[t]){e.splice(t,1)}else{t++}}}function s(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n=new Array(e.length),i,a,s;for(s=0;s<e.length;s++){n[s]=e[s].description}i=e.length>1?n.slice(0,-1).join(", ")+" or "+n[e.length-1]:n[0];a=t?'"'+r(t)+'"':"end of input";return"Expected "+i+" but "+a+" found."}if(r!==null){a(r)}return new t(e!==null?e:s(r,n),r,n,i)}function ct(){var e;e=dt();return e}function dt(){var t,r,n,a,s,c;t=Je;r=pt();if(r!==i){n=kt();if(n!==i){if(e.charCodeAt(Je)===44){a=o;Je++}else{a=i;if(tt===0){lt(u)}}if(a!==i){s=kt();if(s!==i){c=dt();if(c!==i){Ze=t;r=l(r,c);t=r}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}if(t===i){t=Je;r=pt();if(r!==i){Ze=t;r=f(r)}t=r}return t}function pt(){var t,r,n,a,s,l,f,y,_,b,x,k,S,T;t=Je;if(e.charCodeAt(Je)===91){r=c;Je++}else{r=i;if(tt===0){lt(d)}}if(r!==i){n=kt();if(n!==i){a=ht();if(a!==i){s=kt();if(s!==i){if(e.charCodeAt(Je)===44){l=o;Je++}else{l=i;if(tt===0){lt(u)}}if(l!==i){f=kt();if(f!==i){y=ht();if(y!==i){_=kt();if(_!==i){if(e.charCodeAt(Je)===93){b=p;Je++}else{b=i;if(tt===0){lt(h)}}if(b!==i){x=kt();if(x!==i){if(e.charCodeAt(Je)===62){k=m;Je++}else{k=i;if(tt===0){lt(g)}}if(k!==i){S=kt();if(S!==i){T=pt();if(T!==i){Ze=t;r=v(a,y,T);t=r}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}if(t===i){t=ht()}return t}function ht(){var e,t,r,n;e=Je;t=mt();if(t!==i){r=[];n=yt();if(n!==i){while(n!==i){r.push(n);n=yt()}}else{r=i}if(r!==i){Ze=e;t=y(t,r);e=t}else{Je=e;e=i}}else{Je=e;e=i}if(e===i){e=Je;t=mt();if(t!==i){Ze=e;t=_(t)}e=t}return e}function mt(){var t,r,n,a,s;t=Je;if(e.charCodeAt(Je)===40){r=b;Je++}else{r=i;if(tt===0){lt(x)}}if(r!==i){n=dt();if(n!==i){if(e.charCodeAt(Je)===41){a=k;Je++}else{a=i;if(tt===0){lt(S)}}if(a!==i){Ze=t;r=T(n);t=r}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}if(t===i){t=Je;if(e.charCodeAt(Je)===64){r=E;Je++}else{r=i;if(tt===0){lt(A)}}if(r!==i){n=_t();if(n!==i){if(e.charCodeAt(Je)===58){a=O;Je++}else{a=i;if(tt===0){lt(M)}}if(a!==i){s=vt();if(s!==i){Ze=t;r=w(n,s);t=r}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}if(t===i){t=Je;r=gt();if(r!==i){if(e.charCodeAt(Je)===58){n=O;Je++}else{n=i;if(tt===0){lt(M)}}if(n!==i){a=vt();if(a!==i){Ze=t;r=L(r,a);t=r}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}if(t===i){t=Je;r=bt();if(r!==i){if(e.charCodeAt(Je)===58){n=O;Je++}else{n=i;if(tt===0){lt(M)}}if(n!==i){a=vt();if(a!==i){Ze=t;r=N(r,a);t=r}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}if(t===i){t=Je;r=vt();if(r!==i){Ze=t;r=C(r)}t=r;if(t===i){t=Je;r=_t();if(r!==i){Ze=t;r=R(r)}t=r}}}}}return t}function gt(){var t;if(e.substr(Je,4)===I){t=I;Je+=4}else{t=i;if(tt===0){lt(D)}}if(t===i){if(e.substr(Je,6)===U){t=U;Je+=6}else{t=i;if(tt===0){lt(P)}}if(t===i){if(e.substr(Je,4)===z){t=z;Je+=4}else{t=i;if(tt===0){lt(F)}}if(t===i){if(e.substr(Je,3)===j){t=j;Je+=3}else{t=i;if(tt===0){lt(Y)}}if(t===i){if(e.substr(Je,4)===$){t=$;Je+=4}else{t=i;if(tt===0){lt(q)}}if(t===i){if(e.substr(Je,4)===W){t=W;Je+=4}else{t=i;if(tt===0){lt(H)}}if(t===i){if(e.substr(Je,4)===X){t=X;Je+=4}else{t=i;if(tt===0){lt(G)}}if(t===i){if(e.substr(Je,5)===V){t=V;Je+=5}else{t=i;if(tt===0){lt(B)}}if(t===i){if(e.substr(Je,4)===J){t=J;Je+=4}else{t=i;if(tt===0){lt(Z)}}if(t===i){if(e.substr(Je,5)===Q){t=Q;Je+=5}else{t=i;if(tt===0){lt(K)}}}}}}}}}}}return t}function vt(){var t;if(e.substr(Je,9)===ee){t=ee;Je+=9}else{t=i;if(tt===0){lt(te)}}if(t===i){if(e.substr(Je,7)===re){t=re;Je+=7}else{t=i;if(tt===0){lt(ne)}}if(t===i){if(e.substr(Je,5)===ie){t=ie;Je+=5}else{t=i;if(tt===0){lt(ae)}}if(t===i){if(e.substr(Je,8)===se){t=se;Je+=8}else{t=i;if(tt===0){lt(oe)}}if(t===i){if(e.substr(Je,5)===ue){t=ue;Je+=5}else{t=i;if(tt===0){lt(le)}}if(t===i){if(e.substr(Je,7)===fe){t=fe;Je+=7}else{t=i;if(tt===0){lt(ce)}}if(t===i){if(e.substr(Je,8)===de){t=de;Je+=8}else{t=i;if(tt===0){lt(pe)}}if(t===i){if(e.substr(Je,5)===he){t=he;Je+=5}else{t=i;if(tt===0){lt(me)}}if(t===i){if(e.substr(Je,10)===ge){t=ge;Je+=10}else{t=i;if(tt===0){lt(ve)}}if(t===i){if(e.substr(Je,9)===ye){t=ye;Je+=9}else{t=i;if(tt===0){lt(_e)}}if(t===i){if(e.substr(Je,8)===be){t=be;Je+=8}else{t=i;if(tt===0){lt(xe)}}if(t===i){if(e.substr(Je,9)===ke){t=ke;Je+=9}else{t=i;if(tt===0){lt(Se)}}if(t===i){if(e.substr(Je,10)===Te){t=Te;Je+=10}else{t=i;if(tt===0){lt(Ee)}}if(t===i){if(e.substr(Je,10)===Ae){t=Ae;Je+=10}else{t=i;if(tt===0){lt(Oe)}}if(t===i){if(e.substr(Je,9)===Me){t=Me;Je+=9}else{t=i;if(tt===0){lt(we)}}if(t===i){if(e.substr(Je,8)===Le){t=Le;Je+=8}else{t=i;if(tt===0){lt(Ne)}}if(t===i){if(e.substr(Je,9)===Ce){t=Ce;Je+=9}else{t=i;if(tt===0){lt(Re)}}if(t===i){if(e.substr(Je,8)===Ie){t=Ie;Je+=8}else{t=i;if(tt===0){lt(De)}}if(t===i){if(e.substr(Je,9)===Ue){t=Ue;Je+=9}else{t=i;if(tt===0){lt(Pe)}}}}}}}}}}}}}}}}}}}}return t}function yt(){var t,r,n,a;t=Je;if(e.charCodeAt(Je)===91){r=c;Je++}else{r=i;if(tt===0){lt(d)}}if(r!==i){n=xt();if(n!==i){if(e.charCodeAt(Je)===93){a=p;Je++}else{a=i;if(tt===0){lt(h)}}if(a!==i){Ze=t;r=ze(n);t=r}else{Je=t;t=i}}else{Je=t;t=i}}else{Je=t;t=i}return t}function _t(){var t,r,n;t=Je;r=[];if(Fe.test(e.charAt(Je))){n=e.charAt(Je);Je++}else{n=i;if(tt===0){lt(je)}}if(n!==i){while(n!==i){r.push(n);if(Fe.test(e.charAt(Je))){n=e.charAt(Je);Je++}else{n=i;if(tt===0){lt(je)}}}}else{r=i}if(r!==i){Ze=t;r=Ye(r)}t=r;return t}function bt(){var t,r,n;t=Je;r=[];if($e.test(e.charAt(Je))){n=e.charAt(Je);Je++}else{n=i;if(tt===0){lt(qe)}}if(n!==i){while(n!==i){r.push(n);if($e.test(e.charAt(Je))){n=e.charAt(Je);Je++}else{n=i;if(tt===0){lt(qe)}}}}else{r=i}if(r!==i){Ze=t;r=We(r)}t=r;return t}function xt(){var t,r,n;t=Je;r=[];if(He.test(e.charAt(Je))){n=e.charAt(Je);Je++}else{n=i;if(tt===0){lt(Xe)}}if(n!==i){while(n!==i){r.push(n);if(He.test(e.charAt(Je))){n=e.charAt(Je);Je++}else{n=i;if(tt===0){lt(Xe)}}}}else{r=i}if(r!==i){Ze=t;r=Ge(r)}t=r;return t}function kt(){var t,r;t=[];if(Ve.test(e.charAt(Je))){r=e.charAt(Je);Je++}else{r=i;if(tt===0){lt(Be)}}while(r!==i){t.push(r);if(Ve.test(e.charAt(Je))){r=e.charAt(Je);Je++}else{r=i;if(tt===0){lt(Be)}}}return t}rt=s();if(rt!==i&&Je===e.length){return rt}else{if(rt!==i&&Je<e.length){lt({type:"end",description:"end of input"})}throw ft(null,et,Ke<e.length?e.charAt(Ke):null,Ke<e.length?ut(Ke,Ke+1):ut(Ke,Ke))}}return{SyntaxError:t,parse:r}}()},Wwtv:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)};var i=r("ZAUf");var a=r("Py5Z");var s=r("V22v");var o=r("YBv9");var u=r("jGoH");var l=r("MtYt");var f=r("7YRp");var c=function(e){n(t,e);function t(t,r,n){var i=this;e.call(this,t,r,n);this._config=this._initConfig(t.config,r);this._children=t.layers.map(function(e,t){return l.buildModel(e,i,i.name("layer_"+t))})}t.prototype._initConfig=function(e,t){return i.mergeDeep(i.duplicate(a.defaultConfig),e,t?t.config():{})};t.prototype.has=function(e){return false};t.prototype.children=function(){return this._children};t.prototype.isOrdinalScale=function(e){return this._children[0].isOrdinalScale(e)};t.prototype.dataTable=function(){return this._children[0].dataTable()};t.prototype.fieldDef=function(e){return null};t.prototype.stack=function(){return null};t.prototype.parseData=function(){this._children.forEach(function(e){e.parseData()});this.component.data=s.parseLayerData(this)};t.prototype.parseSelectionData=function(){};t.prototype.parseLayoutData=function(){this._children.forEach(function(e,t){e.parseLayoutData()});this.component.layout=o.parseLayerLayout(this)};t.prototype.parseScale=function(){var e=this;var t=this.component.scale={};this._children.forEach(function(r){r.parseScale();if(true){i.keys(r.component.scale).forEach(function(n){var a=r.component.scale[n];if(!a){return}var s=t[n];if(s&&s.main){var o=s.main.domain;var u=a.main.domain;if(i.isArray(o)){if(i.isArray(a.main.domain)){s.main.domain=o.concat(u)}else{e.addWarning("custom domain scale cannot be unioned with default field-based domain")}}else{var l=f.isUnionedDomain(o)?o.fields:[o];if(i.isArray(u)){e.addWarning("custom domain scale cannot be unioned with default field-based domain")}var c=f.isDataRefDomain(u)?l.concat([u]):f.isUnionedDomain(u)?l.concat(u.fields):l;c=i.unique(c,i.hash);if(c.length>1){s.main.domain={fields:c}}else{s.main.domain=c[0]}}s.colorLegend=s.colorLegend?s.colorLegend:a.colorLegend;s.binColorLegend=s.binColorLegend?s.binColorLegend:a.binColorLegend}else{t[n]=a}i.vals(a).forEach(function(t){var n=t.name.substr(r.name("").length);var i=e.scaleName(n);r.renameScale(t.name,i);t.name=i});delete a[n]})}})};t.prototype.parseMark=function(){this._children.forEach(function(e){e.parseMark()})};t.prototype.parseAxis=function(){var e=this.component.axis={};this._children.forEach(function(t){t.parseAxis();if(true){i.keys(t.component.axis).forEach(function(r){if(!e[r]){e[r]=t.component.axis[r]}})}})};t.prototype.parseAxisGroup=function(){return null};t.prototype.parseGridGroup=function(){return null};t.prototype.parseLegend=function(){var e=this.component.legend={};this._children.forEach(function(t){t.parseLegend();if(true){i.keys(t.component.legend).forEach(function(r){if(!e[r]){e[r]=t.component.legend[r]}})}})};t.prototype.assembleParentGroupProperties=function(){return null};t.prototype.assembleData=function(e){s.assembleData(this,e);this._children.forEach(function(t){t.assembleData(e)});return e};t.prototype.assembleLayout=function(e){this._children.forEach(function(t){t.assembleLayout(e)});return o.assembleLayout(this,e)};t.prototype.assembleMarks=function(){return i.flatten(this._children.map(function(e){return e.assembleMarks()}))};t.prototype.channels=function(){return[]};t.prototype.mapping=function(){return null};t.prototype.isLayer=function(){return true};t.prototype.compatibleSource=function(e){var t=this.data();var r=e.component.data;var n=!r.source||t&&t.url===r.source.url;return n};return t}(u.Model);t.LayerModel=c},XCv7:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("T3kM"),s=r("NQGN"),o=r("Zrjw"),u=r("dhxB");function l(e,t,r){this._graph=e;this._name=t;this._data=[];this._source=null;this._facet=r;this._input=a.create();this._output=null;this._indexes={};this._indexFields=[];this._inputNode=null;this._outputNode=null;this._pipeline=null;this._collector=null;this._mutates=false}var f=l.prototype;f.name=function(e){if(!arguments.length)return this._name;return this._name=e,this};f.source=function(e){if(!arguments.length)return this._source;return this._source=this._graph.data(e)};f.insert=function(e){this._input.add=this._input.add.concat(e.map(o.ingest));return this};f.remove=function(e){var t=this._data.filter(e);this._input.rem=this._input.rem.concat(t);return this};f.update=function(e,t,r){var n=this._input.mod,i=o.idMap(n);this._input.fields[t]=1;this._data.filter(e).forEach(function(e){var a=e[t],s=r(e);if(a!==s){o.set(e,t,s);if(i[e._id]!==1){n.push(e);i[e._id]=1}}});return this};f.values=function(e){if(!arguments.length)return this._collector.data();this._input.rem=this._data.slice();if(e){this.insert(e)}return this};f.mutates=function(e){if(!arguments.length)return this._mutates;this._mutates=this._mutates||e;return this};f.last=function(){return this._output};f.fire=function(e){if(e)this._input=e;this._graph.propagate(this._input,this._pipeline[0]);return this};f.pipeline=function(e){if(!arguments.length)return this._pipeline;var t=this._graph,r;e.unshift(this._inputNode=c(this));r=t.preprocess(e);if(r.router){e.push(r.collector=new s(t))}e.push(this._outputNode=d(this));this._collector=r.collector;this._mutates=!!r.mutates;t.connect(this._pipeline=e);return this};f.synchronize=function(){this._graph.synchronize(this._pipeline);return this};f.getIndex=function(e){var t=this.values(),r=this._indexes,i=this._indexFields,a=n.$(e),s,u,l,f;if(!r[e]){r[e]=s={};i.push(e);for(u=0,l=t.length;u<l;++u){f=a(t[u]);s[f]=(s[f]||0)+1;o.prev_init(t[u])}}return r[e]};f.listener=function(){return p(this).addListener(this._inputNode)};f.addListener=function(e){if(e instanceof l){this._collector.addListener(e.listener())}else{this._outputNode.addListener(e)}return this};f.removeListener=function(e){this._outputNode.removeListener(e)};f.listeners=function(e){return(e?this._collector:this._outputNode).listeners()};function c(e){var t=new u(e._graph).router(true).collector(true);t.data=function(){return e._data};t.evaluate=function(t){i.debug(t,["input",e._name]);var r=e._input,n=a.create(t),s;for(s in r.fields){n.fields[s]=1}if(r.rem.length){e._data=o.idFilter(e._data,r.rem)}if(r.add.length){e._data=e._data.concat(r.add)}if(r.sort){e._data.sort(r.sort)}if(t.reflow){r.mod=r.mod.concat(o.idFilter(e._data,r.add,r.mod,r.rem))}e._input=a.create();n.add=r.add;n.mod=r.mod;n.rem=r.rem;n.facet=e._facet;return n};return t}function d(e){var t=new u(e._graph).router(true).reflows(true).collector(true);function r(t){var r=e._indexFields,i,a,s,u,l,f;for(i=0;i<r.length;++i){u=r[i];l=e._indexes[u];s=n.$(u);for(a=0;a<t.add.length;++a){f=s(t.add[a]);o.prev_init(t.add[a]);l[f]=(l[f]||0)+1}for(a=0;a<t.rem.length;++a){f=s(t.rem[a]);l[f]=(l[f]||0)-1}for(a=0;a<t.mod.length;++a){f=s(t.mod[a]._prev);l[f]=(l[f]||0)-1;f=s(t.mod[a]);l[f]=(l[f]||0)+1}}}t.data=function(){return e._collector?e._collector.data():e._data};t.evaluate=function(t){i.debug(t,["output",e._name]);r(t);var n=a.create(t,true);if(e._facet){e._facet.values=e.values();t.facet=null}e._output=t;n.data[e._name]=1;return n};return t}function p(e){var t=new u(e._graph).router(true);t.evaluate=function(t){if(e.mutates()){var r=e._srcMap||(e._srcMap={}),n=a.create(t);n.add=t.add.map(function(e){return r[e._id]=o.derive(e)});n.mod=t.mod.map(function(e){return o.rederive(e,r[e._id])});n.rem=t.rem.map(function(e){var t=r[e._id];return r[e._id]=null,t});return e._input=n}else{return e._input=t}};return t}e.exports=l},XL1Y:function(e,t,r){"use strict";var n=r("P/aK");var i=r("o+e1");var a=r("MtYt");var s;(function(e){function t(){return"rect"}e.markType=t;function r(e){var t={};var r=e.config();t.xc=s(e.encoding().x,e.scaleName(n.X),r);t.yc=o(e.encoding().y,e.scaleName(n.Y),r);if(r.mark.orient==="horizontal"){t.width=u(e.encoding().size,e.scaleName(n.SIZE),r,(e.scale(n.X)||{}).bandSize);t.height={value:r.mark.tickThickness}}else{t.width={value:r.mark.tickThickness};t.height=u(e.encoding().size,e.scaleName(n.SIZE),r,(e.scale(n.Y)||{}).bandSize)}a.applyColorAndOpacity(t,e);return t}e.properties=r;function s(e,t,r){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}else if(e.value){return{value:e.value}}}return{value:r.scale.bandSize/2}}function o(e,t,r){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}else if(e.value){return{value:e.value}}}return{value:r.scale.bandSize/2}}function u(e,t,r,n){if(e){if(e.field){return{scale:t,field:e.field}}else if(e.value!==undefined){return{value:e.value}}}if(r.mark.tickSize){return{value:r.mark.tickSize}}var i=n!==undefined?n:r.scale.bandSize;return{value:i/1.5}}function l(e){return undefined}e.labels=l})(s=t.tick||(t.tick={}))},XVii:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("zsFm"),s=a.Node,o=a.Dependencies,u=r("2pdF").bound;var l={};function f(e,t,r){var n=t.def.properties||{},i=n.enter,a=n.update,u=n.exit;s.prototype.init.call(this,e);this._mark=t;this._builder=r;var l=this._scales=[];if(i)l.push.apply(l,i.scales);if(a){this.dependency(o.DATA,a.data);this.dependency(o.SIGNALS,a.signals);this.dependency(o.FIELDS,a.fields);this.dependency(o.SCALES,a.scales);l.push.apply(l,a.scales)}if(u)l.push.apply(l,u.scales);return this.mutates(true)}var c=f.prototype=new s;c.evaluate=function(e){i.debug(e,["encoding",this._mark.def.type]);var t=this._graph,n=this._mark.def.properties||{},a=this._mark.items,s=n.enter,u=n.update,f=n.exit,c=e.dirty,h=t.predicates(),m=e.request,g=this._mark.group,v=g&&(g.mark.axis||g.mark.legend),y=l,_=l,b,x,k,S;if(m&&!v){if((S=n[m])&&e.mod.length){y=S.data?t.values(o.DATA,S.data):null;_=S.signals?t.values(o.SIGNALS,S.signals):null;for(b=0,x=e.mod.length;b<x;++b){k=e.mod[b];p.call(this,S,k,e.trans,y,_,h,c)}}return e}y=d(o.DATA,t,e,n);_=d(o.SIGNALS,t,e,n);for(b=0,x=e.rem.length;b<x;++b){k=e.rem[b];if(f)p.call(this,f,k,e.trans,y,_,h,c);if(e.trans&&!f)e.trans.interpolate(k,l);else if(!e.trans)a.pop()}var T=r("Vp7n").STATUS.UPDATE;for(b=0,x=e.add.length;b<x;++b){k=e.add[b];if(s)p.call(this,s,k,e.trans,y,_,h,c);if(u)p.call(this,u,k,e.trans,y,_,h,c);k.status=T}if(u){for(b=0,x=e.mod.length;b<x;++b){k=e.mod[b];p.call(this,u,k,e.trans,y,_,h,c)}}return e};function d(e,t,r,n){var i,a,s,o=r.add.length;if((i=n.enter)&&(a=i[e]).length&&o){s=t.values(e,a,s=s||{})}if((i=n.exit)&&(a=i[e]).length&&r.rem.length){s=t.values(e,a,s=s||{})}if((i=n.update)&&(a=i[e]).length&&(o||r.mod.length)){s=t.values(e,a,s=s||{})}return s||l}function p(e,t,r,n,i,a,s){var o=e.encode,u=t._dirty,l=o.call(o,t,t.mark.group||t,r,n,i,a);t._dirty=l||u;if(l&&!u)s.push(t)}c.reevaluate=function(e){var t=this._mark.def,r=t.properties||{},i=n.isFunction(t.from)||t.orient||e.request||s.prototype.reevaluate.call(this,e);return i||(r.update?h.call(this):false)};function h(){var e=this._mark.def.properties.update.nested,t=this._builder,r=0,n=0,i=e.length,a,s,o;for(;n<i;++n){a=e[n];if(a.scale)continue;for(;r<a.level;++r){t=t.parent();s=t.ds()}o=(a.group?t.encoder():s.last())._stamp;if(o>this._stamp)return true}return false}f.update=function(e,t,r,i,a){i=n.array(i);var s=e.predicates(),l=e.values(o.DATA),f=e.values(o.SIGNALS),c,d,h,m,g;for(c=0,d=i.length;c<d;++c){h=i[c];m=h.mark.def.properties;g=m&&m[r];if(g){p.call(null,g,h,t,l,f,s,a);u.item(h)}}};e.exports=f},YBv9:function(e,t,r){"use strict";var n=r("P/aK");var i=r("x6Fv");var a=r("Fw/k");var s=r("ZAUf");var o=r("j8cM");var u=r("wKIX");function l(e,t){var r=e.component.layout;if(!r.width&&!r.height){return t}if(true){var n=s.keys(s.extend(r.width.distinct,r.height.distinct));var a=r.width.formula.concat(r.height.formula).map(function(e){return s.extend({type:"formula"},e)});return[n.length>0?{name:e.dataName(i.LAYOUT),source:e.dataTable(),transform:[{type:"aggregate",summarize:n.map(function(e){return{field:e,ops:["distinct"]}})}].concat(a)}:{name:e.dataName(i.LAYOUT),values:[{}],transform:a}]}}t.assembleLayout=l;function f(e){return{width:c(e,n.X),height:c(e,n.Y)}}t.parseUnitLayout=f;function c(e,t){var r=e.config().cell;var i=t===n.X?r.width:r.height;return{distinct:y(e,t),formula:[{field:e.channelSizeName(t),expr:d(e,t,i)}]}}function d(e,t,r){if(e.scale(t)){if(e.isOrdinalScale(t)){var i=e.scale(t);return"("+_(e,t)+" + "+i.padding+") * "+i.bandSize}else{return r+""}}else{if(e.mark()===o.TEXT&&t===n.X){return e.config().scale.textBandWidth+""}return e.config().scale.bandSize+""}}function p(e){return{width:h(e,n.COLUMN),height:h(e,n.ROW)}}t.parseFacetLayout=p;function h(e,t){var r=e.child().component.layout;var i=t===n.ROW?"height":"width";var a=r[i];if(true){var o=s.extend(y(e,t),a.distinct);var u=a.formula.concat([{field:e.channelSizeName(t),expr:m(e,t,e.child().channelSizeName(t))}]);delete r[i];return{distinct:o,formula:u}}}function m(e,t,r){var n=e.scale(t);if(e.has(t)){return"(datum."+r+" + "+n.padding+")"+" * "+_(e,t)}else{return"datum."+r+" + "+e.config().facet.scale.padding}}function g(e){return{width:v(e,n.X),height:v(e,n.Y)}}t.parseLayerLayout=g;function v(e,t){if(true){var r=e.children()[0].component.layout;var i=t===n.Y?"height":"width";var a=r[i];var s=a.distinct;var o=[{field:e.channelSizeName(t),expr:a.formula[0].expr}];e.children().forEach(function(e){delete e.component.layout[i]});return{distinct:s,formula:o}}}function y(e,t){if(e.has(t)&&e.isOrdinalScale(t)){var r=e.scale(t);if(r.type===a.ScaleType.ORDINAL&&!(r.domain instanceof Array)){var n=e.field(t);var i={};i[n]=true;return i}}return{}}function _(e,t){var r=e.scale(t);if(r.domain instanceof Array){return r.domain.length}var n=e.fieldDef(t).timeUnit;var i=n?u.rawDomain(n,t):null;return i!==null?i.length:e.field(t,{datum:true,prefn:"distinct_"})}},YExv:function(e,t,r){var n=r("tKPL");e.exports=function(e,t,r,n){var a,s=null,o=0,u=0,l=0,f=0,c,d,p,h;if(r==null)r=0;if(n==null)n=0;e.beginPath();for(var m=0,g=t.length;m<g;++m){a=t[m];switch(a[0]){case"l":o+=a[1];u+=a[2];e.lineTo(o+r,u+n);break;case"L":o=a[1];u=a[2];e.lineTo(o+r,u+n);break;case"h":o+=a[1];e.lineTo(o+r,u+n);break;case"H":o=a[1];e.lineTo(o+r,u+n);break;case"v":u+=a[1];e.lineTo(o+r,u+n);break;case"V":u=a[1];e.lineTo(o+r,u+n);break;case"m":o+=a[1];u+=a[2];e.moveTo(o+r,u+n);break;case"M":o=a[1];u=a[2];e.moveTo(o+r,u+n);break;case"c":c=o+a[5];d=u+a[6];l=o+a[3];f=u+a[4];e.bezierCurveTo(o+a[1]+r,u+a[2]+n,l+r,f+n,c+r,d+n);o=c;u=d;break;case"C":o=a[5];u=a[6];l=a[3];f=a[4];e.bezierCurveTo(a[1]+r,a[2]+n,l+r,f+n,o+r,u+n);break;case"s":c=o+a[3];d=u+a[4];l=2*o-l;f=2*u-f;e.bezierCurveTo(l+r,f+n,o+a[1]+r,u+a[2]+n,c+r,d+n);l=o+a[1];f=u+a[2];o=c;u=d;break;case"S":c=a[3];d=a[4];l=2*o-l;f=2*u-f;e.bezierCurveTo(l+r,f+n,a[1]+r,a[2]+n,c+r,d+n);o=c;u=d;l=a[1];f=a[2];break;case"q":c=o+a[3];d=u+a[4];l=o+a[1];f=u+a[2];e.quadraticCurveTo(l+r,f+n,c+r,d+n);o=c;u=d;break;case"Q":c=a[3];d=a[4];e.quadraticCurveTo(a[1]+r,a[2]+n,c+r,d+n);o=c;u=d;l=a[1];f=a[2];break;case"t":c=o+a[1];d=u+a[2];if(s[0].match(/[QqTt]/)===null){l=o;f=u}else if(s[0]==="t"){l=2*o-p;f=2*u-h}else if(s[0]==="q"){l=2*o-l;f=2*u-f}p=l;h=f;e.quadraticCurveTo(l+r,f+n,c+r,d+n);o=c;u=d;l=o+a[1];f=u+a[2];break;case"T":c=a[1];d=a[2];l=2*o-l;f=2*u-f;e.quadraticCurveTo(l+r,f+n,c+r,d+n);o=c;u=d;break;case"a":i(e,o+r,u+n,[a[1],a[2],a[3],a[4],a[5],a[6]+o+r,a[7]+u+n]);o+=a[6];u+=a[7];break;case"A":i(e,o+r,u+n,[a[1],a[2],a[3],a[4],a[5],a[6]+r,a[7]+n]);o=a[6];u=a[7];break;case"z":case"Z":e.closePath();break}s=a}};function i(e,t,r,i){var a=n.segments(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,r);for(var s=0;s<a.length;++s){var o=n.bezier(a[s]);e.bezierCurveTo.apply(e,o)}}},YGNx:function(e,t,r){var n=r("zF6n"),i=r("ggRp"),a=r("nIY2"),s=r("GXhC").time;function o(e,t){var r=t&&t.type||"json";e=a[r](e,t);if(t&&t.parse)u(e,t.parse);return e}function u(e,t){var r,a,o,u,l,f,c=e.length;t=t==="auto"?i.inferAll(e):n.duplicate(t);r=n.keys(t);a=r.map(function(e){var r=t[e];if(r&&r.indexOf("date:")===0){var n=r.split(/:(.+)?/,2),a=n[1];if(a[0]==="'"&&a[a.length-1]==="'"||a[0]==='"'&&a[a.length-1]==='"'){a=a.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+a)}a=s(a);return function(e){return a.parse(e)}}if(!i.parsers[r]){throw Error("Illegal format pattern: "+e+":"+r)}return i.parsers[r]});for(u=0,f=r.length;u<c;++u){o=e[u];for(l=0;l<f;++l){o[r[l]]=a[l](o[r[l]])}}i.annotation(e,t)}o.formats=a;e.exports=o},"Yn+d":function(e,t,r){var n=r("T3kM"),i=r("dhxB"),a=i.prototype;function s(e,t,r){a.init.call(this,e);this._name=t;this._value=r;this._verbose=false;this._handlers=[];return this}var o=s.prototype=Object.create(a);o.constructor=s;o.name=function(){return this._name};o.value=function(e){if(!arguments.length)return this._value;return this._value=e,this};o.values=o.value;o.verbose=function(e){if(!arguments.length)return this._verbose;return this._verbose=!!e,this};o.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate};o.fire=function(e){if(!e)e=n.create(null,true);e.signals[this._name]=1;this._graph.propagate(e,this)};o.on=function(e){var t=this,r=new i(this._graph);r.evaluate=function(r){e(t.name(),t.value());return r};this._handlers.push({handler:e,node:r});return this.addListener(r)};o.off=function(e){var t=this._handlers,r,n;for(r=t.length;--r>=0;){if(!e||t[r].handler===e){n=t.splice(r,1)[0];this.removeListener(n.node)}}return this};e.exports=s},YsQl:function(e,t,r){var n=r("zF6n"),i=e.exports;i.repeat=function(e,t){var r=Array(t),n;for(n=0;n<t;++n)r[n]=e;return r};i.zeros=function(e){return i.repeat(0,e)};i.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r==Infinity)throw new Error("Infinite range");var n=[],i=-1,a;if(r<0)while((a=e+r*++i)>t)n.push(a);else while((a=e+r*++i)<t)n.push(a);return n};i.random={};i.random.uniform=function(e,t){if(t===undefined){t=e===undefined?1:e;e=0}var r=t-e;var n=function(){return e+r*Math.random()};n.samples=function(e){return i.zeros(e).map(n)};n.pdf=function(n){return n>=e&&n<=t?1/r:0};n.cdf=function(n){return n<e?0:n>t?1:(n-e)/r};n.icdf=function(t){return t>=0&&t<=1?e+t*r:NaN};return n};i.random.integer=function(e,t){if(t===undefined){t=e;e=0}var r=t-e;var n=function(){return e+Math.floor(r*Math.random())};n.samples=function(e){return i.zeros(e).map(n)};n.pdf=function(n){return n===Math.floor(n)&&n>=e&&n<t?1/r:0};n.cdf=function(n){var i=Math.floor(n);return i<e?0:i>=t?1:(i-e+1)/r};n.icdf=function(t){return t>=0&&t<=1?e-1+Math.floor(t*r):NaN};return n};i.random.normal=function(e,t){e=e||0;t=t||1;var r;var n=function(){var n=0,i=0,a,s;if(r!==undefined){n=r;r=undefined;return n}do{n=Math.random()*2-1;i=Math.random()*2-1;a=n*n+i*i}while(a===0||a>1);s=Math.sqrt(-2*Math.log(a)/a);r=e+i*s*t;return e+n*s*t};n.samples=function(e){return i.zeros(e).map(n)};n.pdf=function(r){var n=Math.exp(Math.pow(r-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*n};n.cdf=function(r){var n,i=(r-e)/t,a=Math.abs(i);if(a>37){n=0}else{var s,o=Math.exp(-a*a/2);if(a<7.07106781186547){s=.0352624965998911*a+.700383064443688;s=s*a+6.37396220353165;s=s*a+33.912866078383;s=s*a+112.079291497871;s=s*a+221.213596169931;s=s*a+220.206867912376;n=o*s;s=.0883883476483184*a+1.75566716318264;s=s*a+16.064177579207;s=s*a+86.7807322029461;s=s*a+296.564248779674;s=s*a+637.333633378831;s=s*a+793.826512519948;s=s*a+440.413735824752;n=n/s}else{s=a+.65;s=a+4/s;s=a+3/s;s=a+2/s;s=a+1/s;n=o/s/2.506628274631}}return i>0?1-n:n};n.icdf=function(r){if(r<=0||r>=1)return NaN;var n=2*r-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(n,2))/2,s=Math.log(1-n*n)/i,o=(n>0?1:-1)*Math.sqrt(Math.sqrt(a*a-s)-a);return e+t*Math.SQRT2*o};return n};i.random.bootstrap=function(e,t){var r=e.filter(n.isValid),a=r.length,s=t?i.random.normal(0,t):null;var o=function(){return r[~~(Math.random()*a)]+(s?s():0)};o.samples=function(e){return i.zeros(e).map(o)};return o}},YvtE:function(e,t){e.exports=function(e,t,r,n){if(e[r]!==undefined){return e[r]}else if(t!==undefined&&t[r]!==undefined){return t[r]}else if(n!==undefined){return n}return undefined}},YzNj:function(e,t,r){e.exports={version:"__VERSION__",dataflow:r("zsFm"),parse:r("UaGl"),scene:{Bounder:r("rnWk"),Builder:r("Vp7n"),Encoder:r("XVii"),GroupBuilder:r("BB2X"),visit:r("Qpkz")},transforms:r("C8zq"),Transform:r("4JPs"),BatchTransform:r("acp7"),Parameter:r("fRRI"),schema:r("CiyH"),config:r("8NMF"),util:r("v0Fq"),logging:r("J731"),debug:r("J731").debug}},Z8XL:function(e,t,r){var n=r("cwb4");var i=function(e,t){var r=i.topojson;if(r==null){throw Error("TopoJSON library not loaded.")}var a=n(e,t),s;if(t&&t.feature){if(s=a.objects[t.feature]){return r.feature(a,s).features}else{throw Error("Invalid TopoJSON object: "+t.feature)}}else if(t&&t.mesh){if(s=a.objects[t.mesh]){return[r.mesh(a,a.objects[t.mesh])]}else{throw Error("Invalid TopoJSON object: "+t.mesh)}}else{throw Error("Missing TopoJSON feature or mesh parameter.")}};i.topojson=r("nTOs");e.exports=i},ZAUf:function(e,t,r){"use strict";var n=r("EbtV");var i=r("zF6n");t.keys=i.keys;t.extend=i.extend;t.duplicate=i.duplicate;t.isArray=i.isArray;t.vals=i.vals;t.truncate=i.truncate;t.toMap=i.toMap;t.isObject=i.isObject;t.isString=i.isString;t.isNumber=i.isNumber;t.isBoolean=i.isBoolean;var a=r("zF6n");var s=r("YsQl");t.range=s.range;var o=r("QSMf");t.has=o.has;var u=r("P/aK");t.Channel=u.Channel;var l=r("zF6n");function f(e,t){var r={};t.forEach(function(t){if(e.hasOwnProperty(t)){r[t]=e[t]}});return r}t.pick=f;function c(e,t){var r=a.duplicate(e);t.forEach(function(e){delete r[e]});return r}t.omit=c;function d(e){if(l.isString(e)||l.isNumber(e)||l.isBoolean(e)){return String(e)}return n(e)}t.hash=d;function p(e,t){return e.indexOf(t)>-1}t.contains=p;function h(e,t){return e.filter(function(e){return!p(t,e)})}t.without=h;function m(e,t){return e.concat(h(t,e))}t.union=m;function g(e,t,r){if(e.forEach){e.forEach.call(r,t)}else{for(var n in e){if(e.hasOwnProperty(n)){t.call(r,e[n],n,e)}}}}t.forEach=g;function v(e,t,r,n){if(e.reduce){return e.reduce.call(n,t,r)}else{for(var i in e){if(e.hasOwnProperty(i)){r=t.call(n,r,e[i],i,e)}}return r}}t.reduce=v;function y(e,t,r){if(e.map){return e.map.call(r,t)}else{var n=[];for(var i in e){if(e.hasOwnProperty(i)){n.push(t.call(r,e[i],i,e))}}return n}}t.map=y;function _(e,t){var r=0;for(var n=0;n<e.length;n++){if(t(e[n],n,r++)){return true}}return false}t.some=_;function b(e,t){var r=0;for(var n=0;n<e.length;n++){if(!t(e[n],n,r++)){return false}}return true}t.every=b;function x(e){return[].concat.apply([],e)}t.flatten=x;function k(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}for(var n=0;n<t.length;n++){e=S(e,t[n])}return e}t.mergeDeep=k;function S(e,t){if(typeof t!=="object"||t===null){return e}for(var r in t){if(!t.hasOwnProperty(r)){continue}if(t[r]===undefined){continue}if(typeof t[r]!=="object"||t[r]===null){e[r]=t[r]}else if(typeof e[r]!=="object"||e[r]===null){e[r]=k(t[r].constructor===Array?[]:{},t[r])}else{k(e[r],t[r])}}return e}var T=r("prMK");function E(e,t){return T({min:e.min,max:e.max,maxbins:t})}t.getbins=E;function A(e,t){var r=[];var n={},i,a,s;for(a=0,s=e.length;a<s;++a){i=t?t(e[a]):e[a];if(i in n){continue}n[i]=1;r.push(e[a])}return r}t.unique=A;function O(e){console.warn("[VL Warning]",e)}t.warning=O;function M(e){console.error("[VL Error]",e)}t.error=M;function w(e,t){for(var r in e){if(e.hasOwnProperty(r)){if(t[r]&&e[r]&&t[r]!==e[r]){return true}}}return false}t.differ=w},ZE31:function(e,t,r){"use strict";t.defaultLegendConfig={orient:undefined,shortTimeLabels:false}},Zrjw:function(e,t){var r=0;function n(e){e=e===Object(e)?e:{data:e};e._id=++r;if(e._prev)e._prev=null;return e}function i(e,t){t=t||{};for(var r=0,n=e.length;r<n;++r){t[e[r]._id]=1}return t}function a(e,t){t=t||{};for(var r in e){if(r!=="_prev"&&r!=="_id")t[r]=e[r]}return t}e.exports={ingest:n,idMap:i,derive:function(e){return n(a(e))},rederive:function(e,t){return a(e,t)},set:function(e,t,r){return e[t]===r?0:(e[t]=r,1)},prev:function(e){return e._prev||e},prev_init:function(e){if(!e._prev){e._prev={_id:e._id}}},prev_update:function(e){var t=e._prev,r,n;if(t)for(r in e){if(r!=="_prev"&&r!=="_id"){t[r]=(n=e[r])instanceof Object&&n._prev?n._prev:n}}},reset:function(){r=0},idFilter:function(e){var t={};for(var r=arguments.length;--r>0;){i(arguments[r],t)}return e.filter(function(e){return!t[e._id]})}}},ZvZD:function(e,t,r){var n=r("SwAC"),i=r("F3Ub").text,a=r("DbaP"),s=r("FF9f"),o=new n;function u(e,t,r){if(!t.items||!t.items.length)return;var n=t.items,i,o,u,l,f,c,d;for(var p=0,h=n.length;p<h;++p){i=n[p];if(r&&!r.intersects(i.bounds))continue;d=a.value(i.text);if(!d)continue;o=i.opacity==null?1:i.opacity;if(o===0)continue;e.font=a.font(i);e.textAlign=i.align||"left";u=i.x||0;l=i.y||0;if(f=i.radius){c=(i.theta||0)-Math.PI/2;u+=f*Math.cos(c);l+=f*Math.sin(c)}if(i.angle){e.save();e.translate(u,l);e.rotate(i.angle*Math.PI/180);u=l=0}u+=i.dx||0;l+=(i.dy||0)+a.offset(i);if(i.fill&&s.fill(e,i,o)){e.fillText(d,u,l)}if(i.stroke&&s.stroke(e,i,o)){e.strokeText(d,u,l)}if(i.angle)e.restore()}}function l(e,t,r,n,a,s){if(t.fontSize<=0)return false;if(!t.angle)return true;var u=i(t,o,true),l=-t.angle*Math.PI/180,f=Math.cos(l),c=Math.sin(l),d=t.x,p=t.y,h=f*a-c*s+(d-d*f+p*c),m=c*a+f*s+(p-d*c-p*f);return u.contains(h,m)}e.exports={draw:u,pick:s.pick(l)}},acp7:function(e,t,r){var n=r("4JPs").prototype;function i(){this._collector=null}var a=i.prototype=Object.create(n);a.constructor=i;a.init=function(e){n.init.call(this,e);return this.batch(true)};a.transform=function(e,t){return this.batchTransform(e,this._collector.data(),t)};a.batchTransform=function(){};e.exports=i},cM1m:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("j/ps"),s=r("T3kM"),o=r("XCv7"),u=r("NQGN"),l=r("Zrjw"),f=r("Yn+d"),c=r("RXBq");function d(){}var p=d.prototype;p.init=function(){this._stamp=0;this._rank=0;this._data={};this._signals={};this._requestedIndexes={};this.doNotPropagate={}};p.rank=function(){return++this._rank};p.values=function(e,t,r){var i=e===c.SIGNALS?this._signals:this._data,a=t!==undefined?t:n.keys(i),s,o;if(Array.isArray(a)){s=r||{};for(o=0;o<a.length;++o){s[a[o]]=i[a[o]].values()}return s}else{return i[a].values()}};p.dataValues=function(e){return this.values(c.DATA,e)};p.signalValues=function(e){return this.values(c.SIGNALS,e)};p.data=function(e,t,r){var n=this._data;if(!arguments.length){var i=[],a;for(a in n){i.push(n[a])}return i}else if(arguments.length===1){return n[e]}else{return n[e]=new o(this,e,r).pipeline(t)}};p.signal=function(e,t){if(arguments.length===1){var r=this;return Array.isArray(e)?e.map(function(e){return r._signals[e]}):this._signals[e]}else{return this._signals[e]=new f(this,e,t)}};p.signalRef=function(e){if(!Array.isArray(e)){e=n.field(e)}var t=this.signal(e[0]).value();if(e.length>1){for(var r=1,i=e.length;r<i;++r){t=t[e[r]]}}return t};p.requestIndex=function(e,t){var r=this._requestedIndexes,n=r[e]||(r[e]={});return n[t]=true,this};p.buildIndexes=function(){var e=this._requestedIndexes,t=n.keys(e),r,i,a,s,o,u,l,f;for(r=0,i=t.length;r<i;++r){u=this.data(o=t[r]);if(!u)throw Error("Data source "+n.str(o)+" does not exist.");l=n.keys(e[o]);for(a=0,s=l.length;a<s;++a){if((f=l[a])===null)continue;u.getIndex(f);e[o][f]=null}}return this};p.propagate=function(e,t,r,n){var i={},o,u,l,c,d,p,h,m;var g=new a(function(e,t){return e._qrank-t._qrank});if(e.stamp)throw Error("Pulse already has a non-zero stamp.");e.stamp=r||++this._stamp;i[t._id]=e;g.push(t.qrank(true));while(g.size()>0){t=g.peek();m=t instanceof f;e=i[t._id];if(t.rank()!==t.qrank()){g.replace(t.qrank(true))}else{g.pop();i[t._id]=null;o=t._listeners;if(!m||m&&!n){e=this.evaluate(e,t)}if(e!==this.doNotPropagate){if(!e.reflow&&t.reflows()){e=s.create(e,true)}for(p=0,h=o.length;p<h;++p){u=o[p];if((l=i[u._id])!==undefined){if(l===null)throw Error("Already propagated to node.");if(l===e)continue;c=e.add.length||e.mod.length||e.rem.length;d=l.add.length||l.mod.length||l.rem.length;if(c&&d)throw Error("Multiple changeset pulses to same node");i[u._id]=c?e:l;i[u._id].reflow=e.reflow||l.reflow}else{g.push(u.qrank(true));i[u._id]=e}}}}}return this.done(e)};p.done=function(e){i.debug(e,["bookkeeping"]);for(var t in e.data){this.data(t).synchronize()}return this};p.preprocess=function(e){var t=this,r=0,n,i,a,s;for(var o=0;o<e.length;++o){n=e[o];if(n.batch()&&!n._collector){if(i||!a){n=new u(t);e.splice(o,0,n);i=false}else{n._collector=a}}if(s=n.collector())a=n;i=i||n.router()&&!s;r=r||n.mutates();if(n.produces()){e.splice(o+1,0,new u(t));i=false}}return{router:i,collector:a,mutates:r}};p.connect=function(e){var t,r,i,a,s,o,u,l,f,d;for(s=0,o=e.length;s<o;++s){r=e[s];if(r.collector())t=r;i=r.dependency(c.DATA);for(u=0,l=i.length;u<l;++u){if(!(f=this.data(d=i[u]))){throw new Error("Unknown data source "+n.str(d))}f.addListener(t)}a=r.dependency(c.SIGNALS);for(u=0,l=a.length;u<l;++u){if(!(f=this.signal(d=a[u]))){throw new Error("Unknown signal "+n.str(d))}f.addListener(t)}if(s>0)e[s-1].addListener(r)}return e};p.disconnect=function(e){var t,r,n,i,a,s,o,u;for(a=0,s=e.length;a<s;++a){r=e[a];if(r.collector())t=r;n=r.dependency(c.DATA);for(o=0,u=n.length;o<u;++o){this.data(n[o]).removeListener(t)}i=r.dependency(c.SIGNALS);for(o=0,u=i.length;o<u;++o){this.signal(i[o]).removeListener(t)}r.disconnect()}return e};p.synchronize=function(e){var t={},r,n,i,a,s,o,u,f;for(i=0,a=e.length;i<a;++i){r=e[i];if(!r.collector())continue;for(s=0,n=r.data(),o=n.length;s<o;++s){f=(u=n[s])._id;if(t[f])continue;l.prev_update(u);t[f]=1}}return this};p.reevaluate=function(e,t){var r=e.reflow&&t.last()>=e.stamp,n=t.router()||e.add.length||e.rem.length;return n||!r||t.reevaluate(e)};p.evaluate=function(e,t){if(!this.reevaluate(e,t))return e;e=t.evaluate(e);t.last(e.stamp);return e};e.exports=d},cihr:function(e,t,r){"use strict";(function(e){e[e["TOP"]="top"]="TOP";e[e["RIGHT"]="right"]="RIGHT";e[e["LEFT"]="left"]="LEFT";e[e["BOTTOM"]="bottom"]="BOTTOM"})(t.AxisOrient||(t.AxisOrient={}));var n=t.AxisOrient;t.defaultAxisConfig={offset:undefined,grid:undefined,labels:true,labelMaxLength:25,tickSize:undefined,characterWidth:6};t.defaultFacetAxisConfig={axisWidth:0,labels:true,grid:false,tickSize:0}},ct8e:function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("zsFm").Tuple,s=r("J731"),o=r("4JPs");function u(e){o.prototype.init.call(this,e);o.addParameters(this,u.Parameters);o.addParameters(this,{lon:{type:"field"},lat:{type:"field"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}u.Parameters={projection:{type:"value",default:"mercator"},center:{type:"array<value>"},translate:{type:"array<value>",default:r("MRce").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}};u.d3Projection=function(){var e=this.param("projection"),t=u.Parameters,r,a,s;if(e!==this._mode){this._mode=e;this._projection=n.geo[e]()}r=this._projection;for(a in t){if(a==="projection"||!r[a])continue;s=this.param(a);if(s===undefined||i.isArray(s)&&s.length===0){continue}if(s!==r[a]()){r[a](s)}}return r};var l=u.prototype=Object.create(o.prototype);l.constructor=u;l.transform=function(e){s.debug(e,["geo"]);var t=this._output,r=this.param("lon").accessor,n=this.param("lat").accessor,i=u.d3Projection.call(this);function o(e){var s=[r(e),n(e)];var o=i(s)||[null,null];a.set(e,t.x,o[0]);a.set(e,t.y,o[1])}e.add.forEach(o);if(this.reevaluate(e)){e.mod.forEach(o);e.rem.forEach(o)}e.fields[t.x]=1;e.fields[t.y]=1;return e};e.exports=u;u.baseSchema={projection:{description:"The type of cartographic projection to use.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"mercator"},center:{description:"The center of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},translate:{description:"The translation of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},rotate:{description:"The rotation of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},scale:{description:"The scale of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},precision:{description:"The desired precision of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipAngle:{description:"The clip angle of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipExtent:{description:"The clip extent of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}};u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Geo transform",description:"Performs a cartographic projection. Given longitude and latitude values, sets corresponding x and y properties for a mark.",type:"object",properties:i.extend({type:{enum:["geo"]},lon:{description:"The input longitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},lat:{description:"The input latitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"}},additionalProperties:false}},u.baseSchema),required:["type","lon","lat"],additionalProperties:false}},cwb4:function(e,t,r){var n=r("zF6n");e.exports=function(e,t){var r=n.isObject(e)&&!n.isBuffer(e)?e:JSON.parse(e);if(t&&t.property){r=n.accessor(t.property)(r)}return r}},dhxB:function(e,t,r){var n=r("RXBq").ALL,i=0;function a(e){if(e)this.init(e)}var s=a.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32};var o=a.prototype;o.init=function(e){this._id=++i;this._graph=e;this._rank=e.rank();this._qrank=null;this._stamp=0;this._listeners=[];this._listeners._ids={};this._deps={};for(var t=0,r=n.length;t<r;++t){this._deps[n[t]]=[]}this._flags=0;return this};o.rank=function(){return this._rank};o.rerank=function(){var e=this._graph,t=[this],r;while(t.length){r=t.shift();r._rank=e.rank();t.unshift.apply(t,r.listeners())}return this};o.qrank=function(){if(!arguments.length)return this._qrank;return this._qrank=this._rank,this};o.last=function(e){if(!arguments.length)return this._stamp;return this._stamp=e,this};o._setf=function(e,t){if(t){this._flags|=e}else{this._flags&=~e}return this};o.router=function(e){if(!arguments.length)return this._flags&s.Router;return this._setf(s.Router,e)};o.collector=function(e){if(!arguments.length)return this._flags&s.Collector;return this._setf(s.Collector,e)};o.produces=function(e){if(!arguments.length)return this._flags&s.Produces;return this._setf(s.Produces,e)};o.mutates=function(e){if(!arguments.length)return this._flags&s.Mutates;return this._setf(s.Mutates,e)};o.reflows=function(e){if(!arguments.length)return this._flags&s.Reflows;return this._setf(s.Reflows,e)};o.batch=function(e){if(!arguments.length)return this._flags&s.Batch;return this._setf(s.Batch,e)};o.dependency=function(e,t){var r=this._deps[e],n=r._names||(r._names={});if(arguments.length===1){return r}if(t===null){r.splice(0,r.length);r._names={}}else if(!Array.isArray(t)){if(n[t])return this;r.push(t);n[t]=1}else{for(var i=0,a=t.length,s;i<a;++i){s=t[i];if(n[s])continue;r.push(s);n[s]=1}}return this};o.listeners=function(){return this._listeners};o.addListener=function(e){if(!(e instanceof a)){throw Error("Listener is not a Node")}if(this._listeners._ids[e._id])return this;this._listeners.push(e);this._listeners._ids[e._id]=1;if(this._rank>e._rank){e.rerank()}return this};o.removeListener=function(e){if(!this._listeners._ids[e._id])return false;var t=this._listeners.indexOf(e),r=t>=0;if(r){this._listeners.splice(t,1);this._listeners._ids[e._id]=null}return r};o.disconnect=function(){this._listeners=[];this._listeners._ids={}};o.evaluate=function(e){return e};o.reevaluate=function(e){var t,r,i,a,s,o;for(i=0,a=n.length;i<a;++i){t=n[i];r=this._deps[t];for(s=0,o=r.length;s<o;++s){if(e[t][r[s]])return true}}return false};a.reset=function(){i=0};e.exports=a},ec8D:function(e,t,r){var n=r("zsFm").Tuple,i=r("J731"),a=r("4JPs");function s(e){a.prototype.init.call(this,e);a.addParameters(this,{on:{type:"data"},onKey:{type:"field",default:null},as:{type:"array<value>"},keys:{type:"array<field>",default:["data"]},default:{type:"value"}});return this.mutates(true)}var o=s.prototype=Object.create(a.prototype);o.constructor=s;o.transform=function(e,t){i.debug(e,["lookup"]);var r=this.param("on"),a=r.source.last(),s=r.source.values(),o=this.param("onKey"),u=o.field,l=this.param("keys"),f=l.accessor,c=this.param("as"),d=this.param("default"),p=this._lut,h,m;if(p==null||this._on!==u||u&&a.fields[u]||a.add.length||a.rem.length){if(u){o=o.accessor;for(p={},h=0;h<s.length;++h){p[o(m=s[h])]=m}}else{p=s}this._lut=p;this._on=u;t=true}function g(e){for(var t=0;t<f.length;++t){var r=p[f[t](e)]||d;n.set(e,c[t],r)}}e.add.forEach(g);var v=l.field.some(function(t){return e.fields[t]});if(v||t){e.mod.forEach(g);e.rem.forEach(g)}c.forEach(function(t){e.fields[t]=1});return e};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Lookup transform",description:"Extends a data set by looking up values in another data set.",type:"object",properties:{type:{enum:["lookup"]},on:{type:"string",description:"The name of the secondary data set on which to lookup values."},onKey:{description:"The key field to lookup, or null for index-based lookup.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},keys:{description:"One or more fields in the primary data set to match against the secondary data set.",type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"The names of the fields in which to store looked-up values.",items:{type:"string"}},default:{description:"The default value to use if a lookup match fails."}},required:["type","on","as","keys"],additionalProperties:false}},ei6W:function(e,t,r){var n=r("zicW"),i=r("zsFm").Tuple,a=r("J731"),s=r("4JPs"),o=r("acp7");function u(e){o.prototype.init.call(this,e);s.addParameters(this,{groupby:{type:"array<field>"}});this._output={children:"children",parent:"parent"};return this.router(true).produces(true)}var l=u.prototype=Object.create(o.prototype);l.constructor=u;l.batchTransform=function(e,t){a.debug(e,["treeifying"]);var r=this.param("groupby").field,s=this._output.children,o=this._output.parent,u=[{name:"*",ops:["values"],as:[s]}],l=r.map(function(e){return n.groupby(e).summarize(u)}),f=this._internal||[],c=[],d,p;function h(e,t,n){var a=l[e].execute(n);t[s]=a;a.forEach(function(n){n[o]=t;c.push(i.ingest(n));if(e+1<r.length)h(e+1,n,n[s]);else n[s].forEach(function(e){e[o]=n})})}var m=i.ingest({});m[o]=null;c.push(m);h(0,m,t);for(d=0,p=c.length;d<p;++d){e.add.push(c[d])}for(d=0,p=f.length;d<p;++d){e.rem.push(f[d])}this._internal=c;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treeify transform",type:"object",properties:{type:{enum:["treeify"]},groupby:{description:"An ordered list of fields by which to group tuples into a tree.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{children:{type:"string",default:"children"},parent:{type:"string",default:"parent"}},additionalProperties:false}},additionalProperties:false,required:["type","groupby"]}},esTF:function(e,t){var r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];e.exports=function(e){var t=[],i,a,s,o,u,l,f,c,d,p,h;i=e.slice().replace(n[0],"###$1").split(n[1]).slice(1);for(c=0,p=i.length;c<p;++c){a=i[c];s=a.slice(1).trim().replace(n[2],"$1###$2").split(n[3]);l=a.charAt(0);o=[l];for(d=0,h=s.length;d<h;++d){if((u=+s[d])===u){o.push(u)}}f=r[l.toLowerCase()];if(o.length-1>f){for(d=1,h=o.length;d<h;d+=f){t.push([l].concat(o.slice(d,d+f)))}}else{t.push(o)}}return t}},f2i1:function(e,t,r){"use strict";var n=r("P/aK");var i=r("QSMf");var a=r("j8cM");var s=r("ZAUf");(function(e){e[e["ZERO"]="zero"]="ZERO";e[e["CENTER"]="center"]="CENTER";e[e["NORMALIZE"]="normalize"]="NORMALIZE";e[e["NONE"]="none"]="NONE"})(t.StackOffset||(t.StackOffset={}));var o=t.StackOffset;function u(e,t,r){var u=r&&r.mark?r.mark.stacked:undefined;if(s.contains([o.NONE,null,false],u)){return null}if(!s.contains([a.BAR,a.AREA],e)){return null}if(!i.isAggregate(t)){return null}var l=n.STACK_GROUP_CHANNELS.reduce(function(e,r){if(i.has(t,r)&&!t[r].aggregate){e.push(r)}return e},[]);if(l.length===0){return null}var f=i.has(t,n.X);var c=i.has(t,n.Y);var d=f&&!!t.x.aggregate;var p=c&&!!t.y.aggregate;if(d!==p){return{groupbyChannel:d?c?n.Y:null:f?n.X:null,fieldChannel:d?n.X:n.Y,stackByChannels:l,offset:u||o.ZERO}}return null}t.stack=u},fRRI:function(e,t,r){var n=r("zicW"),i=r("zsFm").Dependencies;var a=/array/i,s=/data/i,o=/field/i,u=/expr/i,l=/value/i;function f(e,t,r){this._name=e;this._type=t;this._transform=r;this._value=[];this._accessors=[];this._resolution=false;this._signals=[]}var c=f.prototype;function d(){var e=a.test(this._type),t=s.test(this._type),r=o.test(this._type);var i=e?this._value:this._value[0],u=e?this._accessors:this._accessors[0];if(!n.isValid(u)&&l.test(this._type)){return i}else{return t?{name:i,source:u}:r?{field:i,accessor:u}:i}}c.get=function(){var e=this._transform._graph,t=s.test(this._type),r=o.test(this._type),i,a,u,l,f;if(!this._resolution)return d.call(this);if(t){this._accessors=this._value.map(function(t){return e.data(t)});return d.call(this)}for(i=0,a=this._signals.length;i<a;++i){u=this._signals[i];l=u.index;f=u.value(e);if(r){this._accessors[l]=this._value[l]!=f?n.accessor(f):this._accessors[l]}this._value[l]=f}return d.call(this)};c.set=function(e){var t=this,r=t._transform._graph,a=u.test(this._type),l=s.test(this._type),f=o.test(this._type);t._signals=[];this._value=n.array(e).map(function(e,s){var o;if(n.isString(e)){if(a){o=r.expr(e);t._transform.dependency(i.FIELDS,o.fields);t._transform.dependency(i.SIGNALS,o.globals);t._transform.dependency(i.DATA,o.dataSources);return o.fn}else if(f){t._accessors[s]=n.accessor(e);t._transform.dependency(i.FIELDS,n.field(e))}else if(l){t._resolution=true;t._transform.dependency(i.DATA,e)}return e}else if(e.value!==undefined){return e.value}else if(e.field!==undefined){t._accessors[s]=n.accessor(e.field);t._transform.dependency(i.FIELDS,n.field(e.field));return e.field}else if(e.signal!==undefined){t._resolution=true;t._transform.dependency(i.SIGNALS,n.field(e.signal)[0]);t._signals.push({index:s,value:function(t){return t.signalRef(e.signal)}});return e.signal}else if(e.expr!==undefined){t._resolution=true;o=r.expr(e.expr);t._transform.dependency(i.SIGNALS,o.globals);t._signals.push({index:s,value:function(){return o.fn()}});return e.expr}return e});return t._transform};e.exports=f;f.schema={type:"object",oneOf:[{properties:{field:{type:"string"}},required:["field"]},{properties:{value:{type:"string"}},required:["value"]}]}},fxxq:function(e,t,r){var n=r("Za4h");function i(e){if(e==null)return null;return n.rgb(e)+""}e.exports=i;i.schema={defs:{background:{type:"string"}}}},ggRp:function(e,t,r){var n=r("zF6n");var i="__types__";var a={boolean:n.boolean,integer:n.number,number:n.number,date:n.date,string:function(e){return e==null||e===""?null:e+""}};var s={boolean:function(e){return e==="true"||e==="false"||n.isBoolean(e)},integer:function(e){return s.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!n.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};function o(e,t){if(!t)return e&&e[i]||null;e[i]=t}function u(e){return n.keys(e)}function l(e){return"["+e+"]"}function f(e,t){e=n.array(e);t=n.$(t);var r,a,s;if(e[i]){r=t(e[i]);if(n.isString(r))return r}for(a=0,s=e.length;!n.isValid(r)&&a<s;++a){r=t?t(e[a]):e[a]}return n.isDate(r)?"date":n.isNumber(r)?"number":n.isBoolean(r)?"boolean":n.isString(r)?"string":null}function c(e,t){if(!e.length)return;var r=t?n.identity:(t=u(e[0]),l);return t.reduce(function(t,n){return t[n]=f(e,r(n)),t},{})}function d(e,t,r){e=n.array(e);t=n.$(t);var i,a,o;var u=["boolean","integer","number","date"];for(i=0;i<e.length;++i){o=t?t(e[i]):e[i];for(a=0;a<u.length;++a){if((!r||!r.test(o))&&n.isValid(o)&&!s[u[a]](o)){u.splice(a,1);a-=1}}if(u.length===0)return"string"}return u[0]}function p(e,t,r){var i=t?n.identity:(t=u(e[0]),l);return t.reduce(function(t,n){t[n]=d(e,i(n),r);return t},{})}f.annotation=o;f.all=c;f.infer=d;f.inferAll=p;f.parsers=a;e.exports=f},gjoU:function(e,t,r){var n=r("zF6n");var i=r("5AQc");var a=r("YGNx");e.exports=n.keys(a.formats).reduce(function(e,t){e[t]=function(e,r,s){if(n.isString(e)){e={url:e}}if(arguments.length===2&&n.isFunction(r)){s=r;r=undefined}r=n.extend({parse:"auto"},r);r.type=t;var o=i(e,s?function(e,t){if(e){s(e,null);return}try{t=a(t,r);s(null,t)}catch(e){s(e,null)}}:undefined);if(!s)return a(o,r)};return e},{})},"h/tW":function(e,t,r){"use strict";(function(e){e[e["VALUES"]="values"]="VALUES";e[e["COUNT"]="count"]="COUNT";e[e["VALID"]="valid"]="VALID";e[e["MISSING"]="missing"]="MISSING";e[e["DISTINCT"]="distinct"]="DISTINCT";e[e["SUM"]="sum"]="SUM";e[e["MEAN"]="mean"]="MEAN";e[e["AVERAGE"]="average"]="AVERAGE";e[e["VARIANCE"]="variance"]="VARIANCE";e[e["VARIANCEP"]="variancep"]="VARIANCEP";e[e["STDEV"]="stdev"]="STDEV";e[e["STDEVP"]="stdevp"]="STDEVP";e[e["MEDIAN"]="median"]="MEDIAN";e[e["Q1"]="q1"]="Q1";e[e["Q3"]="q3"]="Q3";e[e["MODESKEW"]="modeskew"]="MODESKEW";e[e["MIN"]="min"]="MIN";e[e["MAX"]="max"]="MAX";e[e["ARGMIN"]="argmin"]="ARGMIN";e[e["ARGMAX"]="argmax"]="ARGMAX"})(t.AggregateOp||(t.AggregateOp={}));var n=t.AggregateOp;t.AGGREGATE_OPS=[n.VALUES,n.COUNT,n.VALID,n.MISSING,n.DISTINCT,n.SUM,n.MEAN,n.AVERAGE,n.VARIANCE,n.VARIANCEP,n.STDEV,n.STDEVP,n.MEDIAN,n.Q1,n.Q3,n.MODESKEW,n.MIN,n.MAX,n.ARGMIN,n.ARGMAX];t.SUM_OPS=[n.COUNT,n.SUM,n.DISTINCT];t.SHARED_DOMAIN_OPS=[n.MEAN,n.AVERAGE,n.STDEV,n.STDEVP,n.MEDIAN,n.Q1,n.Q3,n.MIN,n.MAX]},h36N:function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("J731"),s=r("zsFm").Tuple;var o=["signals","scales","data","fields"];function u(e,t,r){var u=e.config(),l="",c=i.keys(r),m=[],g,v,y,_,b={},x={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:false};l+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\n"+"tmpl.datum  = item.datum;\n"+"tmpl.group  = group;\n"+"tmpl.parent = group.datum;\n";function k(e){if(_[e]==null)return;var t=i.array(_[e]),r,n;for(r=0,n=t.length;r<n;++r){x[e][t[r]]=1}}function S(e){var t=(e.parent?"parent_":"group_")+e.level;x._nRefs[t]=e}d(e,u,r);for(g=0,v=c.length;g<v;++g){_=r[y=c[g]];l+=g>0?"\n  ":"  ";if(_.rule){_=p(e,y,_.rule,m);l+="\n  "+_.code}else if(i.isArray(_)){_=p(e,y,_,m);l+="\n  "+_.code}else{_=h(u,y,_);l+="d += set(o, "+i.str(y)+", "+_.val+");"}b[y]=true;o.forEach(k);x.reflow=x.reflow||_.reflow;if(_.nested.length)_.nested.forEach(S)}i.keys(x._nRefs).forEach(function(e){x.nested.push(x._nRefs[e])});x.nested.sort(function(e,t){e=e.level;t=t.level;return e<t?-1:e>t?1:e>=t?0:NaN});if(b.x2){if(b.x){l+="\n  if (o.x > o.x2) { "+"\n    t = o.x;"+"\n    d += set(o, 'x', o.x2);"+"\n    d += set(o, 'x2', t); "+"\n  };";l+="\n  d += set(o, 'width', (o.x2 - o.x));"}else if(b.width){l+="\n  d += set(o, 'x', (o.x2 - o.width));"}else{l+="\n  d += set(o, 'x', o.x2);"}}if(b.xc){if(b.width){l+="\n  d += set(o, 'x', (o.xc - o.width/2));"}else{l+="\n  d += set(o, 'x', o.xc);"}}if(b.y2){if(b.y){l+="\n  if (o.y > o.y2) { "+"\n    t = o.y;"+"\n    d += set(o, 'y', o.y2);"+"\n    d += set(o, 'y2', t);"+"\n  };";l+="\n  d += set(o, 'height', (o.y2 - o.y));"}else if(b.height){l+="\n  d += set(o, 'y', (o.y2 - o.height));"}else{l+="\n  d += set(o, 'y', o.y2);"}}if(b.yc){if(b.height){l+="\n  d += set(o, 'y', (o.yc - o.height/2));"}else{l+="\n  d += set(o, 'y', o.yc);"}}if(f(t,b))l+="\n  d += (item.touch(), 1);";l+="\n  if (trans) trans.interpolate(item, o);";l+="\n  return d > 0;";try{var T=Function("item","group","trans","db","signals","predicates",l);T.tpl=s;T.exprs=m;T.util=i;T.d3=n;i.extend(T,i.template.context);return{encode:T,signals:i.keys(x.signals),scales:i.keys(x.scales),data:i.keys(x.data),fields:i.keys(x.fields),nested:x.nested,reflow:x.reflow}}catch(e){a.error(e);a.log(l)}}function l(e,t){if(!i.isObject(e)){e={reflow:false,nested:[]};o.forEach(function(t){e[t]=[]})}if(i.isObject(t)){e.reflow=e.reflow||t.reflow;e.nested.push.apply(e.nested,t.nested);o.forEach(function(r){e[r].push.apply(e[r],t[r])})}return e}function f(e,t){return t.path||(e==="area"||e==="line")&&(t.x||t.x2||t.width||t.y||t.y2||t.height||t.tension||t.interpolate)}var c=/{{(.*?)}}/g;function d(e,t,r){var n=r.shape,i=0,a,s;if(n&&(a=n.value)){if(t.shape&&t.shape[a]){a=t.shape[a]}n="";while((s=c.exec(a))!==null){n+=a.substring(i,s.index);n+=e.expr(s[1]).fn();i=c.lastIndex}r.shape.value=n+a.substring(i)}}function p(e,t,r,n){var a=e.config(),s=l(),o=[],u="";(r||[]).forEach(function(f,c){var d=h(a,t,f);l(s,d);if(f.test){var p=e.expr(f.test);s.signals.push.apply(s.signals,p.globals);s.data.push.apply(s.data,p.dataSources);u+="if (exprs["+n.length+"](item.datum, item.mark.group.datum, null)) {"+"\n    d += set(o, "+i.str(t)+", "+d.val+");";u+=r[c+1]?"\n  } else ":"  }";n.push(p.fn)}else{var m=f.predicate,g=m&&(m.name||m),v=e.predicate(g),y="predicates["+i.str(g)+"]",_=[],b=t+"_arg"+c;if(i.isObject(m)){i.keys(m).forEach(function(e){if(e==="name")return;var t=h(a,c,m[e],true);_.push(i.str(e)+": "+t.val);l(s,t)})}if(g){s.signals.push.apply(s.signals,v.signals);s.data.push.apply(s.data,v.data);o.push(b+" = {\n    "+_.join(",\n    ")+"\n  }");u+="if ("+y+".call("+y+","+b+", db, signals, predicates)) {"+"\n    d += set(o, "+i.str(t)+", "+d.val+");";u+=r[c+1]?"\n  } else ":"  }"}else{u+="{"+"\n    d += set(o, "+i.str(t)+", "+d.val+");"+"\n  }\n"}}});if(o.length)u="var "+o.join(",\n      ")+";\n  "+u;return s.code=u,s}function h(e,t,r,n){if(r==null)return null;if(t==="fill"||t==="stroke"){if(r.c){return m(e,"hcl",r.h,r.c,r.l)}else if(r.h||r.s){return m(e,"hsl",r.h,r.s,r.l)}else if(r.l||r.a){return m(e,"lab",r.l,r.a,r.b)}else if(r.r||r.g||r.b){return m(e,"rgb",r.r,r.g,r.b)}}var a=null,s=null,o=l(),u=null,f=null,c=null,d={};if(r.template!==undefined){a=i.template.source(r.template,"tmpl",d);i.keys(d).forEach(function(e){var t=i.field(e),r=t.shift();if(r==="parent"||r==="group"){o.nested.push({parent:r==="parent",group:r==="group",level:1})}else if(r==="datum"){o.fields.push(t[0])}else{o.signals.push(r)}})}if(r.value!==undefined){a=i.str(r.value)}if(r.signal!==undefined){u=i.field(r.signal);a="signals["+u.map(i.str).join("][")+"]";o.signals.push(u.shift())}if(r.field!==undefined){r.field=i.isString(r.field)?{datum:r.field}:r.field;f=g(r.field);a=f.val;l(o,f)}if(r.scale!==undefined){c=v(r.scale);s=c.val;l(o,c);o.scales.push(r.scale.name||r.scale);if(a!==null||r.band||r.mult||r.offset||!n){a=s+(r.band?".rangeBand()":"("+(a!==null?a:"item.datum.data")+")")}else if(n){a=s}}a="("+(r.mult?i.number(r.mult)+" * ":"")+a+")"+(r.offset?" + "+i.number(r.offset):"");return o.val=a,o}function m(e,t,r,n,a){var s=r?h(e,"",r):e.color[t][0],o=n?h(e,"",n):e.color[t][1],u=a?h(e,"",a):e.color[t][2],f=l();[s,o,u].forEach(function(e){if(i.isArray)return;l(f,e)});var c="(this.d3."+t+"("+[s.val,o.val,u.val].join(",")+') + "")';return f.val=c,f}function g(e){if(i.isString(e)){return{val:i.field(e).map(i.str).join("][")}}var t=e.level||1,r=(e.group||e.parent)&&t,n=r?Array(t).join("group.mark."):"",a=g(e.datum||e.group||e.parent||e.signal),s=a.val,o=l(null,a);if(e.datum){s="item.datum["+s+"]";o.fields.push(e.datum)}else if(e.group){s=n+"group["+s+"]";o.nested.push({level:t,group:true})}else if(e.parent){s=n+"group.datum["+s+"]";o.nested.push({level:t,parent:true})}else if(e.signal){s="signals["+s+"]";o.signals.push(i.field(e.signal)[0]);o.reflow=true}return o.val=s,o}function v(e){var t=null,r=null,n=l();if(i.isString(e)){t=i.str(e)}else if(e.name){t=i.isString(e.name)?i.str(e.name):(r=g(e.name)).val}else{t=(r=g(e)).val}t="(item.mark._scaleRefs["+t+"] = 1, group.scale("+t+"))";if(e.invert)t+=".invert";if(r)r.nested.forEach(function(e){e.scale=true});return r?(r.val=t,r):(n.val=t,n)}e.exports=u;function y(e){e=i.isArray(e)?{enum:e}:{type:e};var t=e.type==="number"&&e.type||"string";var r={type:"object",allOf:[{$ref:"#/refs/"+t+"Modifiers"},{oneOf:[{$ref:"#/refs/signal",required:["signal"]},{properties:{value:e},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{band:{type:"boolean"}},required:["band"]}]}]};if(e.type==="string"){r.allOf[1].oneOf.push({properties:{template:{type:"string"}},required:["template"]})}return{oneOf:[{type:"object",properties:{rule:{type:"array",items:{allOf:[{$ref:"#/defs/rule"},r]}}},additionalProperties:false,required:["rule"]},{type:"array",items:{allOf:[{$ref:"#/defs/rule"},r]}},r]}}u.schema={refs:{field:{title:"FieldRef",oneOf:[{type:"string"},{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{datum:{$ref:"#/refs/field"}},required:["datum"],additionalProperties:false},{type:"object",properties:{group:{$ref:"#/refs/field"},level:{type:"number"}},required:["group"],additionalProperties:false},{type:"object",properties:{parent:{$ref:"#/refs/field"},level:{type:"number"}},required:["parent"],additionalProperties:false}]}]},scale:{title:"ScaleRef",oneOf:[{$ref:"#/refs/field"},{type:"object",properties:{name:{$ref:"#/refs/field"},invert:{type:"boolean",default:false}},required:["name"]}]},stringModifiers:{properties:{scale:{$ref:"#/refs/scale"}}},numberModifiers:{properties:{mult:{type:"number"},offset:{type:"number"},scale:{$ref:"#/refs/scale"}}},value:y({},"value"),numberValue:y("number","numberValue"),stringValue:y("string","stringValue"),booleanValue:y("boolean","booleanValue"),arrayValue:y("array","arrayValue"),colorValue:{title:"ColorRef",oneOf:[{$ref:"#/refs/stringValue"},{type:"object",properties:{r:{$ref:"#/refs/numberValue"},g:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["r","g","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},s:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","s","l"]},{type:"object",properties:{l:{$ref:"#/refs/numberValue"},a:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["l","a","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},c:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","c","l"]}]}},defs:{rule:{anyOf:[{type:"object",properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}}},{type:"object",properties:{test:{type:"string"}}}]},propset:{title:"Mark property set",type:"object",properties:{x:{$ref:"#/refs/numberValue"},x2:{$ref:"#/refs/numberValue"},xc:{$ref:"#/refs/numberValue"},width:{$ref:"#/refs/numberValue"},y:{$ref:"#/refs/numberValue"},y2:{$ref:"#/refs/numberValue"},yc:{$ref:"#/refs/numberValue"},height:{$ref:"#/refs/numberValue"},opacity:{$ref:"#/refs/numberValue"},fill:{$ref:"#/refs/colorValue"},fillOpacity:{$ref:"#/refs/numberValue"},stroke:{$ref:"#/refs/colorValue"},strokeWidth:{$ref:"#/refs/numberValue"},strokeOpacity:{$ref:"#/refs/numberValue"},strokeDash:{$ref:"#/refs/arrayValue"},strokeDashOffset:{$ref:"#/refs/numberValue"},cursor:{$ref:"#/refs/stringValue"},clip:{$ref:"#/refs/booleanValue"},size:{$ref:"#/refs/numberValue"},shape:{anyOf:[y(["circle","square","cross","diamond","triangle-up","triangle-down"]),{$ref:"#/refs/stringValue"}]},path:{$ref:"#/refs/stringValue"},innerRadius:{$ref:"#/refs/numberValue"},outerRadius:{$ref:"#/refs/numberValue"},startAngle:{$ref:"#/refs/numberValue"},endAngle:{$ref:"#/refs/numberValue"},interpolate:y(["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"]),tension:{$ref:"#/refs/numberValue"},orient:y(["horizontal","vertical"]),url:{$ref:"#/refs/stringValue"},align:y(["left","right","center"]),baseline:y(["top","middle","bottom","alphabetic"]),text:{$ref:"#/refs/stringValue"},dx:{$ref:"#/refs/numberValue"},dy:{$ref:"#/refs/numberValue"},radius:{$ref:"#/refs/numberValue"},theta:{$ref:"#/refs/numberValue"},angle:{$ref:"#/refs/numberValue"},font:{$ref:"#/refs/stringValue"},fontSize:{$ref:"#/refs/numberValue"},fontWeight:{$ref:"#/refs/stringValue"},fontStyle:{$ref:"#/refs/stringValue"}},additionalProperties:false}}}},hBex:function(e,t,r){"use strict";var n=r("o+e1");var i=r("WJ2w");var a=r("ZAUf");var s;(function(e){function t(e){var t=(e.transform().calculate||[]).reduce(function(e,t){e[t.field]=true;return e},{});var r={};e.forEach(function(e){if(e.type===i.TEMPORAL){r[e.field]="date"}else if(e.type===i.QUANTITATIVE){if(n.isCount(e)||t[e.field]){return}r[e.field]="number"}});return r}e.parseUnit=t;function r(e){var r=t(e);var n=e.child().component.data;if(!n.source&&n.formatParse){a.extend(r,n.formatParse);delete n.formatParse}return r}e.parseFacet=r;function s(e){var r=t(e);e.children().forEach(function(t){var n=t.component.data;if(e.compatibleSource(t)&&!a.differ(n.formatParse,r)){a.extend(r,n.formatParse);delete n.formatParse}});return r}e.parseLayer=s})(s=t.formatParse||(t.formatParse={}))},hv1v:function(e,t,r){var n=r("zicW");var i="time",a="utc",s="string",o="ordinal",u="number";function l(e,t,r,n){var i=r||f(e);return d(e,t,i,n)}function f(e){switch(e.type){case i:return i;case a:return a;case o:return s;default:return u}}function c(e,t,r,n){if(r==null)return n;var i=e.base(),a=Math.min(i,e.ticks().length/r),s=t[0]>0?(o=1e-12,Math.ceil):(o=-1e-12,Math.floor),o;function u(e){return(t[0]<0?-Math.log(e>0?0:-e):Math.log(e<0?0:e))/Math.log(i)}function l(e){return t[0]<0?-Math.pow(i,-e):Math.pow(i,e)}return function(e){return l(s(u(e)+o))/e>=a?n(e):""}}function d(e,t,r,s){var o=n.format,l=e.type==="log",f;switch(r){case u:f=e.domain();return l?c(e,f,t,o.auto.number(s||null)):o.auto.linear(f,t,s||null);case i:return(s?o:o.auto).time(s);case a:return(s?o:o.auto).utc(s);default:return String}}e.exports={getTickFormat:l}},iHbP:function(e,t,r){var n=r("VkFx"),i=r("GMts"),a=r("UTTf"),s=r("DbaP"),o=r("VY+T"),u=o.openTag,l=o.closeTag,f=r("ifCQ");function c(e){n.call(this);this._loader=new i(e);this._text={head:"",root:"",foot:"",defs:"",body:""};this._defs={clip_id:1,gradient:{},clipping:{}}}var d=n.prototype;var p=c.prototype=Object.create(d);p.constructor=c;p.resize=function(e,t,r){d.resize.call(this,e,t,r);var n=this._padding,i=this._text;var s={class:"marks",width:this._width+n.left+n.right,height:this._height+n.top+n.bottom};for(var o in a.metadata){s[o]=a.metadata[o]}i.head=u("svg",s);i.root=u("g",{transform:"translate("+n.left+","+n.top+")"});i.foot=l("g")+l("svg");return this};p.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot};p.render=function(e){this._text.body=this.mark(e);this._text.defs=this.buildDefs();return this};p.reset=function(){this._defs.clip_id=0;return this};p.buildDefs=function(){var e=this._defs,t="",r,n,i,a;for(n in e.gradient){i=e.gradient[n];a=i.stops;t+=u("linearGradient",{id:n,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(r=0;r<a.length;++r){t+=u("stop",{offset:a[r].offset,"stop-color":a[r].color})+l("stop")}t+=l("linearGradient")}for(n in e.clipping){i=e.clipping[n];t+=u("clipPath",{id:n});t+=u("rect",{x:0,y:0,width:i.width,height:i.height})+l("rect");t+=l("clipPath")}return t.length>0?u("defs")+t+l("defs"):""};p.imageURL=function(e){return this._loader.imageURL(e)};var h;function m(e,t,r,n){h[n||e]=t}p.attributes=function(e,t){h={};e(m,t,this);return h};p.mark=function(e){var t=f[e.marktype],r=t.tag,n=t.attr,i=t.nest||false,a=i?e.items&&e.items.length?[e.items[0]]:[]:e.items||[],c=this._defs,d="",p,h,m;if(r!=="g"&&e.interactive===false){p='style="pointer-events: none;"'}d+=u("g",{class:o.cssClass(e)},p);for(h=0;h<a.length;++h){m=a[h];p=r!=="g"?g(m,e,r,c):null;d+=u(r,this.attributes(n,m),p);if(r==="text"){d+=v(s.value(m.text))}else if(r==="g"){d+=u("rect",this.attributes(t.background,m),g(m,e,"bgrect",c))+l("rect");d+=this.markGroup(m)}d+=l(r)}return d+l("g")};p.markGroup=function(e){var t="",r=e.axisItems||[],n=e.items||[],i=e.legendItems||[],a,s;for(a=0,s=r.length;a<s;++a){if(r[a].layer==="back"){t+=this.mark(r[a])}}for(a=0,s=n.length;a<s;++a){t+=this.mark(n[a])}for(a=0,s=r.length;a<s;++a){if(r[a].layer!=="back"){t+=this.mark(r[a])}}for(a=0,s=i.length;a<s;++a){t+=this.mark(i[a])}return t};function g(e,t,r,n){if(e==null)return"";var i,o,u,l,f,c="";if(r==="bgrect"&&t.interactive===false){c+="pointer-events: none;"}if(r==="text"){c+="font: "+s.font(e)+";"}for(i=0,o=a.styleProperties.length;i<o;++i){u=a.styleProperties[i];l=a.styles[u];f=e[u];if(f==null){if(l==="fill"){c+=(c.length?" ":"")+"fill: none;"}}else{if(f.id){n.gradient[f.id]=f;f="url(#"+f.id+")"}c+=(c.length?" ":"")+l+": "+f+";"}}return c?'style="'+c+'"':null}function v(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}e.exports=c},iIpz:function(e,t,r){"use strict"},ifCQ:function(e,t,r){var n=r("DbaP"),i=r("UTTf"),a=i.symbolTypes,s=i.textAlign,o=i.path;function u(e){return l(e.x||0,e.y||0)}function l(e,t){return"translate("+e+","+t+")"}e.exports={arc:{tag:"path",type:"arc",attr:function(e,t){e("transform",u(t));e("d",o.arc(t))}},area:{tag:"path",type:"area",nest:true,attr:function(e,t){var r=t.mark.items;if(r.length)e("d",o.area(r))}},group:{tag:"g",type:"group",attr:function(e,t,r){var n=null,i,a;e("transform",u(t));if(t.clip){i=r._defs;n=t.clip_id||(t.clip_id="clip"+i.clip_id++);a=i.clipping[n]||(i.clipping[n]={id:n});a.width=t.width||0;a.height=t.height||0}e("clip-path",n?"url(#"+n+")":null)},background:function(e,t){e("class","background");e("width",t.width||0);e("height",t.height||0)}},image:{tag:"image",type:"image",attr:function(e,t,r){var n=t.x||0,i=t.y||0,a=t.width||0,s=t.height||0,o=r.imageURL(t.url);n=n-(t.align==="center"?a/2:t.align==="right"?a:0);i=i-(t.baseline==="middle"?s/2:t.baseline==="bottom"?s:0);e("href",o,"http://www.w3.org/1999/xlink","xlink:href");e("transform",l(n,i));e("width",a);e("height",s)}},line:{tag:"path",type:"line",nest:true,attr:function(e,t){var r=t.mark.items;if(r.length)e("d",o.line(r))}},path:{tag:"path",type:"path",attr:function(e,t){e("transform",u(t));e("d",t.path)}},rect:{tag:"rect",type:"rect",nest:false,attr:function(e,t){e("transform",u(t));e("width",t.width||0);e("height",t.height||0)}},rule:{tag:"line",type:"rule",attr:function(e,t){e("transform",u(t));e("x2",t.x2!=null?t.x2-(t.x||0):0);e("y2",t.y2!=null?t.y2-(t.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(e,t){var r=!t.shape||a[t.shape]?o.symbol(t):o.resize(t.shape,t.size);e("transform",u(t));e("d",r)}},text:{tag:"text",type:"text",nest:false,attr:function(e,t){var r=t.dx||0,i=(t.dy||0)+n.offset(t),a=t.x||0,o=t.y||0,u=t.angle||0,f=t.radius||0,c;if(f){c=(t.theta||0)-Math.PI/2;a+=f*Math.cos(c);o+=f*Math.sin(c)}e("text-anchor",s[t.align]||"start");if(u){c=l(a,o)+" rotate("+u+")";if(r||i)c+=" "+l(r,i)}else{c=l(a+r,o+i)}e("transform",c)}}}},"j/ps":function(e,t){function r(e){this.cmp=e;this.nodes=[]}var n=r.prototype;n.size=function(){return this.nodes.length};n.clear=function(){return this.nodes=[],this};n.peek=function(){return this.nodes[0]};n.push=function(e){var t=this.nodes;t.push(e);return i(t,0,t.length-1,this.cmp)};n.pop=function(){var e=this.nodes,t=e.pop(),r;if(e.length){r=e[0];e[0]=t;a(e,0,this.cmp)}else{r=t}return r};n.replace=function(e){var t=this.nodes,r=t[0];t[0]=e;a(t,0,this.cmp);return r};n.pushpop=function(e){var t=this.nodes,r=t[0];if(t.length&&this.cmp(r,e)<0){t[0]=e;e=r;a(t,0,this.cmp)}return e};function i(e,t,r,n){var i,a,s;i=e[r];while(r>t){s=r-1>>1;a=e[s];if(n(i,a)<0){e[r]=a;r=s;continue}break}return e[r]=i}function a(e,t,r){var n=t,a=e.length,s=e[t],o=2*t+1,u;while(o<a){u=o+1;if(u<a&&r(e[o],e[u])>=0){o=u}e[t]=e[o];t=o;o=2*t+1}e[t]=s;return i(e,n,t,r)}e.exports=r},j8cM:function(e,t,r){"use strict";(function(e){e[e["AREA"]="area"]="AREA";e[e["BAR"]="bar"]="BAR";e[e["LINE"]="line"]="LINE";e[e["POINT"]="point"]="POINT";e[e["TEXT"]="text"]="TEXT";e[e["TICK"]="tick"]="TICK";e[e["RULE"]="rule"]="RULE";e[e["CIRCLE"]="circle"]="CIRCLE";e[e["SQUARE"]="square"]="SQUARE";e[e["ERRORBAR"]="errorBar"]="ERRORBAR"})(t.Mark||(t.Mark={}));var n=t.Mark;t.AREA=n.AREA;t.BAR=n.BAR;t.LINE=n.LINE;t.POINT=n.POINT;t.TEXT=n.TEXT;t.TICK=n.TICK;t.RULE=n.RULE;t.CIRCLE=n.CIRCLE;t.SQUARE=n.SQUARE;t.ERRORBAR=n.ERRORBAR;t.PRIMITIVE_MARKS=[t.AREA,t.BAR,t.LINE,t.POINT,t.TEXT,t.TICK,t.RULE,t.CIRCLE,t.SQUARE]},jGoH:function(e,t,r){"use strict";var n=r("P/aK");var i=r("QSMf");var a=r("o+e1");var s=r("Fw/k");var o=r("ZAUf");var u=function(){function e(){this._nameMap={}}e.prototype.rename=function(e,t){this._nameMap[e]=t};e.prototype.get=function(e){while(this._nameMap[e]){e=this._nameMap[e]}return e};return e}();var l=function(){function e(e,t,r){this._warnings=[];this._parent=t;this._name=e.name||r;this._dataNameMap=t?t._dataNameMap:new u;this._scaleNameMap=t?t._scaleNameMap:new u;this._sizeNameMap=t?t._sizeNameMap:new u;this._data=e.data;this._description=e.description;this._transform=e.transform;this.component={data:null,layout:null,mark:null,scale:null,axis:null,axisGroup:null,gridGroup:null,legend:null}}e.prototype.parse=function(){this.parseData();this.parseSelectionData();this.parseLayoutData();this.parseScale();this.parseAxis();this.parseLegend();this.parseAxisGroup();this.parseGridGroup();this.parseMark()};e.prototype.assembleScales=function(){return o.flatten(o.vals(this.component.scale).map(function(e){var t=[e.main];if(e.colorLegend){t.push(e.colorLegend)}if(e.binColorLegend){t.push(e.binColorLegend)}return t}))};e.prototype.assembleAxes=function(){return o.vals(this.component.axis)};e.prototype.assembleLegends=function(){return o.vals(this.component.legend)};e.prototype.assembleGroup=function(){var e={};e.marks=this.assembleMarks();var t=this.assembleScales();if(t.length>0){e.scales=t}var r=this.assembleAxes();if(r.length>0){e.axes=r}var n=this.assembleLegends();if(n.length>0){e.legends=n}return e};e.prototype.reduce=function(e,t,r){return i.channelMappingReduce(this.channels(),this.mapping(),e,t,r)};e.prototype.forEach=function(e,t){i.channelMappingForEach(this.channels(),this.mapping(),e,t)};e.prototype.parent=function(){return this._parent};e.prototype.name=function(e,t){if(t===void 0){t="_"}return(this._name?this._name+t:"")+e};e.prototype.description=function(){return this._description};e.prototype.data=function(){return this._data};e.prototype.renameData=function(e,t){this._dataNameMap.rename(e,t)};e.prototype.dataName=function(e){return this._dataNameMap.get(this.name(String(e)))};e.prototype.renameSize=function(e,t){this._sizeNameMap.rename(e,t)};e.prototype.channelSizeName=function(e){return this.sizeName(e===n.X||e===n.COLUMN?"width":"height")};e.prototype.sizeName=function(e){return this._sizeNameMap.get(this.name(e,"_"))};e.prototype.transform=function(){return this._transform||{}};e.prototype.field=function(e,t){if(t===void 0){t={}}var r=this.fieldDef(e);if(r.bin){t=o.extend({binSuffix:this.scale(e).type===s.ScaleType.ORDINAL?"_range":"_start"},t)}return a.field(r,t)};e.prototype.scale=function(e){return this._scale[e]};e.prototype.isOrdinalScale=function(e){var t=this.scale(e);return t&&t.type===s.ScaleType.ORDINAL};e.prototype.renameScale=function(e,t){this._scaleNameMap.rename(e,t)};e.prototype.scaleName=function(e){return this._scaleNameMap.get(this.name(e+""))};e.prototype.sort=function(e){return(this.mapping()[e]||{}).sort};e.prototype.axis=function(e){return this._axis[e]};e.prototype.legend=function(e){return this._legend[e]};e.prototype.config=function(){return this._config};e.prototype.addWarning=function(e){o.warning(e);this._warnings.push(e)};e.prototype.warnings=function(){return this._warnings};e.prototype.isUnit=function(){return false};e.prototype.isFacet=function(){return false};e.prototype.isLayer=function(){return false};return e}();t.Model=l},jJJB:function(e,t){e.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},jMte:function(e,t,r){"use strict";var n=r("x6Fv");var i=r("ZAUf");var a=r("t3C9");var s=r("1PdY");var o=r("nOes");var u=r("pAWG");var l=r("736r");var f;(function(e){function t(e){var t=e.data();if(t){var r={name:e.dataName(n.SOURCE)};if(t.values&&t.values.length>0){r.values=t.values;r.format={type:"json"}}else if(t.url){r.url=t.url;var a=/(?:\.([^.]+))?$/.exec(r.url)[1];if(!i.contains(["json","csv","tsv","topojson"],a)){a="json"}var s=t.format||{};var o=s.type||t["formatType"];r.format=i.extend({type:o?o:a},s.property?{property:s.property}:{},s.feature?{feature:s.feature}:s.mesh?{mesh:s.mesh}:{})}return r}else if(!e.parent()){return{name:e.dataName(n.SOURCE)}}return undefined}e.parseUnit=t;function r(e){var r=t(e);if(!e.child().component.data.source){e.child().renameData(e.child().dataName(n.SOURCE),e.dataName(n.SOURCE))}return r}e.parseFacet=r;function f(e){var r=t(e);e.children().forEach(function(t){var r=t.component.data;if(e.compatibleSource(t)){var i=!r.filter&&!r.formatParse&&!r.nullFilter;if(i){t.renameData(t.dataName(n.SOURCE),e.dataName(n.SOURCE));delete r.source}else{r.source={name:t.dataName(n.SOURCE),source:e.dataName(n.SOURCE)}}}});return r}e.parseLayer=f;function c(e,t){if(t.source){var r=t.source;if(t.formatParse){t.source.format=t.source.format||{};t.source.format.parse=t.formatParse}r.transform=[].concat(a.nullFilter.assemble(t),u.formula.assemble(t),s.filter.assemble(t),o.bin.assemble(t),l.timeUnit.assemble(t));return r}return null}e.assemble=c})(f=t.source||(t.source={}))},jbgm:function(e,t,r){var n=r("cwb4");e.exports=function(e,t){return i(n(e,t),t)};function i(e,t){var r=t&&t.children||"children",n=t&&t.parent||"parent",i=[];function a(e,t){e[n]=t;i.push(e);var s=e[r];if(s){for(var o=0;o<s.length;++o){a(s[o],e)}}}a(e,null);return i.root=e,i}},juLC:function(e,t,r){var n=r("zicW"),i=r("zsFm"),a=i.ChangeSet,s=i.Tuple,o=r("J731"),u=r("4JPs"),l=r("acp7");function f(e){l.prototype.init.call(this,e);u.addParameters(this,{with:{type:"data"},diagonal:{type:"value",default:"true"},filter:{type:"expr"}});this._output={left:"a",right:"b"};this._lastWith=null;this._cids={};this._cache={};return this.router(true).produces(true)}var c=f.prototype=Object.create(l.prototype);c.constructor=f;function d(e,t){var r=this._cache,n=r[e._id]||(r[e._id]={c:[],f:false});n.c.push(t)}function p(e,t,r){return e?t._id+"_"+r._id:r._id+"_"+t._id}function h(e,t,r,n,i,a,o){var u=this._output,l=this._cache,f=this._cids,c=e.add,h=false,m=0,g=r.length,v={},y,_;for(;m<g;++m){y=r[m];_=p(t,o,y);if(f[_])continue;if(o._id===y._id&&!n)continue;s.set(v,u.left,t?o:y);s.set(v,u.right,t?y:o);if(!i||i(v)){c.push(v=s.ingest(v));d.call(this,o,v);if(o._id!==y._id)d.call(this,y,v);a[v._id]=1;f[_]=true;v={}}else{if(l[y._id])l[y._id].f=true;h=true}}if(l[o._id])l[o._id].f=h}function m(e,t,r,n,i,a,s,o){var u=this._output,l=this._cache,f=this._cids,c=l[o._id],d=c&&c.c,m=!c||c.f,g=e.mod,v=e.rem,y,_,b,x,k;if(d){for(y=d.length-1;y>=0;--y){_=d[y];x=o===_[u.left];b=x?_[u.right]:_[u.left];k=p(x,o,b);if(!l[b._id]){f[k]=false;d.splice(y,1);continue}if(!i||i(_)){if(a[_._id])continue;g.push(_);a[_._id]=1}else{if(!s[_._id])v.push.apply(v,d.splice(y,1));s[_._id]=1;f[k]=false;c.f=true}}}if(i&&m)h.call(this,e,t,r,n,i,a,o)}function g(e,t,r,n){var i=this._output,a=this._cache[n._id],s=this._cids,o=e.rem,u,l,f,c,d;if(!a)return;for(u=0,l=a.c.length;u<l;++u){f=a.c[u];d=n===f[i.left];c=d?f[i.right]:f[i.left];s[p(d,n,c)]=false;if(!r[f._id]){o.push(f);r[f._id]=1}}this._cache[n._id]=null}function v(e,t){var r=this._cache,i=n.keys(r),a=e.rem,s,o,u,l,f,c;for(s=0,o=i.length;s<o;++s){f=r[i[s]];for(u=0,l=f.c.length;u<l;++u){c=f.c[u];if(t[c._id])continue;a.push(c);t[c._id]=1}}this._cache={};this._cids={};this._lastWith=null}c.batchTransform=function(e,t,r){o.debug(e,["crossing"]);var n=this.param("with"),i=this.param("diagonal"),s=this._output,u=this.param("filter")||null,l=!n.name,f=l?e:n.source.last(),c=l?t:n.source.values(),d=a.create(e),p={},y={};if(r){v.call(this,d,y);t.forEach(h.bind(this,d,true,c,i,u,p));this._lastWith=f.stamp}else{e.rem.forEach(g.bind(this,d,true,y));e.add.forEach(h.bind(this,d,true,c,i,u,p));if(f.stamp>this._lastWith){f.rem.forEach(g.bind(this,d,false,y));f.add.forEach(h.bind(this,d,false,t,i,u,p));f.mod.forEach(m.bind(this,d,false,t,i,u,p,y));this._lastWith=f.stamp}e.mod.forEach(m.bind(this,d,true,c,i,u,p,y))}d.fields[s.left]=1;d.fields[s.right]=1;return d};e.exports=f;f.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Cross transform",description:"Compute the cross-product of two data sets.",type:"object",properties:{type:{enum:["cross"]},with:{type:"string",description:"The name of the secondary data set to cross with the primary data. "+"If unspecified, the primary data is crossed with itself."},diagonal:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],description:'If false, items along the "diagonal" of the cross-product '+"(those elements with the same index in their respective array) "+"will not be included in the output.",default:true},filter:{type:"string",description:"A string containing an expression (in JavaScript syntax) "+"to filter the resulting data elements."},output:{type:"object",description:"Rename the output data fields",properties:{left:{type:"string",default:"a"},right:{type:"string",default:"b"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},jxr4:function(e,t,r){"use strict";var n=r("P/aK");var i=r("o+e1");var a=r("j8cM");var s=r("WJ2w");var o=r("ZAUf");var u=r("MtYt");var l=r("TLMq");function f(e){return[n.COLOR,n.SIZE,n.SHAPE].reduce(function(t,r){if(e.legend(r)){t[r]=d(e,r)}return t},{})}t.parseLegendComponent=f;function c(e,t){switch(t){case n.COLOR:var r=e.fieldDef(n.COLOR);var i=e.scaleName(h(r)?l.COLOR_LEGEND:n.COLOR);return e.config().mark.filled?{fill:i}:{stroke:i};case n.SIZE:return{size:e.scaleName(n.SIZE)};case n.SHAPE:return{shape:e.scaleName(n.SHAPE)}}return null}function d(e,t){var r=e.fieldDef(t);var n=e.legend(t);var i=e.config();var a=c(e,t);a.title=p(n,r,i);var s=u.numberFormat(r,n.format,i);if(s){a.format=s}["offset","orient","values"].forEach(function(e){var t=n[e];if(t!==undefined){a[e]=t}});var l=typeof n!=="boolean"&&n.properties||{};["title","symbols","legend","labels"].forEach(function(n){var i=m[n]?m[n](r,l[n],e,t):l[n];if(i!==undefined&&o.keys(i).length>0){a.properties=a.properties||{};a.properties[n]=i}});return a}t.parseLegend=d;function p(e,t,r){if(typeof e!=="boolean"&&e.title){return e.title}return i.title(t,r)}t.title=p;function h(e){return e.type===s.ORDINAL||e.bin||e.timeUnit}t.useColorLegendScale=h;var m;(function(e){function t(e,t,r,i){var s={};var l=r.mark();var f=r.legend(i);switch(l){case a.BAR:case a.TICK:case a.TEXT:s.shape={value:"square"};break;case a.CIRCLE:case a.SQUARE:s.shape={value:l};break;case a.POINT:case a.LINE:case a.AREA:break}var c=r.config().mark.filled;var d=i===n.COLOR?o.without(u.FILL_STROKE_CONFIG,[c?"fill":"stroke","strokeDash","strokeDashOffset"]):o.without(u.FILL_STROKE_CONFIG,["strokeDash","strokeDashOffset"]);d=o.without(d,["strokeDash","strokeDashOffset"]);u.applyMarkConfig(s,r,d);if(c){s.strokeWidth={value:0}}var p;if(r.has(n.COLOR)&&i===n.COLOR){if(h(e)){p={scale:r.scaleName(n.COLOR),field:"data"}}}else if(r.fieldDef(n.COLOR).value){p={value:r.fieldDef(n.COLOR).value}}if(p!==undefined){if(c){s.fill=p}else{s.stroke=p}}else if(i!==n.COLOR){s[c?"fill":"stroke"]=s[c?"fill":"stroke"]||{value:r.config().mark.color}}if(f.symbolColor!==undefined){s.fill={value:f.symbolColor}}if(f.symbolShape!==undefined){s.shape={value:f.symbolShape}}if(f.symbolSize!==undefined){s.size={value:f.symbolSize}}if(f.symbolStrokeWidth!==undefined){s.strokeWidth={value:f.symbolStrokeWidth}}s=o.extend(s,t||{});return o.keys(s).length>0?s:undefined}e.symbols=t;function r(e,t,r,i){var a=r.legend(i);var f=r.config();var c={};if(i===n.COLOR){if(e.type===s.ORDINAL){t=o.extend({text:{scale:r.scaleName(l.COLOR_LEGEND),field:"data"}},t||{})}else if(e.bin){t=o.extend({text:{scale:r.scaleName(l.COLOR_LEGEND_LABEL),field:"data"}},t||{})}else if(e.type===s.TEMPORAL){t=o.extend({text:{template:u.timeTemplate("datum.data",e.timeUnit,a.format,a.shortTimeLabels,f)}},t||{})}}if(a.labelAlign!==undefined){c.align={value:a.labelAlign}}if(a.labelColor!==undefined){c.stroke={value:a.labelColor}}if(a.labelFont!==undefined){c.font={value:a.labelFont}}if(a.labelFontSize!==undefined){c.fontSize={value:a.labelFontSize}}if(a.labelBaseline!==undefined){c.baseline={value:a.labelBaseline}}c=o.extend(c,t||{});return o.keys(c).length>0?c:undefined}e.labels=r;function i(e,t,r,n){var i=r.legend(n);var a={};if(i.titleColor!==undefined){a.stroke={value:i.titleColor}}if(i.titleFont!==undefined){a.font={value:i.titleFont}}if(i.titleFontSize!==undefined){a.fontSize={value:i.titleFontSize}}if(i.titleFontWeight!==undefined){a.fontWeight={value:i.titleFontWeight}}a=o.extend(a,t||{});return o.keys(a).length>0?a:undefined}e.title=i})(m=t.properties||(t.properties={}))},k2D6:function(e,t,r){"use strict";var n=r("P/aK");var i=r("o+e1");var a=r("MtYt");var s;(function(e){function t(){return"area"}e.markType=t;function r(e){var t={};var r=e.config();var i=r.mark.orient;if(i){t.orient={value:i}}var f=e.stack();var c=s(e.encoding().x,e.scaleName(n.X),i,f);if(c){t.x=c}var d=u(e.encoding().y,e.scaleName(n.Y),i,f);if(d){t.y=d}var p=o(e.encoding().x,e.encoding().x2,e.scaleName(n.X),i,f);if(p){t.x2=p}var h=l(e.encoding().y,e.encoding().y2,e.scaleName(n.Y),i,f);if(h){t.y2=h}a.applyColorAndOpacity(t,e);a.applyMarkConfig(t,e,["interpolate","tension"]);return t}e.properties=r;function s(e,t,r,a){if(a&&n.X===a.fieldChannel){return{scale:t,field:i.field(e,{suffix:"_start"})}}else if(i.isMeasure(e)){if(r==="horizontal"){if(e&&e.field){return{scale:t,field:i.field(e)}}else{return{scale:t,value:0}}}else{return{scale:t,field:i.field(e)}}}else if(i.isDimension(e)){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}return undefined}e.x=s;function o(e,t,r,a,s){if(s&&n.X===s.fieldChannel){if(a==="horizontal"){return{scale:r,field:i.field(e,{suffix:"_end"})}}}else if(i.isMeasure(t)){if(a==="horizontal"){if(t&&t.field){return{scale:r,field:i.field(t)}}else{return{scale:r,value:0}}}}return undefined}e.x2=o;function u(e,t,r,a){if(a&&n.Y===a.fieldChannel){return{scale:t,field:i.field(e,{suffix:"_start"})}}else if(i.isMeasure(e)){if(r!=="horizontal"){if(e&&e.field){return{scale:t,field:i.field(e)}}else{return{field:{group:"height"}}}}else{return{scale:t,field:i.field(e)}}}else if(i.isDimension(e)){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}return undefined}e.y=u;function l(e,t,r,a,s){if(s&&n.Y===s.fieldChannel){if(a!=="horizontal"){return{scale:r,field:i.field(e,{suffix:"_end"})}}}else if(i.isMeasure(e)){if(a!=="horizontal"){if(t&&t.field){return{scale:r,field:i.field(t)}}else{return{scale:r,value:0}}}}return undefined}e.y2=l;function f(e){return undefined}e.labels=f})(s=t.area||(t.area={}))},k66X:function(e,t,r){"use strict";var n=r("ZAUf");var i=r("wKIX");var a;(function(e){function t(e){return e.reduce(function(e,t,r){if(t.timeUnit){var n=i.rawDomain(t.timeUnit,r);if(n){e[t.timeUnit]=true}}return e},{})}e.parseUnit=t;function r(e){return n.extend(t(e),e.child().component.data.timeUnitDomain)}e.parseFacet=r;function a(e){return n.extend(t(e),e.children().forEach(function(e){return e.component.data.timeUnitDomain}))}e.parseLayer=a;function s(e){return n.keys(e.timeUnitDomain).reduce(function(e,t){var r=t;var n=i.rawDomain(r,null);if(n){e.push({name:r,values:n,transform:[{type:"formula",field:"date",expr:i.parseExpression(r,"datum.data",true)}]})}return e},[])}e.assemble=s})(a=t.timeUnitDomain||(t.timeUnitDomain={}))},kowr:function(e,t,r){"use strict";var n=r("x6Fv");var i=r("o+e1");var a;(function(e){function t(e){var t=e.stack();if(t){var r=t.groupbyChannel;var i=t.fieldChannel;return{name:e.dataName(n.STACKED_SCALE),source:e.dataName(n.SUMMARY),transform:[{type:"aggregate",groupby:[e.field(r)],summarize:[{ops:["sum"],field:e.field(i)}]}]}}return null}e.parseUnit=t;function r(e){var t=e.child();var r=t.component.data;if(!r.source&&r.stackScale){var a=r.stackScale;var s=e.dataName(n.STACKED_SCALE);t.renameData(a.name,s);a.name=s;a.source=e.dataName(n.SUMMARY);a.transform[0].groupby=e.reduce(function(e,t){e.push(i.field(t));return e},a.transform[0].groupby);delete r.stackScale;return a}return null}e.parseFacet=r;function a(e){return null}e.parseLayer=a;function s(e){return e.stackScale}e.assemble=s})(a=t.stackScale||(t.stackScale={}))},"l/hG":function(e,t,r){var n=r("F3Ub");var i=["items","axisItems","legendItems"];var a=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function s(e,t){return JSON.stringify(e,a,t)}function o(e){var t=typeof e==="string"?JSON.parse(e):e;return u(t)}function u(e){var t=e.marktype,r,a,s,o,l;for(s=0,o=i.length;s<o;++s){if(l=e[i[s]]){for(r=0,a=l.length;r<a;++r){l[r][t?"mark":"group"]=e;if(!t||t==="group"){u(l[r])}}}}if(t)n.mark(e);return e}e.exports={toJSON:s,fromJSON:o}},lKLM:function(e,t,r){var n=r("zicW"),i=r("zsFm").Tuple,a=r("SbOu"),s=r("v0Fq");var o=new(r("2pdF").Bounds);var u="ordinal";function l(e,t){var r,l=t.orient,d=0,h=t.titleOffset,m={},E="front",A=false,O=null,M=t.tickSize,w=t.tickSize,L=t.tickSize,N=t.tickPadding||t.padding,C=null,R=null,I=null,D=0,U=t.ticks,P={},z={},F={},j={},Y={},$={},q={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}};var W={};function H(){m.type=null}function X(e){return{data:e}}function G(e){var t=C||(r.ticks?r.ticks(U):r.domain()),n=c(r,t,D).map(X);t=t.map(function(t){return t=X(t),t.label=e(t.data),t});return[t,n]}W.def=function(){if(!m.type)B(r);var e=s.getTickFormat(r,U,I,R),t=G(e),n=O?[O].map(X):[];m.marks[0].from=function(){return A?t[0]:[]};m.marks[1].from=function(){return t[0]};m.marks[2].from=function(){return t[1]};m.marks[3].from=m.marks[1].from;m.marks[4].from=function(){return[1]};m.marks[5].from=function(){return n};m.offset=d;m.orient=l;m.layer=E;if(h==="auto")V(m);return m};function V(e){var r=e.orient,n=e.marks[5].properties.update,a=n.encode,s=t.titleOffsetAutoMin,u=t.titleOffsetAutoMax,l=t.titleOffsetAutoMargin;n.encode=function(e,t,n,f,c,d){var p=a.call(a,e,t,n,f,c,d),h=r==="bottom"||r==="top"?"y":"x";if(Y[h]!=null)return p;o.clear().union(t.items[3].bounds).union(t.items[4].bounds);var m=n?{}:e,g=r==="left"||r==="right"?"width":"height",v=r==="top"||r==="left"?-1:1,y=~~(o[g]()+e.fontSize/2+l);i.set(m,h,v*Math.min(Math.max(s,y),u));if(n)n.interpolate(e,m);return true}}function B(r){var i,s,o;if(r.type===u){i={scale:r.scaleName,offset:.5+r.rangeBand()/2};s=i}else{i={scale:r.scaleName,offset:.5};s={scale:r.scaleName+":prev",offset:.5}}o=p(r);n.extend(q.gridLines,x(t));n.extend(q.majorTicks,x(t));n.extend(q.minorTicks,x(t));n.extend(q.tickLabels,k(t));n.extend(q.domain,T(t));n.extend(q.title,S(t));q.gridLines.properties.enter.stroke={value:t.gridColor};q.gridLines.properties.enter.strokeOpacity={value:t.gridOpacity};q.gridLines.properties.enter.strokeWidth={value:t.gridWidth};q.gridLines.properties.enter.strokeDash={value:t.gridDash};v(l,q.gridLines,s,i,Infinity,r,t,d);v(l,q.majorTicks,s,i,M,r,t);v(l,q.minorTicks,s,i,w,r,t);g(l,q.tickLabels,s,i,M,N);_(l,q.domain,o,L);y(l,q.title,o,+h||-1);n.extend(q.gridLines.properties.update,P);n.extend(q.majorTicks.properties.update,F);n.extend(q.minorTicks.properties.update,j);n.extend(q.tickLabels.properties.update,z);n.extend(q.domain.properties.update,$);n.extend(q.title.properties.update,Y);var f=[q.gridLines,q.majorTicks,q.minorTicks,q.tickLabels,q.domain,q.title];n.extend(m,{type:"group",interactive:false,properties:{enter:{encode:b,scales:[r.scaleName],signals:[],data:[]},update:{encode:b,scales:[r.scaleName],signals:[],data:[]}}});m.marks=f.map(function(t){return a(e,t)})}W.scale=function(e){if(!arguments.length)return r;if(r!==e){r=e;H()}return W};W.orient=function(e){if(!arguments.length)return l;if(l!==e){l=e in f?e+"":t.orient;H()}return W};W.title=function(e){if(!arguments.length)return O;if(O!==e){O=e;H()}return W};W.tickCount=function(e){if(!arguments.length)return U;U=e;return W};W.tickValues=function(e){if(!arguments.length)return C;C=e;return W};W.tickFormat=function(e){if(!arguments.length)return R;if(R!==e){R=e;H()}return W};W.tickFormatType=function(e){if(!arguments.length)return I;if(I!==e){I=e;H()}return W};W.tickSize=function(e,t){if(!arguments.length)return M;var r=arguments.length-1,n=+e,i=r>1?+t:M,a=r>0?+arguments[r]:M;if(M!==n||w!==i||L!==a){H()}M=n;w=i;L=a;return W};W.tickSubdivide=function(e){if(!arguments.length)return D;D=+e;return W};W.offset=function(e){if(!arguments.length)return d;d=n.isObject(e)?e:+e;return W};W.tickPadding=function(e){if(!arguments.length)return N;if(N!==+e){N=+e;H()}return W};W.titleOffset=function(e){if(!arguments.length)return h;if(h!==e){h=e;H()}return W};W.layer=function(e){if(!arguments.length)return E;if(E!==e){E=e;H()}return W};W.grid=function(e){if(!arguments.length)return A;if(A!==e){A=e;H()}return W};W.gridLineProperties=function(e){if(!arguments.length)return P;if(P!==e){P=e}return W};W.majorTickProperties=function(e){if(!arguments.length)return F;if(F!==e){F=e}return W};W.minorTickProperties=function(e){if(!arguments.length)return j;if(j!==e){j=e}return W};W.tickLabelProperties=function(e){if(!arguments.length)return z;if(z!==e){z=e}return W};W.titleProperties=function(e){if(!arguments.length)return Y;if(Y!==e){Y=e}return W};W.domainProperties=function(e){if(!arguments.length)return $;if($!==e){$=e}return W};W.reset=function(){H();return W};return W}var f={top:1,right:1,bottom:1,left:1};function c(e,t,r){var n=[];if(r&&t.length>1){var i=d(e.domain()),a=-1,s=t.length,o=(t[1]-t[0])/++r,u,l;while(++a<s){for(u=r;--u>0;){if((l=+t[a]-u*o)>=i[0]){n.push(l)}}}for(--a,u=0;++u<r&&(l=+t[a]+u*o)<i[1];){n.push(l)}}return n}function d(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function p(e){return e.rangeExtent?e.rangeExtent():d(e.range())}var h={bottom:"center",top:"center",left:"right",right:"left"};var m={bottom:"top",top:"bottom",left:"middle",right:"middle"};function g(e,t,r,i,a,s){a=Math.max(a,0)+s;if(e==="left"||e==="top"){a*=-1}if(e==="top"||e==="bottom"){n.extend(t.properties.enter,{x:r,y:{value:a}});n.extend(t.properties.update,{x:i,y:{value:a},align:{value:"center"},baseline:{value:m[e]}})}else{n.extend(t.properties.enter,{x:{value:a},y:r});n.extend(t.properties.update,{x:{value:a},y:i,align:{value:h[e]},baseline:{value:"middle"}})}}function v(e,t,r,i,a,s,o,l){var f=e==="left"||e==="top"?-1:1;if(a===Infinity){a=e==="top"||e==="bottom"?{field:{group:"height",level:2},mult:-f,offset:l*-f}:{field:{group:"width",level:2},mult:-f,offset:l*-f}}else{a={value:f*a,offset:l}}if(o.tickPlacement==="between"&&s.type===u){var c=s.range(),d=.5+(s.rangeBand()||(c[1]-c[0])/2);i=r=n.duplicate(i);i.offset=r.offset=d}if(e==="top"||e==="bottom"){n.extend(t.properties.enter,{x:r,y:{value:0},y2:a});n.extend(t.properties.update,{x:i,y:{value:0},y2:a});n.extend(t.properties.exit,{x:i})}else{n.extend(t.properties.enter,{x:{value:0},x2:a,y:r});n.extend(t.properties.update,{x:{value:0},x2:a,y:i});n.extend(t.properties.exit,{y:i})}}function y(e,t,r,n){var i=t.properties.update,a=~~((r[0]+r[1])/2),s=e==="top"||e==="left"?-1:1;if(e==="bottom"||e==="top"){i.x={value:a};i.angle={value:0};if(n>=0)i.y={value:s*n}}else{i.y={value:a};i.angle={value:e==="left"?-90:90};if(n>=0)i.x={value:s*n}}}function _(e,t,r,n){var i;if(e==="top"||e==="left"){n=-1*n}if(e==="bottom"||e==="top"){i="M"+r[0]+","+n+"V0H"+r[1]+"V"+n}else{i="M"+n+","+r[0]+"H0V"+r[1]+"H"+n}t.properties.update.path={value:i}}function b(e,t,r){var a=r?{}:e,s=e.mark.def.offset,o=e.mark.def.orient,u=t.width,l=t.height;if(n.isArray(s)){var f=s[0],c=s[1];switch(o){case"left":{i.set(a,"x",-f);i.set(a,"y",c);break}case"right":{i.set(a,"x",u+f);i.set(a,"y",c);break}case"bottom":{i.set(a,"x",f);i.set(a,"y",l+c);break}case"top":{i.set(a,"x",f);i.set(a,"y",-c);break}default:{i.set(a,"x",f);i.set(a,"y",c)}}}else{if(n.isObject(s)){s=-t.scale(s.scale)(s.value)}switch(o){case"left":{i.set(a,"x",-s);i.set(a,"y",0);break}case"right":{i.set(a,"x",u+s);i.set(a,"y",0);break}case"bottom":{i.set(a,"x",0);i.set(a,"y",l+s);break}case"top":{i.set(a,"x",0);i.set(a,"y",-s);break}default:{i.set(a,"x",0);i.set(a,"y",0)}}}if(r)r.interpolate(e,a);return true}function x(e){return{type:"rule",interactive:false,key:"data",properties:{enter:{stroke:{value:e.tickColor},strokeWidth:{value:e.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function k(e){return{type:"text",interactive:true,key:"data",properties:{enter:{fill:{value:e.tickLabelColor},font:{value:e.tickLabelFont},fontSize:{value:e.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function S(e){return{type:"text",interactive:true,properties:{enter:{font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},fill:{value:e.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function T(e){return{type:"path",interactive:false,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:e.axisColor},strokeWidth:{value:e.axisWidth}},update:{}}}}e.exports=l},lkhv:function(e,t,r){var n=r("zF6n");var i=r("tGq9");e.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(n.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},m2QP:function(e,t){e.exports=function(e){function t(){}function r(t,r){e.add(t,r)}return{bounds:function(t){if(!arguments.length)return e;return e=t,this},beginPath:t,closePath:t,moveTo:r,lineTo:r,quadraticCurveTo:function(t,r,n,i){e.add(t,r);e.add(n,i)},bezierCurveTo:function(t,r,n,i,a,s){e.add(t,r);e.add(n,i);e.add(a,s)}}}},mgrV:function(e,t,r){var n=r("pd8q");var i=new Date,a=new Date(0,0,1).setFullYear(0),s=new Date(Date.UTC(0,0,1)).setUTCFullYear(0);function o(e){return i.setTime(+e),i}function u(e,t,r,n,i,a){var s={type:e,date:t,unit:r};if(n){s.step=n}else{s.minstep=1}if(i!=null)s.min=i;if(a!=null)s.max=a;return s}function l(e,t,r,n,i,a){return u(e,function(e){return t.offset(r,e)},function(e){return t.count(r,e)},n,i,a)}var f=[l("second",n.second,a),l("minute",n.minute,a),l("hour",n.hour,a),l("day",n.day,a,[1,7]),l("month",n.month,a,[1,3,6]),l("year",n.year,a),u("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return o(e).getSeconds()},null,0,59),u("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return o(e).getMinutes()},null,0,59),u("hours",function(e){return new Date(1970,0,1,e)},function(e){return o(e).getHours()},null,0,23),u("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return o(e).getDay()},[1],0,6),u("dates",function(e){return new Date(1970,0,e)},function(e){return o(e).getDate()},[1],1,31),u("months",function(e){return new Date(1970,e%12,1)},function(e){return o(e).getMonth()},[1],0,11)];var c=[l("second",n.utcSecond,s),l("minute",n.utcMinute,s),l("hour",n.utcHour,s),l("day",n.utcDay,s,[1,7]),l("month",n.utcMonth,s,[1,3,6]),l("year",n.utcYear,s),u("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return o(e).getUTCSeconds()},null,0,59),u("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return o(e).getUTCMinutes()},null,0,59),u("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return o(e).getUTCHours()},null,0,23),u("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return o(e).getUTCDay()},[1],0,6),u("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return o(e).getUTCDate()},[1],1,31),u("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return o(e).getUTCMonth()},[1],0,11)];var d=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];function p(e,t,r,n){var i=d[0],a,s,o;for(a=1,s=d.length;a<s;++a){i=d[a];if(t>i[0]){o=t/i[0];if(o>n){return e[d[a-1][1]]}if(o>=r){return e[i[1]]}}}return e[d[s-1][1]]}function h(e){var t={},r,n;for(r=0,n=e.length;r<n;++r){t[e[r].type]=e[r]}t.find=function(t,r,n){return p(e,t,r,n)};return t}e.exports=h(f);e.exports.utc=h(c)},nIY2:function(e,t,r){var n=r("pYy3");e.exports={json:r("cwb4"),topojson:r("Z8XL"),treejson:r("jbgm"),dsv:n,csv:n.delimiter(","),tsv:n.delimiter("\t")}},nOes:function(e,t,r){"use strict";var n=r("FmT5");var i=r("P/aK");var a=r("o+e1");var s=r("ZAUf");var o;(function(e){function t(e){return e.reduce(function(t,r,o){var u=e.fieldDef(o).bin;if(u){var l=s.extend({type:"bin",field:r.field,output:{start:a.field(r,{binSuffix:"_start"}),mid:a.field(r,{binSuffix:"_mid"}),end:a.field(r,{binSuffix:"_end"})}},typeof u==="boolean"?{}:u);if(!l.maxbins&&!l.step){l.maxbins=n.autoMaxBins(o)}var f=[l];var c=e.isOrdinalScale(o)||o===i.COLOR;if(c){f.push({type:"formula",field:a.field(r,{binSuffix:"_range"}),expr:a.field(r,{datum:true,binSuffix:"_start"})+" + '-' + "+a.field(r,{datum:true,binSuffix:"_end"})})}var d=s.hash(u)+"_"+r.field+"oc:"+c;t[d]=f}return t},{})}e.parseUnit=t;function r(e){var r=t(e);var n=e.child().component.data;if(!n.source){s.extend(r,n.bin);delete n.bin}return r}e.parseFacet=r;function o(e){var r=t(e);e.children().forEach(function(e){var t=e.component.data;if(!t.source){s.extend(r,t.bin);delete t.bin}});return r}e.parseLayer=o;function u(e){return s.flatten(s.vals(e.bin))}e.assemble=u})(o=t.bin||(t.bin={}))},nXcD:function(e,t,r){var n=r("zF6n"),i=r("ggRp"),a=r("uHQN"),s=r("yQql");e.exports={table:l,summary:f};var o={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'};var u={number:"left",integer:"left"};function l(e,t){t=n.extend({separator:" ",minwidth:8,maxwidth:15},t);var r=t.fields||n.keys(e[0]),l=i.all(e);if(t.start||t.limit){var f=t.start||0,c=t.limit?f+t.limit:e.length;e=e.slice(f,c)}var d=r.map(function(r){var n=o[l[r]]||"",i=s("{{"+r+n+"}}"),u=a.max(e,function(e){return i(e).length});u=Math.max(Math.min(r.length,t.minwidth),u);return t.maxwidth>0?Math.min(u,t.maxwidth):u});var p=r.map(function(e,t){return n.truncate(n.pad(e,d[t],"center"),d[t])}).join(t.separator);var h=s(r.map(function(e,t){return"{{"+e+(o[l[e]]||"")+("|pad:"+d[t]+","+(u[l[e]]||"right"))+("|truncate:"+d[t])+"}}"}).join(t.separator));return p+"\n"+e.map(h).join("\n")}function f(e){e=e?e.__summary__?e:a.summary(e):this;var t=[],r,n;for(r=0,n=e.length;r<n;++r){t.push("-- "+e[r].field+" --");if(e[r].type==="string"||e[r].distinct<10){t.push(d(e[r]))}else{t.push(c(e[r]))}t.push("")}return t.join("\n")}function c(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function d(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "];var r=e.unique;var i=n.keys(r).sort(function(e,t){return r[t]-r[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+r[e]+")"});return t.concat(i).join("\n")}},nxjn:function(e,t){e.exports=function(){"use strict";var e,t,r,n,i,a,s,o,u,l,f,c,d,p,h;e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};t={};t[e.BooleanLiteral]="Boolean";t[e.EOF]="<end>";t[e.Identifier]="Identifier";t[e.Keyword]="Keyword";t[e.NullLiteral]="Null";t[e.NumericLiteral]="Numeric";t[e.Punctuator]="Punctuator";t[e.StringLiteral]="String";t[e.RegularExpression]="RegularExpression";r={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"};n={Data:1,Get:2,Set:4};i={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};a={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function m(e,t){if(!e){throw new Error("ASSERT: "+t)}}function g(e){return e>=48&&e<=57}function v(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function y(e){return"01234567".indexOf(e)>=0}function _(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function b(e){return e===10||e===13||e===8232||e===8233}function x(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&a.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function k(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&a.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function S(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return true;default:return false}}function T(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function E(e){if(o&&T(e)){return true}switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function A(){var e,t;t=u===0;while(u<c){e=s.charCodeAt(u);if(_(e)){++u}else if(b(e)){++u;if(e===13&&s.charCodeAt(u)===10){++u}++l;f=u;t=true}else{break}}}function O(e){var t,r,n,i=0;r=e==="u"?4:2;for(t=0;t<r;++t){if(u<c&&v(s[u])){n=s[u++];i=i*16+"0123456789abcdef".indexOf(n.toLowerCase())}else{return""}}return String.fromCharCode(i)}function M(){var e,t,r,n;e=s[u];t=0;if(e==="}"){ee({},i.UnexpectedToken,"ILLEGAL")}while(u<c){e=s[u++];if(!v(e)){break}t=t*16+"0123456789abcdef".indexOf(e.toLowerCase())}if(t>1114111||e!=="}"){ee({},i.UnexpectedToken,"ILLEGAL")}if(t<=65535){return String.fromCharCode(t)}r=(t-65536>>10)+55296;n=(t-65536&1023)+56320;return String.fromCharCode(r,n)}function w(){var e,t;e=s.charCodeAt(u++);t=String.fromCharCode(e);if(e===92){if(s.charCodeAt(u)!==117){ee({},i.UnexpectedToken,"ILLEGAL")}++u;e=O("u");if(!e||e==="\\"||!x(e.charCodeAt(0))){ee({},i.UnexpectedToken,"ILLEGAL")}t=e}while(u<c){e=s.charCodeAt(u);if(!k(e)){break}++u;t+=String.fromCharCode(e);if(e===92){t=t.substr(0,t.length-1);if(s.charCodeAt(u)!==117){ee({},i.UnexpectedToken,"ILLEGAL")}++u;e=O("u");if(!e||e==="\\"||!k(e.charCodeAt(0))){ee({},i.UnexpectedToken,"ILLEGAL")}t+=e}}return t}function L(){var e,t;e=u++;while(u<c){t=s.charCodeAt(u);if(t===92){u=e;return w()}if(k(t)){++u}else{break}}return s.slice(e,u)}function N(){var t,r,n;t=u;r=s.charCodeAt(u)===92?w():L();if(r.length===1){n=e.Identifier}else if(E(r)){n=e.Keyword}else if(r==="null"){n=e.NullLiteral}else if(r==="true"||r==="false"){n=e.BooleanLiteral}else{n=e.Identifier}return{type:n,value:r,lineNumber:l,lineStart:f,start:t,end:u}}function C(){var t=u,r=s.charCodeAt(u),n,a=s[u],o,c,d;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:++u;if(h.tokenize){if(r===40){h.openParenToken=h.tokens.length}else if(r===123){h.openCurlyToken=h.tokens.length}}return{type:e.Punctuator,value:String.fromCharCode(r),lineNumber:l,lineStart:f,start:t,end:u};default:n=s.charCodeAt(u+1);if(n===61){switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:u+=2;return{type:e.Punctuator,value:String.fromCharCode(r)+String.fromCharCode(n),lineNumber:l,lineStart:f,start:t,end:u};case 33:case 61:u+=2;if(s.charCodeAt(u)===61){++u}return{type:e.Punctuator,value:s.slice(t,u),lineNumber:l,lineStart:f,start:t,end:u}}}}d=s.substr(u,4);if(d===">>>="){u+=4;return{type:e.Punctuator,value:d,lineNumber:l,lineStart:f,start:t,end:u}}c=d.substr(0,3);if(c===">>>"||c==="<<="||c===">>="){u+=3;return{type:e.Punctuator,value:c,lineNumber:l,lineStart:f,start:t,end:u}}o=c.substr(0,2);if(a===o[1]&&"+-<>&|".indexOf(a)>=0||o==="=>"){u+=2;return{type:e.Punctuator,value:o,lineNumber:l,lineStart:f,start:t,end:u}}if("<>=!+-*%&|^/".indexOf(a)>=0){++u;return{type:e.Punctuator,value:a,lineNumber:l,lineStart:f,start:t,end:u}}ee({},i.UnexpectedToken,"ILLEGAL")}function R(t){var r="";while(u<c){if(!v(s[u])){break}r+=s[u++]}if(r.length===0){ee({},i.UnexpectedToken,"ILLEGAL")}if(x(s.charCodeAt(u))){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:l,lineStart:f,start:t,end:u}}function I(t){var r="0"+s[u++];while(u<c){if(!y(s[u])){break}r+=s[u++]}if(x(s.charCodeAt(u))||g(s.charCodeAt(u))){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.NumericLiteral,value:parseInt(r,8),octal:true,lineNumber:l,lineStart:f,start:t,end:u}}function D(){var t,r,n;n=s[u];m(g(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point");r=u;t="";if(n!=="."){t=s[u++];n=s[u];if(t==="0"){if(n==="x"||n==="X"){++u;return R(r)}if(y(n)){return I(r)}if(n&&g(n.charCodeAt(0))){ee({},i.UnexpectedToken,"ILLEGAL")}}while(g(s.charCodeAt(u))){t+=s[u++]}n=s[u]}if(n==="."){t+=s[u++];while(g(s.charCodeAt(u))){t+=s[u++]}n=s[u]}if(n==="e"||n==="E"){t+=s[u++];n=s[u];if(n==="+"||n==="-"){t+=s[u++]}if(g(s.charCodeAt(u))){while(g(s.charCodeAt(u))){t+=s[u++]}}else{ee({},i.UnexpectedToken,"ILLEGAL")}}if(x(s.charCodeAt(u))){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.NumericLiteral,value:parseFloat(t),lineNumber:l,lineStart:f,start:r,end:u}}function U(){var t="",r,n,a,o,d,p,h=false,g,v;g=l;v=f;r=s[u];m(r==="'"||r==='"',"String literal must starts with a quote");n=u;++u;while(u<c){a=s[u++];if(a===r){r="";break}else if(a==="\\"){a=s[u++];if(!a||!b(a.charCodeAt(0))){switch(a){case"u":case"x":if(s[u]==="{"){++u;t+=M()}else{p=u;d=O(a);if(d){t+=d}else{u=p;t+=a}}break;case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:if(y(a)){o="01234567".indexOf(a);if(o!==0){h=true}if(u<c&&y(s[u])){h=true;o=o*8+"01234567".indexOf(s[u++]);if("0123".indexOf(a)>=0&&u<c&&y(s[u])){o=o*8+"01234567".indexOf(s[u++])}}t+=String.fromCharCode(o)}else{t+=a}break}}else{++l;if(a==="\r"&&s[u]==="\n"){++u}f=u}}else if(b(a.charCodeAt(0))){break}else{t+=a}}if(r!==""){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.StringLiteral,value:t,octal:h,startLineNumber:g,startLineStart:v,lineNumber:l,lineStart:f,start:n,end:u}}function P(e,t){var r=e,n;if(t.indexOf("u")>=0){r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){if(parseInt(t,16)<=1114111){return"x"}ee({},i.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x")}try{n=new RegExp(r)}catch(e){ee({},i.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}}function z(){var e,t,r,n,a;e=s[u];m(e==="/","Regular expression literal must start with a slash");t=s[u++];r=false;n=false;while(u<c){e=s[u++];t+=e;if(e==="\\"){e=s[u++];if(b(e.charCodeAt(0))){ee({},i.UnterminatedRegExp)}t+=e}else if(b(e.charCodeAt(0))){ee({},i.UnterminatedRegExp)}else if(r){if(e==="]"){r=false}}else{if(e==="/"){n=true;break}else if(e==="["){r=true}}}if(!n){ee({},i.UnterminatedRegExp)}a=t.substr(1,t.length-2);return{value:a,literal:t}}function F(){var e,t,r,n;t="";r="";while(u<c){e=s[u];if(!k(e.charCodeAt(0))){break}++u;if(e==="\\"&&u<c){e=s[u];if(e==="u"){++u;n=u;e=O("u");if(e){r+=e;for(t+="\\u";n<u;++n){t+=s[n]}}else{u=n;r+="u";t+="\\u"}te({},i.UnexpectedToken,"ILLEGAL")}else{t+="\\";te({},i.UnexpectedToken,"ILLEGAL")}}else{r+=e;t+=e}}return{value:r,literal:t}}function j(){var t,r,n,i;d=null;A();t=u;r=z();n=F();i=P(r.value,n.value);if(h.tokenize){return{type:e.RegularExpression,value:i,regex:{pattern:r.value,flags:n.value},lineNumber:l,lineStart:f,start:t,end:u}}return{literal:r.literal+n.literal,value:i,regex:{pattern:r.value,flags:n.value},start:t,end:u}}function Y(){var e,t,r,n;A();e=u;t={start:{line:l,column:u-f}};r=j();t.end={line:l,column:u-f};if(!h.tokenize){if(h.tokens.length>0){n=h.tokens[h.tokens.length-1];if(n.range[0]===e&&n.type==="Punctuator"){if(n.value==="/"||n.value==="/="){h.tokens.pop()}}}h.tokens.push({type:"RegularExpression",value:r.literal,regex:r.regex,range:[e,u],loc:t})}return r}function $(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}function q(){var e,t;e=h.tokens[h.tokens.length-1];if(!e){return Y()}if(e.type==="Punctuator"){if(e.value==="]"){return C()}if(e.value===")"){t=h.tokens[h.openParenToken-1];if(t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")){return Y()}return C()}if(e.value==="}"){if(h.tokens[h.openCurlyToken-3]&&h.tokens[h.openCurlyToken-3].type==="Keyword"){t=h.tokens[h.openCurlyToken-4];if(!t){return C()}}else if(h.tokens[h.openCurlyToken-4]&&h.tokens[h.openCurlyToken-4].type==="Keyword"){t=h.tokens[h.openCurlyToken-5];if(!t){return Y()}}else{return C()}return C()}return Y()}if(e.type==="Keyword"&&e.value!=="this"){return Y()}return C()}function W(){var t;A();if(u>=c){return{type:e.EOF,lineNumber:l,lineStart:f,start:u,end:u}}t=s.charCodeAt(u);if(x(t)){return N()}if(t===40||t===41||t===59){return C()}if(t===39||t===34){return U()}if(t===46){if(g(s.charCodeAt(u+1))){return D()}return C()}if(g(t)){return D()}if(h.tokenize&&t===47){return q()}return C()}function H(){var r,n,i,a;A();r={start:{line:l,column:u-f}};n=W();r.end={line:l,column:u-f};if(n.type!==e.EOF){i=s.slice(n.start,n.end);a={type:t[n.type],value:i,range:[n.start,n.end],loc:r};if(n.regex){a.regex={pattern:n.regex.pattern,flags:n.regex.flags}}h.tokens.push(a)}return n}function X(){var e;e=d;u=e.end;l=e.lineNumber;f=e.lineStart;d=typeof h.tokens!=="undefined"?H():W();u=e.end;l=e.lineNumber;f=e.lineStart;return e}function G(){var e,t,r;e=u;t=l;r=f;d=typeof h.tokens!=="undefined"?H():W();u=e;l=t;f=r}function V(){this.line=l;this.column=u-f}function B(){this.start=new V;this.end=null}function J(t){if(t.type===e.StringLiteral){this.start={line:t.startLineNumber,column:t.start-t.startLineStart}}else{this.start={line:t.lineNumber,column:t.start-t.lineStart}}this.end=null}function Z(){u=d.start;if(d.type===e.StringLiteral){l=d.startLineNumber;f=d.startLineStart}else{l=d.lineNumber;f=d.lineStart}if(h.range){this.range=[u,0]}if(h.loc){this.loc=new B}}function Q(e){if(h.range){this.range=[e.start,0]}if(h.loc){this.loc=new J(e)}}Q.prototype=Z.prototype={finish:function(){if(h.range){this.range[1]=u}if(h.loc){this.loc.end=new V;if(h.source){this.loc.source=h.source}}},finishArrayExpression:function(e){this.type=r.ArrayExpression;this.elements=e;this.finish();return this},finishAssignmentExpression:function(e,t,n){this.type=r.AssignmentExpression;this.operator=e;this.left=t;this.right=n;this.finish();return this},finishBinaryExpression:function(e,t,n){this.type=e==="||"||e==="&&"?r.LogicalExpression:r.BinaryExpression;this.operator=e;this.left=t;this.right=n;this.finish();return this},finishCallExpression:function(e,t){this.type=r.CallExpression;this.callee=e;this.arguments=t;this.finish();return this},finishConditionalExpression:function(e,t,n){this.type=r.ConditionalExpression;this.test=e;this.consequent=t;this.alternate=n;this.finish();return this},finishExpressionStatement:function(e){this.type=r.ExpressionStatement;this.expression=e;this.finish();return this},finishIdentifier:function(e){this.type=r.Identifier;this.name=e;this.finish();return this},finishLiteral:function(e){this.type=r.Literal;this.value=e.value;this.raw=s.slice(e.start,e.end);if(e.regex){if(this.raw=="//"){this.raw="/(?:)/"}this.regex=e.regex}this.finish();return this},finishMemberExpression:function(e,t,n){this.type=r.MemberExpression;this.computed=e==="[";this.object=t;this.property=n;this.finish();return this},finishObjectExpression:function(e){this.type=r.ObjectExpression;this.properties=e;this.finish();return this},finishProgram:function(e){this.type=r.Program;this.body=e;this.finish();return this},finishProperty:function(e,t,n){this.type=r.Property;this.key=t;this.value=n;this.kind=e;this.finish();return this},finishUnaryExpression:function(e,t){this.type=r.UnaryExpression;this.operator=e;this.argument=t;this.prefix=true;this.finish();return this}};function K(){var e,t,r,n;e=u;t=l;r=f;A();n=l!==t;u=e;l=t;f=r;return n}function ee(e,t){var r,n=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){m(t<n.length,"Message reference must be in range");return n[t]});if(typeof e.lineNumber==="number"){r=new Error("Line "+e.lineNumber+": "+i);r.index=e.start;r.lineNumber=e.lineNumber;r.column=e.start-f+1}else{r=new Error("Line "+l+": "+i);r.index=u;r.lineNumber=l;r.column=u-f+1}r.description=i;throw r}function te(){try{ee.apply(null,arguments)}catch(e){if(h.errors){h.errors.push(e)}else{throw e}}}function re(t){if(t.type===e.EOF){ee(t,i.UnexpectedEOS)}if(t.type===e.NumericLiteral){ee(t,i.UnexpectedNumber)}if(t.type===e.StringLiteral){ee(t,i.UnexpectedString)}if(t.type===e.Identifier){ee(t,i.UnexpectedIdentifier)}if(t.type===e.Keyword){if(S(t.value)){ee(t,i.UnexpectedReserved)}else if(o&&T(t.value)){te(t,i.StrictReservedWord);return}ee(t,i.UnexpectedToken,t.value)}ee(t,i.UnexpectedToken,t.value)}function ne(t){var r=X();if(r.type!==e.Punctuator||r.value!==t){re(r)}}function ie(t){if(h.errors){var r=d;if(r.type!==e.Punctuator&&r.value!==t){te(r,i.UnexpectedToken,r.value)}else{X()}}else{ne(t)}}function ae(t){return d.type===e.Punctuator&&d.value===t}function se(t){return d.type===e.Keyword&&d.value===t}function oe(){var t;if(s.charCodeAt(u)===59||ae(";")){X();return}t=l;A();if(l!==t){return}if(d.type!==e.EOF&&!ae("}")){re(d)}}function ue(){var e=[],t=new Z;ne("[");while(!ae("]")){if(ae(",")){X();e.push(null)}else{e.push(Ee());if(!ae("]")){ne(",")}}}X();return t.finishArrayExpression(e)}function le(){var t,r=new Z;t=X();if(t.type===e.StringLiteral||t.type===e.NumericLiteral){if(o&&t.octal){te(t,i.StrictOctalLiteral)}return r.finishLiteral(t)}return r.finishIdentifier(t.value)}function fe(){var t,r,n,i,a=new Z;t=d;if(t.type===e.Identifier){n=le();ne(":");i=Ee();return a.finishProperty("init",n,i)}if(t.type===e.EOF||t.type===e.Punctuator){re(t)}else{r=le();ne(":");i=Ee();return a.finishProperty("init",r,i)}}function ce(){var e=[],t,a,s,u,l={},f=String,c=new Z;ne("{");while(!ae("}")){t=fe();if(t.key.type===r.Identifier){a=t.key.name}else{a=f(t.key.value)}u=t.kind==="init"?n.Data:t.kind==="get"?n.Get:n.Set;s="$"+a;if(Object.prototype.hasOwnProperty.call(l,s)){if(l[s]===n.Data){if(o&&u===n.Data){te({},i.StrictDuplicateProperty)}else if(u!==n.Data){te({},i.AccessorDataProperty)}}else{if(u===n.Data){te({},i.AccessorDataProperty)}else if(l[s]&u){te({},i.AccessorGetSet)}}l[s]|=u}else{l[s]=u}e.push(t);if(!ae("}")){ie(",")}}ne("}");return c.finishObjectExpression(e)}function de(){var e;ne("(");++p.parenthesisCount;e=Ae();ne(")");return e}var pe={if:1,this:1};function he(){var t,r,n,a;if(ae("(")){return de()}if(ae("[")){return ue()}if(ae("{")){return ce()}t=d.type;a=new Z;if(t===e.Identifier||pe[d.value]){n=a.finishIdentifier(X().value)}else if(t===e.StringLiteral||t===e.NumericLiteral){if(o&&d.octal){te(d,i.StrictOctalLiteral)}n=a.finishLiteral(X())}else if(t===e.Keyword){throw new Error("Disabled.")}else if(t===e.BooleanLiteral){r=X();r.value=r.value==="true";n=a.finishLiteral(r)}else if(t===e.NullLiteral){r=X();r.value=null;n=a.finishLiteral(r)}else if(ae("/")||ae("/=")){if(typeof h.tokens!=="undefined"){n=a.finishLiteral(Y())}else{n=a.finishLiteral(j())}G()}else{re(X())}return n}function me(){var e=[];ne("(");if(!ae(")")){while(u<c){e.push(Ee());if(ae(")")){break}ie(",")}}ne(")");return e}function ge(){var e,t=new Z;e=X();if(!$(e)){re(e)}return t.finishIdentifier(e.value)}function ve(){ne(".");return ge()}function ye(){var e;ne("[");e=Ae();ne("]");return e}function _e(){var e,t,r,n,i=p.allowIn;n=d;p.allowIn=true;e=he();for(;;){if(ae(".")){r=ve();e=new Q(n).finishMemberExpression(".",e,r)}else if(ae("(")){t=me();e=new Q(n).finishCallExpression(e,t)}else if(ae("[")){r=ye();e=new Q(n).finishMemberExpression("[",e,r)}else{break}}p.allowIn=i;return e}function be(){var t=_e();if(d.type===e.Punctuator){if((ae("++")||ae("--"))&&!K()){throw new Error("Disabled.")}}return t}function xe(){var t,r,n;if(d.type!==e.Punctuator&&d.type!==e.Keyword){r=be()}else if(ae("++")||ae("--")){throw new Error("Disabled.")}else if(ae("+")||ae("-")||ae("~")||ae("!")){n=d;t=X();r=xe();r=new Q(n).finishUnaryExpression(t.value,r)}else if(se("delete")||se("void")||se("typeof")){throw new Error("Disabled.")}else{r=be()}return r}function ke(t,r){var n=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword){return 0}switch(t.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11;break;default:break}return n}function Se(){var e,t,r,n,i,a,s,o,u,l;e=d;u=xe();n=d;i=ke(n,p.allowIn);if(i===0){return u}n.prec=i;X();t=[e,d];s=xe();a=[u,n,s];while((i=ke(d,p.allowIn))>0){while(a.length>2&&i<=a[a.length-2].prec){s=a.pop();o=a.pop().value;u=a.pop();t.pop();r=new Q(t[t.length-1]).finishBinaryExpression(o,u,s);a.push(r)}n=X();n.prec=i;a.push(n);t.push(d);r=xe();a.push(r)}l=a.length-1;r=a[l];t.pop();while(l>1){r=new Q(t.pop()).finishBinaryExpression(a[l-1].value,a[l-2],r);l-=2}return r}function Te(){var e,t,r,n,i;i=d;e=Se();if(ae("?")){X();t=p.allowIn;p.allowIn=true;r=Ee();p.allowIn=t;ne(":");n=Ee();e=new Q(i).finishConditionalExpression(e,r,n)}return e}function Ee(){var e,t,r,n;e=p.parenthesisCount;n=d;t=d;r=Te();return r}function Ae(){var e=Ee();if(ae(",")){throw new Error("Disabled.")}return e}function Oe(e){var t=Ae();oe();return e.finishExpressionStatement(t)}function Me(){var t=d.type,r,n;if(t===e.EOF){re(d)}if(t===e.Punctuator&&d.value==="{"){throw new Error("Disabled.")}n=new Z;if(t===e.Punctuator){switch(d.value){case";":throw new Error("Disabled.");case"(":return Oe(n);default:break}}else if(t===e.Keyword){throw new Error("Disabled.")}r=Ae();oe();return n.finishExpressionStatement(r)}function we(){if(d.type===e.Keyword){switch(d.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return Me()}}if(d.type!==e.EOF){return Me()}}function Le(){var t,n=[],a,l,f;while(u<c){a=d;if(a.type!==e.StringLiteral){break}t=we();n.push(t);if(t.expression.type!==r.Literal){break}l=s.slice(a.start+1,a.end-1);if(l==="use strict"){o=true;if(f){te(f,i.StrictOctalLiteral)}}else{if(!f&&a.octal){f=a}}}while(u<c){t=we();if(typeof t==="undefined"){break}n.push(t)}return n}function Ne(){var e,t;A();G();t=new Z;o=true;e=Le();return t.finishProgram(e)}function Ce(){var e,t,r,n=[];for(e=0;e<h.tokens.length;++e){t=h.tokens[e];r={type:t.type,value:t.value};if(t.regex){r.regex={pattern:t.regex.pattern,flags:t.regex.flags}}if(h.range){r.range=t.range}if(h.loc){r.loc=t.loc}n.push(r)}h.tokens=n}function Re(t,r){var n,i;n=String;if(typeof t!=="string"&&!(t instanceof String)){t=n(t)}s=t;u=0;l=s.length>0?1:0;f=0;c=s.length;d=null;p={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};h={};r=r||{};r.tokens=true;h.tokens=[];h.tokenize=true;h.openParenToken=-1;h.openCurlyToken=-1;h.range=typeof r.range==="boolean"&&r.range;h.loc=typeof r.loc==="boolean"&&r.loc;if(typeof r.tolerant==="boolean"&&r.tolerant){h.errors=[]}try{G();if(d.type===e.EOF){return h.tokens}X();while(d.type!==e.EOF){try{X()}catch(e){if(h.errors){h.errors.push(e);break}else{throw e}}}Ce();i=h.tokens;if(typeof h.errors!=="undefined"){i.errors=h.errors}}catch(e){throw e}finally{h={}}return i}function Ie(e,t){var r,n;n=String;if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}s=e;u=0;l=s.length>0?1:0;f=0;c=s.length;d=null;p={allowIn:true,labelSet:{},parenthesisCount:0,inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};h={};if(typeof t!=="undefined"){h.range=typeof t.range==="boolean"&&t.range;h.loc=typeof t.loc==="boolean"&&t.loc;if(h.loc&&t.source!==null&&t.source!==undefined){h.source=n(t.source)}if(typeof t.tokens==="boolean"&&t.tokens){h.tokens=[]}if(typeof t.tolerant==="boolean"&&t.tolerant){h.errors=[]}}try{r=Ne();if(typeof h.tokens!=="undefined"){Ce();r.tokens=h.tokens}if(typeof h.errors!=="undefined"){r.errors=h.errors}}catch(e){throw e}finally{h={}}return r}return{tokenize:Re,parse:Ie}}()},"o+e1":function(e,t,r){"use strict";var n=r("h/tW");var i=r("Fw/k");var a=r("z5TJ");var s=r("WJ2w");var o=r("ZAUf");t.aggregate={type:"string",enum:n.AGGREGATE_OPS,supportedEnums:{quantitative:n.AGGREGATE_OPS,ordinal:["median","min","max"],nominal:[],temporal:["mean","median","min","max"],"":["count"]},supportedTypes:o.toMap([s.QUANTITATIVE,s.NOMINAL,s.ORDINAL,s.TEMPORAL,""])};function u(e,t){if(t===void 0){t={}}var r=(t.datum?"datum.":"")+(t.prefn||"");var n=t.suffix||"";var a=e.field;if(p(e)){return r+"count"+n}else if(t.fn){return r+t.fn+"_"+a+n}else if(!t.nofn&&e.bin){var s=t.binSuffix||(t.scaleType===i.ScaleType.ORDINAL?"_range":"_start");return r+"bin_"+a+s}else if(!t.nofn&&!t.noAggregate&&e.aggregate){return r+e.aggregate+"_"+a+n}else if(!t.nofn&&e.timeUnit){return r+e.timeUnit+"_"+a+n}else{return r+a}}t.field=u;function l(e){return o.contains([s.NOMINAL,s.ORDINAL],e.type)||!!e.bin||e.type===s.TEMPORAL&&!!e.timeUnit}function f(e){return e&&e.field&&l(e)}t.isDimension=f;function c(e){return e&&e.field&&!l(e)}t.isMeasure=c;function d(){return{field:"*",aggregate:n.AggregateOp.COUNT,type:s.QUANTITATIVE}}t.count=d;function p(e){return e.aggregate===n.AggregateOp.COUNT}t.isCount=p;function h(e,t,r){if(r===void 0){r={}}var n=t[e.field],i=e.type;if(e.bin){var u=e.bin;var l=typeof u==="boolean"?undefined:u.maxbins;if(l===undefined){l=10}var f=o.getbins(n,l);return(f.stop-f.start)/f.step}if(i===s.TEMPORAL){var c=e.timeUnit;switch(c){case a.TimeUnit.SECONDS:return 60;case a.TimeUnit.MINUTES:return 60;case a.TimeUnit.HOURS:return 24;case a.TimeUnit.DAY:return 7;case a.TimeUnit.DATE:return 31;case a.TimeUnit.MONTH:return 12;case a.TimeUnit.QUARTER:return 4;case a.TimeUnit.YEAR:var d=t["year_"+e.field];if(!d){return null}return d.distinct-(n.missing>0&&r[i]?1:0)}}if(e.aggregate){return 1}return n.distinct-(n.missing>0&&r[i]?1:0)}t.cardinality=h;function m(e,t){if(e.title!=null){return e.title}if(p(e)){return t.countTitle}var r=e.aggregate||e.timeUnit||e.bin&&"bin";if(r){return r.toString().toUpperCase()+"("+e.field+")"}else{return e.field}}t.title=m},oCPx:function(e,t,r){var n=r("2pdF").render,i=n.canvas,a=n.svg.string,s=r("+5nH");function o(e,t,r){s.call(this,e,t,r);this._type="canvas";this._renderers={canvas:i,svg:a}}var u=o.prototype=new s;u.renderer=function(e){if(e)this._type=e;return s.prototype.renderer.apply(this,arguments)};u.canvas=function(){return this._type==="canvas"?this._renderer.canvas():null};u.canvasAsync=function(e){var t=this._renderer,r=this;function n(){if(t.pendingImages()===0){r.render();e(r.canvas())}else{setTimeout(n,10)}}if(this._type!=="canvas")return null;if(t.pendingImages()>0){n()}else{e(this.canvas())}};u.svg=function(){return this._type==="svg"?this._renderer.svg():null};u.initialize=function(){var e=this._width,t=this._height,r=this._bgcolor,n=this._padding,i=this.model().config();if(this._viewport){e=this._viewport[0]-(n?n.left+n.right:0);t=this._viewport[1]-(n?n.top+n.bottom:0)}this._renderer=(this._renderer||new this._io.Renderer(i.load)).initialize(null,e,t,n).background(r);return this._repaint=true,this};e.exports=o},oHkv:function(e,t,r){function n(e,t){e=e||1;t=t||1;var n;if(typeof document!=="undefined"&&document.createElement){n=document.createElement("canvas");n.width=e;n.height=t}else{var i=r(11);if(!i.prototype)return null;n=new i(e,t)}return s(n)}function i(e,t,r,n,i){var s=this._ctx=e.getContext("2d"),o=1;e.width=t+n.left+n.right;e.height=r+n.top+n.bottom;if(i&&typeof HTMLElement!=="undefined"&&e instanceof HTMLElement){s.pixelratio=o=a(e)||1}s.setTransform(o,0,0,o,o*n.left,o*n.top);return e}function a(e){var t=e.getContext("2d");var r=window&&window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=r/n;if(r!==n){var a=e.width,s=e.height;e.width=a*i;e.height=s*i;e.style.width=a+"px";e.style.height=s+"px"}return i}function s(e){var t=e.getContext("2d");if(t.vgLineDash)return;var r=function(){},n=[];if(t.setLineDash){t.vgLineDash=function(e){this.setLineDash(e||n)};t.vgLineDashOffset=function(e){this.lineDashOffset=e}}else if(t.webkitLineDash!==undefined){t.vgLineDash=function(e){this.webkitLineDash=e||n};t.vgLineDashOffset=function(e){this.webkitLineDashOffset=e}}else if(t.mozDash!==undefined){t.vgLineDash=function(e){this.mozDash=e};t.vgLineDashOffset=r}else{t.vgLineDash=r;t.vgLineDashOffset=r}return e}e.exports={instance:n,resize:i,lineDash:s}},pAWG:function(e,t,r){"use strict";var n=r("ZAUf");var i;(function(e){function t(e){return(e.transform().calculate||[]).reduce(function(e,t){e[n.hash(t)]=t;return e},{})}e.parseUnit=t;function r(e){var r=t(e);var i=e.child().component.data;if(!i.source){n.extend(r,i.calculate);delete i.calculate}return r}e.parseFacet=r;function i(e){var r=t(e);e.children().forEach(function(e){var t=e.component.data;if(!t.source&&t.calculate){n.extend(r||{},t.calculate);delete t.calculate}});return r}e.parseLayer=i;function a(e){return n.vals(e.calculate).reduce(function(e,t){e.push(n.extend({type:"formula"},t));return e},[])}e.assemble=a})(i=t.formula||(t.formula={}))},pKLr:function(e,t,r){var n=r("Za4h"),i=r("zsFm"),a=i.Tuple,s=i.ChangeSet,o=r("J731"),u=r("4JPs");function l(e){u.prototype.init.call(this,e);this._prev=null;this._interactive=false;this._setup=true;this._nodes=[];this._links=[];this._layout=n.layout.force();u.addParameters(this,{size:{type:"array<value>",default:r("MRce").size},bound:{type:"value",default:true},links:{type:"data"},linkStrength:{type:"value",default:1},linkDistance:{type:"value",default:20},charge:{type:"value",default:-30},chargeDistance:{type:"value",default:Infinity},friction:{type:"value",default:.9},theta:{type:"value",default:.8},gravity:{type:"value",default:.1},alpha:{type:"value",default:.1},iterations:{type:"value",default:500},interactive:{type:"value",default:this._interactive},active:{type:"value",default:this._prev},fixed:{type:"data"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}var f=l.prototype=Object.create(u.prototype);f.constructor=l;f.transform=function(e,t){o.debug(e,["force"]);t=t-(e.signals.active?1:0);var r=this.param("interactive"),n=this.param("links").source,i=n.last(),s=this.param("active"),u=this._output,l=this._layout,f=this._nodes,c=this._links;if(i.stamp<e.stamp)i=null;this.configure(e,i,r,t);if(!r){var d=this.param("iterations");for(var p=0;p<d;++p)l.tick();l.stop()}this.update(s);if(t||s!==this._prev&&s&&s.update){l.alpha(this.param("alpha"))}if(s!==this._prev){this._prev=s}if(e.rem.length){l.nodes(this._nodes=a.idFilter(f,e.rem))}if(i&&i.rem.length){l.links(this._links=a.idFilter(c,i.rem))}e.fields[u.x]=1;e.fields[u.y]=1;return e};f.configure=function(e,t,r,n){var i=this._layout,a=this._setup||e.add.length||t&&t.add.length||r!==this._interactive||this.param("charge")!==i.charge()||this.param("linkStrength")!==i.linkStrength()||this.param("linkDistance")!==i.linkDistance();if(a||n){i.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction"))}if(!a)return;this._setup=false;this._interactive=r;var o=this,u=this._graph,l=this._nodes,f=this._links,c,d;for(c=e.add,d=0;d<c.length;++d){l.push({tuple:c[d]})}if(t)for(c=t.add,d=0;d<c.length;++d){f.push({tuple:c[d],source:l[c[d].source],target:l[c[d].target]})}var p=!r?null:function(){u.propagate(s.create(null,true),o)};i.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(l).links(f).on("tick",p).start().alpha(this.param("alpha"))};f.update=function(e){var t=this._output,r=this.param("bound"),n=this.param("fixed"),i=this.param("size"),s=this._nodes,o={},u,l,f,c,d,p;if(n&&n.source){n=n.source.values();for(l=0,f=n.length;l<f;++l){o[n[l].id]=1}}for(l=0;l<s.length;++l){f=s[l];c=f.tuple;u=c._id;if(e&&e.id===u){f.fixed=1;if(e.update){f.x=f.px=e.x;f.y=f.py=e.y}}else{f.fixed=o[u]||0}d=r?Math.max(0,Math.min(f.x,i[0])):f.x;p=r?Math.max(0,Math.min(f.y,i[1])):f.y;a.set(c,t.x,d);a.set(c,t.y,p)}};e.exports=l;l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Force transform",description:"Performs force-directed layout for network data.",type:"object",properties:{type:{enum:["force"]},size:{description:"The dimensions [width, height] of this force layout.",oneOf:[{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:[500,500]},links:{type:"string",description:"The name of the link (edge) data set."},linkDistance:{description:"Determines the length of edges, in pixels.",oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],default:20},linkStrength:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"Determines the tension of edges (the spring constant).",default:1},charge:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"The strength of the charge each node exerts.",default:-30},chargeDistance:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum distance over which charge forces are applied.",default:Infinity},iterations:{description:"The number of iterations to run the force directed layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:500},friction:{description:"The strength of the friction force used to stabilize the layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.9},theta:{description:"The theta parameter for the Barnes-Hut algorithm, which is used to compute charge forces between nodes.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.8},gravity:{description:"The strength of the pseudo-gravity force that pulls nodes towards the center of the layout area.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},alpha:{description:'A "temperature" parameter that determines how much node positions are adjusted at each step.',oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},interactive:{description:"Enables an interactive force-directed layout.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},active:{description:"A signal representing the active node.",$ref:"#/refs/signal"},fixed:{description:"The name of a datasource containing the IDs of nodes with fixed positions.",type:"string"},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"}},additionalProperties:false}},additionalProperties:false,required:["type","links"]}},pYy3:function(e,t,r){var n=r("zF6n");var i=r("SAbC");function a(e,t){if(e){var r=t.header;e=(r?r.join(t.delimiter)+"\n":"")+e}return i.dsv(t.delimiter).parse(e)}a.delimiter=function(e){var t={delimiter:e};return function(e,r){return a(e,r?n.extend(r,t):t)}};e.exports=a},pd8q:function(e,t,r){(function(e,r){true?r(t):typeof define==="function"&&define.amd?define("d3-time",["exports"],r):r(e.d3_time={})})(this,function(e){"use strict";var t=new Date;var r=new Date;function n(e,i,a,s){function o(t){return e(t=new Date(+t)),t}o.floor=o;o.round=function(t){var r=new Date(+t),n=new Date(t-1);e(r),e(n),i(n,1);return t-r<n-t?r:n};o.ceil=function(t){return e(t=new Date(t-1)),i(t,1),t};o.offset=function(e,t){return i(e=new Date(+e),t==null?1:Math.floor(t)),e};o.range=function(t,r,n){var a=[];t=new Date(t-1);r=new Date(+r);n=n==null?1:Math.floor(n);if(!(t<r)||!(n>0))return a;i(t,1),e(t);if(t<r)a.push(new Date(+t));while(i(t,n),e(t),t<r)a.push(new Date(+t));return a};o.filter=function(t){return n(function(r){while(e(r),!t(r))r.setTime(r-1)},function(e,r){while(--r>=0)while(i(e,1),!t(e));})};if(a){o.count=function(n,i){t.setTime(+n),r.setTime(+i);e(t),e(r);return Math.floor(a(t,r))};o.every=function(e){e=Math.floor(e);return!isFinite(e)||!(e>0)?null:!(e>1)?o:o.filter(s?function(t){return s(t)%e===0}:function(t){return o.count(0,t)%e===0})}}return o}var i=n(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});i.every=function(e){e=Math.floor(e);if(!isFinite(e)||!(e>0))return null;if(!(e>1))return i;return n(function(t){t.setTime(Math.floor(t/e)*e)},function(t,r){t.setTime(+t+r*e)},function(t,r){return(r-t)/e})};var a=n(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+t*1e3)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()});var s=n(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+t*6e4)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()});var o=n(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+t*36e5)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()});var u=n(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5},function(e){return e.getDate()-1});function l(e){return n(function(t){t.setHours(0,0,0,0);t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5})}var f=l(0);var c=l(1);var d=l(2);var p=l(3);var h=l(4);var m=l(5);var g=l(6);var v=n(function(e){e.setHours(0,0,0,0);e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var y=n(function(e){e.setHours(0,0,0,0);e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});var _=n(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+t*1e3)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()});var b=n(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*6e4)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()});var x=n(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*36e5)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()});var k=n(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1});function S(e){return n(function(t){t.setUTCHours(0,0,0,0);t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/6048e5})}var T=S(0);var E=S(1);var A=S(2);var O=S(3);var M=S(4);var w=S(5);var L=S(6);var N=n(function(e){e.setUTCHours(0,0,0,0);e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var C=n(function(e){e.setUTCHours(0,0,0,0);e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});var R=i.range;var I=a.range;var D=s.range;var U=o.range;var P=u.range;var z=f.range;var F=c.range;var j=d.range;var Y=p.range;var $=h.range;var q=m.range;var W=g.range;var H=f.range;var X=v.range;var G=y.range;var V=i;var B=R;var J=_.range;var Z=b.range;var Q=x.range;var K=k.range;var ee=T.range;var te=E.range;var re=A.range;var ne=O.range;var ie=M.range;var ae=w.range;var se=L.range;var oe=T.range;var ue=N.range;var le=C.range;var fe="0.1.1";e.version=fe;e.milliseconds=R;e.seconds=I;e.minutes=D;e.hours=U;e.days=P;e.sundays=z;e.mondays=F;e.tuesdays=j;e.wednesdays=Y;e.thursdays=$;e.fridays=q;e.saturdays=W;e.weeks=H;e.months=X;e.years=G;e.utcMillisecond=V;e.utcMilliseconds=B;e.utcSeconds=J;e.utcMinutes=Z;e.utcHours=Q;e.utcDays=K;e.utcSundays=ee;e.utcMondays=te;e.utcTuesdays=re;e.utcWednesdays=ne;e.utcThursdays=ie;e.utcFridays=ae;e.utcSaturdays=se;e.utcWeeks=oe;e.utcMonths=ue;e.utcYears=le;e.millisecond=i;e.second=a;e.minute=s;e.hour=o;e.day=u;e.sunday=f;e.monday=c;e.tuesday=d;e.wednesday=p;e.thursday=h;e.friday=m;e.saturday=g;e.week=f;e.month=v;e.year=y;e.utcSecond=_;e.utcMinute=b;e.utcHour=x;e.utcDay=k;e.utcSunday=T;e.utcMonday=E;e.utcTuesday=A;e.utcWednesday=O;e.utcThursday=M;e.utcFriday=w;e.utcSaturday=L;e.utcWeek=T;e.utcMonth=N;e.utcYear=C;e.interval=n})},prMK:function(e,t,r){var n=r("zF6n"),i=r("mgrV"),a=1e-15;function s(e){if(!e){throw Error("Missing binning options.")}var t=e.maxbins||15,r=e.base||10,n=Math.log(r),i=e.div||[5,2],a=e.min,s=e.max,f=s-a,c,d,p,h,m,g,v;if(e.step){c=e.step}else if(e.steps){c=e.steps[Math.min(e.steps.length-1,o(e.steps,f/t,0,e.steps.length))]}else{d=Math.ceil(Math.log(t)/n);p=e.minstep||0;c=Math.max(p,Math.pow(r,Math.round(Math.log(f)/n)-d));while(Math.ceil(f/c)>t){c*=r}for(g=0;g<i.length;++g){m=c/i[g];if(m>=p&&f/m<=t)c=m}}m=Math.log(c);h=m>=0?0:~~(-m/n)+1;v=Math.pow(r,-h-1);a=Math.min(a,Math.floor(a/c+v)*c);s=Math.ceil(s/c)*c;return{start:a,stop:s,step:c,unit:{precision:h},value:u,index:l}}function o(e,t,r,i){while(r<i){var a=r+i>>>1;if(n.cmp(e[a],t)<0){r=a+1}else{i=a}}return r}function u(e){return this.step*Math.floor(e/this.step+a)}function l(e){return Math.floor((e-this.start)/this.step+a)}function f(e){return this.unit.date(u.call(this,e))}function c(e){return l.call(this,this.unit.unit(e))}s.date=function(e){if(!e){throw Error("Missing date binning options.")}var t=e.utc?i.utc:i,r=e.min,n=e.max,a=e.maxbins||20,o=e.minbins||4,u=+n-+r,l=e.unit?t[e.unit]:t.find(u,o,a),d=s({min:l.min!=null?l.min:l.unit(r),max:l.max!=null?l.max:l.unit(n),maxbins:a,minstep:l.minstep,steps:l.step});d.unit=l;d.index=c;if(!e.raw)d.value=f;return d};e.exports=s},pvXc:function(e,t,r){var n=r("FF9f");function i(e,t,r){if(!t.items||!t.items.length)return;var n=this,i=t.items,a;for(var s=0,o=i.length;s<o;++s){a=i[s];if(r&&!r.intersects(a.bounds))continue;if(!(a.image&&a.image.url===a.url)){a.image=n.loadImage(a.url);a.image.url=a.url}var u=a.x||0,l=a.y||0,f=a.width||a.image&&a.image.width||0,c=a.height||a.image&&a.image.height||0,d;u=u-(a.align==="center"?f/2:a.align==="right"?f:0);l=l-(a.baseline==="middle"?c/2:a.baseline==="bottom"?c:0);if(a.image.loaded){e.globalAlpha=(d=a.opacity)!=null?d:1;e.drawImage(a.image,u,l,f,c)}}}e.exports={draw:i,pick:n.pick()}},pyUU:function(e,t,r){"use strict";var n=r("P/aK");var i=r("QSMf");var a=r("o+e1");var s=r("j8cM");var o=r("ZAUf");function u(e,t,r){return o.extend(["filled","opacity","orient","align"].reduce(function(u,l){var f=r.mark[l];switch(l){case"filled":if(f===undefined){u[l]=e!==s.POINT&&e!==s.LINE&&e!==s.RULE}break;case"opacity":if(f===undefined){if(o.contains([s.POINT,s.TICK,s.CIRCLE,s.SQUARE],e)){if(!i.isAggregate(t)||i.has(t,n.DETAIL)){u[l]=.7}}if(e===s.AREA){u[l]=.7}}break;case"orient":var c=a.isMeasure(t.x)||a.isMeasure(t.x2);var d=a.isMeasure(t.y)||a.isMeasure(t.y2);if(c&&!d){if(e===s.TICK){u[l]="vertical"}else{u[l]="horizontal"}}else if(!c&&d){if(e===s.TICK){u[l]="horizontal"}else{u[l]="vertical"}}break;case"align":if(f===undefined){u[l]=i.has(t,n.X)?"center":"right"}}return u},{}),r.mark)}t.initMarkConfig=u},qmQ9:function(e,t,r){var n=r("prMK"),i=r("YsQl"),a=r("ggRp"),s=r("zF6n"),o=r("uHQN");var u={integer:1,number:1,date:1};function l(e,t,r){r=d(e,t,r);var n=c(r);return!n?r.accessor||s.identity:s.$func("bin",n.unit.unit?function(e){return n.value(n.unit.unit(e))}:function(e){return n.value(e)})(r.accessor)}function f(e,t,r){r=d(e,t,r);var n=c(r);return n?p(e,r.accessor,n):h(e,r.accessor,r&&r.sort)}function c(e){var t=e.type,r=null;if(t==null||u[t]){if(t==="integer"&&e.minstep==null)e.minstep=1;r=t==="date"?n.date(e):n(e)}return r}function d(){var e=arguments,t=0,r=s.isArray(e[t])?e[t++]:null,n=s.isFunction(e[t])||s.isString(e[t])?s.$(e[t++]):null,i=s.extend({},e[t]);if(r){i.type=i.type||a(r,n);if(u[i.type]){var l=o.extent(r,n);i=s.extend({min:l[0],max:l[1]},i)}}if(n){i.accessor=n}return i}function p(e,t,r){var n=i.range(r.start,r.stop+r.step/2,r.step).map(function(e){return{value:r.value(e),count:0}});for(var a=0,o,u;a<e.length;++a){o=t?t(e[a]):e[a];if(s.isValid(o)){u=r.index(o);if(u<0||u>=n.length||!isFinite(u))continue;n[u].count+=1}}n.bins=r;return n}function h(e,t,r){var n=o.unique(e,t),i=o.count.map(e,t);return n.map(function(e){return{value:e,count:i[e]}}).sort(s.comparator(r?"-count":"+value"))}e.exports={$bin:l,histogram:f}},qtVb:function(e,t,r){var n=r("FF9f");function i(e,t,r){if(!t.items||!t.items.length)return;var i=t.items,a,s,o,u,l,f;for(var c=0,d=i.length;c<d;++c){a=i[c];if(r&&!r.intersects(a.bounds))continue;s=a.opacity==null?1:a.opacity;if(s===0)continue;o=a.x||0;u=a.y||0;l=a.x2!=null?a.x2:o;f=a.y2!=null?a.y2:u;if(a.stroke&&n.stroke(e,a,s)){e.beginPath();e.moveTo(o,u);e.lineTo(l,f);e.stroke()}}}function a(e,t){var r=t.x||0,n=t.y||0,i=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:n,s=t.strokeWidth,o=t.strokeCap;e.lineWidth=s!=null?s:1;e.lineCap=o!=null?o:"butt";e.beginPath();e.moveTo(r,n);e.lineTo(i,a)}function s(e,t,r,n){if(!e.isPointInStroke)return false;a(e,t);return e.isPointInStroke(r,n)}e.exports={draw:i,pick:n.pick(s)}},r7he:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("zsFm"),s=a.Node,o=a.Tuple,u=a.Dependencies;var l={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"};var f=[];function c(e,t,r,n){var i=true,a=e.length,s,o,u,l;for(s=r.length-1;s>=0;--s){for(o=0;o<a;++o){u=e[o];l=t&&u(t)||t;if(u(r[s])!==l){i=false;break}}if(i)n.push.apply(n,r.splice(s,1));i=true}}function d(e,t,r){var n=o.ingest(t);e.add.push(n);r._data.push(n)}function p(e,t,r){var a=t.signal?n.field(t.signal):null,p=a?a[0]:null,h=t.predicate?e.predicate(t.predicate.name||t.predicate):null,m=t.test?e.expr(t.test):null,g=h===null&&m===null,v=t.type===l.CLEAR,y=n.array(t.field||"data"),_=y.map(n.accessor),b=y.map(n.mutator),x=new s(e).router(v);x.evaluate=function(s){var x,k;if(h!==null){x=e.values(u.DATA,h.data||f);k=e.values(u.SIGNALS,h.signals||f);g=h.call(h,{},x,k,e._predicates)}if(m!==null){k=e.values(u.SIGNALS,m.globals||f);g=m.fn()}i.debug(s,[t.type+"ing",g]);if(!g||!v&&!s.signals[p])return s;var S=a?e.signalRef(t.signal):null,T=e.data(r.name),E=null,A=[],O=[],M=0,w;if(n.isObject(S)){w=S;if(!t.field){y=n.keys(w);_=y.map(n.accessor);b=y.map(n.mutator)}}else{w={};b.forEach(function(e){e(w,S)})}if(t.type===l.INSERT){d(s,w,T)}else if(t.type===l.REMOVE){c(_,S,s.mod,s.rem);c(_,S,s.add,O);c(_,S,T._data,O)}else if(t.type===l.UPSERT){s.mod.forEach(function(e){var t=_.every(function(t){return t(e)===t(w)});if(t)M=(n.extend(e,w),M+1)});if(M===0)d(s,w,T)}else if(t.type===l.TOGGLE){c(_,S,s.mod,O);s.rem.push.apply(s.rem,O);c(_,S,s.add,A);if(A.length||O.length){T._data=T._data.filter(function(e){return O.indexOf(e)<0&&A.indexOf(e)<0})}else{s.add.push(E=o.ingest(w));T._data.push(E)}}else if(t.type===l.CLEAR){s.rem.push.apply(s.rem,s.mod.splice(0));s.add.splice(0);T._data.splice(0)}y.forEach(function(e){s.fields[e]=1});return s};if(p)x.dependency(u.SIGNALS,p);if(h){x.dependency(u.DATA,h.data);x.dependency(u.SIGNALS,h.signals)}if(m){x.dependency(u.SIGNALS,m.globals);x.dependency(u.DATA,m.dataSources)}return x}e.exports=p;p.schema={defs:{modify:{type:"array",items:{type:"object",oneOf:[{properties:{type:{enum:[l.INSERT,l.REMOVE,l.UPSERT,l.TOGGLE]},signal:{type:"string"},field:{type:"string"}},required:["type","signal"]},{properties:{type:{enum:[l.CLEAR]},predicate:{type:"string"}},required:["type","predicate"]},{properties:{type:{enum:[l.CLEAR]},test:{type:"string"}},required:["type","test"]}]}}}}},rCVn:function(e,t,r){var n=r("zsFm").Tuple,i=r("J731"),a=r("4JPs");function s(e){a.prototype.init.call(this,e);a.addParameters(this,{sourceX:{type:"field",default:"_source.layout_x"},sourceY:{type:"field",default:"_source.layout_y"},targetX:{type:"field",default:"_target.layout_x"},targetY:{type:"field",default:"_target.layout_y"},tension:{type:"value",default:.2},shape:{type:"value",default:"line"}});this._output={path:"layout_path"};return this.mutates(true)}var o=s.prototype=Object.create(a.prototype);o.constructor=s;function u(e,t,r,n){return"M"+e+","+t+"L"+r+","+n}function l(e,t,r,n,i){var a=r-e,s=n-t,o=i*(a+s),u=i*(s-a);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(r+u)+","+(n-o)+" "+r+","+n}function f(e,t,r,n){return"M"+e+","+t+"V"+n+"H"+r}function c(e,t,r,n){return"M"+e+","+t+"H"+r+"V"+n}function d(e,t,r,n){var i=Math.cos(e),a=Math.sin(e),s=Math.cos(r),o=Math.sin(r),u=Math.abs(r-e)>Math.PI?r<=e:r>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*o+"L"+n*s+","+n*o}function p(e,t,r,n){var i=(e+r)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+n+" "+r+","+n}function h(e,t,r,n){var i=(t+n)/2;return"M"+e+","+t+"C"+e+","+i+" "+r+","+i+" "+r+","+n}function m(e,t,r,n){var i=Math.cos(e),a=Math.sin(e),s=Math.cos(r),o=Math.sin(r),u=(t+n)/2;return"M"+t*i+","+t*a+"C"+u*i+","+u*a+" "+u*s+","+u*o+" "+n*s+","+n*o}var g={line:u,curve:l,cornerX:f,cornerY:c,cornerR:d,diagonalX:p,diagonalY:h,diagonalR:m};o.transform=function(e){i.debug(e,["linkpath"]);var t=this._output,r=g[this.param("shape")]||g.line,a=this.param("sourceX").accessor,s=this.param("sourceY").accessor,o=this.param("targetX").accessor,u=this.param("targetY").accessor,l=this.param("tension");function f(e){var i=r(a(e),s(e),o(e),u(e),l);n.set(e,t.path,i)}e.add.forEach(f);if(this.reevaluate(e)){e.mod.forEach(f);e.rem.forEach(f)}e.fields[t.path]=1;return e};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"LinkPath transform",description:"Computes a path definition for connecting nodes within a node-link network or tree diagram.",type:"object",properties:{type:{enum:["linkpath"]},sourceX:{description:"The data field that references the source x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_source"},sourceY:{description:"The data field that references the source y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_source"},targetX:{description:"The data field that references the target x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_target"},targetY:{description:"The data field that references the target y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_target"},tension:{description:'A tension parameter for the "tightness" of "curve"-shaped links.',oneOf:[{type:"number",minimum:0,maximum:1},{$ref:"#/refs/signal"}],default:.2},shape:{description:"The path shape to use",oneOf:[{enum:["line","curve","cornerX","cornerY","cornerR","diagonalX","diagonalY","diagonalR"]},{$ref:"#/refs/signal"}],default:"line"},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},rKP5:function(e,t,r){"use strict";var n=r("P/aK");var i=r("o+e1");var a=r("MtYt");var s;(function(e){function t(){return"symbol"}e.markType=t;function r(e,t){var r={};var i=e.config();r.x=s(e.encoding().x,e.scaleName(n.X),i);r.y=o(e.encoding().y,e.scaleName(n.Y),i);r.size=u(e.encoding().size,e.scaleName(n.SIZE),e.scale(n.SIZE),i);r.shape=l(e.encoding().shape,e.scaleName(n.SHAPE),e.scale(n.SHAPE),i,t);a.applyColorAndOpacity(r,e);return r}e.properties=r;function s(e,t,r){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{value:r.scale.bandSize/2}}function o(e,t,r){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{value:r.scale.bandSize/2}}function u(e,t,r,n){if(e){if(e.field){return{scale:t,field:i.field(e,{scaleType:r.type})}}else if(e.value!==undefined){return{value:e.value}}}return{value:n.mark.size}}function l(e,t,r,n,a){if(a){return{value:a}}else if(e){if(e.field){return{scale:t,field:i.field(e,{scaleType:r.type})}}else if(e.value){return{value:e.value}}}return{value:n.mark.shape}}})(s=t.point||(t.point={}));var o;(function(e){function t(){return"symbol"}e.markType=t;function r(e){return s.properties(e,"circle")}e.properties=r;function n(e){return undefined}e.labels=n})(o=t.circle||(t.circle={}));var u;(function(e){function t(){return"symbol"}e.markType=t;function r(e){return s.properties(e,"square")}e.properties=r;function n(e){return undefined}e.labels=n})(u=t.square||(t.square={}))},rO1A:function(e,t,r){e.exports={Handler:r("+Xqm"),Renderer:r("suYa")}},rnWk:function(e,t,r){var n=r("zicW"),i=r("zsFm"),a=r("2pdF"),s=i.Node,o=r("J731"),u=a.bound,l=a.Bounds,f=r("XVii");function c(e,t){this._mark=t;return s.prototype.init.call(this,e).router(true).reflows(true).mutates(true)}var d=c.prototype=new s;d.evaluate=function(e){o.debug(e,["bounds",this._mark.marktype]);var t=this._mark,r=t.marktype,a=r==="group",s=t.items,c=n.array(t.def.legends).length>0,d=t.bounds,p=!d||e.rem.length,h,m,g,v,y,_;if(r==="line"||r==="area"){u.mark(t,null,a&&!c)}else{e.add.forEach(function(e){u.item(e);p=p||d&&!d.encloses(e.bounds)});e.mod.forEach(function(e){p=p||d&&d.alignsWith(e.bounds);u.item(e)});if(p){d=t.bounds&&t.bounds.clear()||(t.bounds=new l);for(h=0,m=s.length;h<m;++h)d.union(s[h].bounds)}}if(a&&c){for(h=0,m=s.length;h<m;++h){y=s[h];y._legendPositions=null;for(g=0,v=y.legendItems.length;g<v;++g){_=y.legendItems[g];f.update(this._graph,e.trans,"legendPosition",_.items,e.dirty);u.mark(_,null,false)}}u.mark(t,null,true)}return i.ChangeSet.create(e,true)};e.exports=c},snBf:function(e,t,r){var n=r("Za4h"),i=r("zicW"),a=r("zsFm").Tuple,s=r("J731"),o=r("ct8e"),u=r("4JPs");function l(e){u.prototype.init.call(this,e);u.addParameters(this,o.Parameters);u.addParameters(this,{field:{type:"field",default:null}});this._output={path:"layout_path"};return this.mutates(true)}var f=l.prototype=Object.create(u.prototype);f.constructor=l;f.transform=function(e){s.debug(e,["geopath"]);var t=this._output,r=this.param("field").accessor||i.identity,u=o.d3Projection.call(this),l=n.geo.path().projection(u);function f(e){a.set(e,t.path,l(r(e)))}e.add.forEach(f);if(this.reevaluate(e)){e.mod.forEach(f);e.rem.forEach(f)}e.fields[t.path]=1;return e};e.exports=l;l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"GeoPath transform",description:"Creates paths for geographic regions, such as countries, states and counties.",type:"object",properties:i.extend({type:{enum:["geopath"]},field:{description:"The data field containing GeoJSON Feature data.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:false}},o.baseSchema),required:["type"],additionalProperties:false}},suYa:function(e,t,r){var n=r("VY+T"),i=r("SwAC"),a=r("GMts"),s=r("oHkv"),o=r("VkFx"),u=r("KKvq");function l(e){o.call(this);this._loader=new a(e)}l.RETINA=true;var f=o.prototype;var c=l.prototype=Object.create(f);c.constructor=l;c.initialize=function(e,t,r,i){this._canvas=s.instance(t,r);if(e){n.clear(e,0).appendChild(this._canvas);this._canvas.setAttribute("class","marks")}return f.initialize.call(this,e,t,r,i)};c.resize=function(e,t,r){f.resize.call(this,e,t,r);s.resize(this._canvas,this._width,this._height,this._padding,l.RETINA);return this};c.canvas=function(){return this._canvas};c.context=function(){return this._canvas?this._canvas.getContext("2d"):null};c.pendingImages=function(){return this._loader.pending()};function d(e,t){if(!t)return null;var r=new i,n,a,s,o,l;for(n=0,a=t.length;n<a;++n){s=t[n];o=s.mark;l=o.group;s=u[o.marktype].nested?o:s;r.union(p(s.bounds,l));if(s["bounds:prev"]){r.union(p(s["bounds:prev"],l))}}r.round();e.beginPath();e.rect(r.x1,r.y1,r.width(),r.height());e.clip();return r}function p(e,t){if(t==null)return e;var r=e.clone();for(;t!=null;t=t.mark.group){r.translate(t.x||0,t.y||0)}return r}c.render=function(e,t){var r=this.context(),n=this._padding,i=this._width+n.left+n.right,a=this._height+n.top+n.bottom,s;this._scene=e;r.save();s=d(r,t);this.clear(-n.left,-n.top,i,a);this.draw(r,e,s);r.restore();this._scene=null;return this};c.draw=function(e,t,r){var n=u[t.marktype];n.draw.call(this,e,t,r)};c.clear=function(e,t,r,n){var i=this.context();i.clearRect(e,t,r,n);if(this._bgcolor!=null){i.fillStyle=this._bgcolor;i.fillRect(e,t,r,n)}};c.loadImage=function(e){var t=this,r=this._scene;return this._loader.loadImage(e,function(){t.renderAsync(r)})};c.renderAsync=function(e){var t=this;if(t._async_id){clearTimeout(t._async_id)}t._async_id=setTimeout(function(){t.render(e);delete t._async_id},10)};e.exports=l},t3C9:function(e,t,r){"use strict";var n=r("ZAUf");var i={nominal:false,ordinal:false,quantitative:true,temporal:true};var a;(function(e){function t(e){var t=e.transform().filterNull;return e.reduce(function(e,r){if(t||t===undefined&&r.field&&r.field!=="*"&&i[r.type]){e[r.field]=true}else{e[r.field]=false}return e},{})}e.parseUnit=t;function r(e){var r=t(e);var i=e.child().component.data;if(!i.source){n.extend(r,i.nullFilter);delete i.nullFilter}return r}e.parseFacet=r;function a(e){var r=t(e);e.children().forEach(function(t){var i=t.component.data;if(e.compatibleSource(t)&&!n.differ(i.nullFilter,r)){n.extend(r,i.nullFilter);delete i.nullFilter}});return r}e.parseLayer=a;function s(e){var t=n.keys(e.nullFilter).filter(function(t){return e.nullFilter[t]});return t.length>0?[{type:"filter",test:t.map(function(e){return"(datum."+e+"!==null"+" && !isNaN(datum."+e+"))"}).join(" && ")}]:[]}e.assemble=s})(a=t.nullFilter||(t.nullFilter={}))},tGq9:function(e,t,r){var n=r("zF6n"),i=r("2I0S"),a=r("/2vj");function s(){this._cells={};this._aggr=[];this._stream=false}var o=s.Flags={ADD_CELL:1,MOD_CELL:2};var u=s.prototype;u.stream=function(e){if(e==null)return this._stream;this._stream=!!e;this._aggr=[];return this};u.key=function(e){if(e==null)return this._key;this._key=n.$(e);return this};u.groupby=function(e){this._dims=n.array(e).map(function(e,t){e=n.isString(e)?{name:e,get:n.$(e)}:n.isFunction(e)?{name:n.name(e)||e.name||"_"+t,get:e}:e.name&&n.isFunction(e.get)?e:null;if(e==null)throw"Invalid groupby argument: "+e;return e});return this.clear()};u.summarize=function(e){e=l(e);this._count=true;var t=this._aggr=[],r,a,s,o,u,f,c;for(s=0;s<e.length;++s){for(o=0,r=[],a=e[s];o<a.ops.length;++o){u=a.ops[o];if(u!=="count")this._count=false;f=a.as&&a.as[o]||u+(a.name==="*"?"":"_"+a.name);r.push(i[u](f))}c=a.get&&n.$(a.get)||(a.name==="*"?n.identity:n.$(a.name));t.push({name:a.name,measures:i.create(r,this._stream,c,this._assign)})}return this.clear()};u.count=function(){return this.summarize({"*":"count"})};u._assign=function(e,t,r){e[t]=r};function l(e){if(n.isArray(e)){return e}if(e==null){return[]}var t=[],r,i;for(r in e){i=n.array(e[r]);t.push({name:r,ops:i})}return t}u.clear=function(){return this._cells={},this};u._cellkey=function(e){var t=this._dims,r=t.length,n,i=String(t[0].get(e));for(n=1;n<r;++n){i+="|"+t[n].get(e)}return i};u._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))};u._newcell=function(e,t){var r={num:0,tuple:this._newtuple(e,t),flag:o.ADD_CELL,aggs:{}};var n=this._aggr,i;for(i=0;i<n.length;++i){r.aggs[n[i].name]=new n[i].measures(r,r.tuple)}if(r.collect){r.data=new a(this._key)}return r};u._newtuple=function(e){var t=this._dims,r={},n,i;for(n=0,i=t.length;n<i;++n){r[t[n].name]=t[n].get(e)}return this._ingest(r)};u._ingest=n.identity;u._add=function(e){var t=this._cell(e),r=this._aggr,n;t.num+=1;if(!this._count){if(t.collect)t.data.add(e);for(n=0;n<r.length;++n){t.aggs[r[n].name].add(e)}}t.flag|=o.MOD_CELL;if(this._on_add)this._on_add(e,t)};u._rem=function(e){var t=this._cell(e),r=this._aggr,n;t.num-=1;if(!this._count){if(t.collect)t.data.rem(e);for(n=0;n<r.length;++n){t.aggs[r[n].name].rem(e)}}t.flag|=o.MOD_CELL;if(this._on_rem)this._on_rem(e,t)};u._mod=function(e,t){var r=this._cell(t),i=this._cell(e),a=this._aggr,s;if(r!==i){r.num-=1;i.num+=1;if(r.collect)r.data.rem(t);if(i.collect)i.data.add(e)}else if(r.collect&&!n.isObject(e)){r.data.rem(t);r.data.add(e)}for(s=0;s<a.length;++s){r.aggs[a[s].name].rem(t);i.aggs[a[s].name].add(e)}r.flag|=o.MOD_CELL;i.flag|=o.MOD_CELL;if(this._on_mod)this._on_mod(e,t,r,i)};u._markMod=function(e){var t=this._cell(e);t.flag|=o.MOD_CELL};u.result=function(){var e=[],t=this._aggr,r,n,i;for(i in this._cells){r=this._cells[i];if(r.num>0){if(r.collect){r.data.values()}for(n=0;n<t.length;++n){r.aggs[t[n].name].set()}e.push(r.tuple)}else{delete this._cells[i]}r.flag=0}this._rems=false;return e};u.changes=function(e){var t=e||{add:[],rem:[],mod:[]},r=this._aggr,n,i,a,s;for(s in this._cells){n=this._cells[s];i=n.flag;if(n.collect){n.data.values()}for(a=0;a<r.length;++a){n.aggs[r[a].name].set()}if(n.num<=0){t.rem.push(n.tuple);delete this._cells[s];if(this._on_drop)this._on_drop(n)}else{if(this._on_keep)this._on_keep(n);if(i&o.ADD_CELL){t.add.push(n.tuple)}else if(i&o.MOD_CELL){t.mod.push(n.tuple)}}n.flag=0}this._rems=false;return t};u.execute=function(e){return this.clear().insert(e).result()};u.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t){this._add(e[t])}return this};u.remove=function(e){if(!this._stream){throw"Aggregator not configured for streaming removes."+" Call stream(true) prior to calling summarize."}for(var t=0;t<e.length;++t){this._rem(e[t])}this._rems=true;return this};u._consolidate=function(){if(!this._rems)return;for(var e in this._cells){if(this._cells[e].collect){this._cells[e].data.values()}}this._rems=false};e.exports=s},tKPL:function(e,t){var r={},n={},i=[].join;function a(e,t,n,a,s,o,u,l,f){var c=i.call(arguments);if(r[c]){return r[c]}var d=u*(Math.PI/180);var p=Math.sin(d);var h=Math.cos(d);n=Math.abs(n);a=Math.abs(a);var m=h*(l-e)*.5+p*(f-t)*.5;var g=h*(f-t)*.5-p*(l-e)*.5;var v=m*m/(n*n)+g*g/(a*a);if(v>1){v=Math.sqrt(v);n*=v;a*=v}var y=h/n;var _=p/n;var b=-p/a;var x=h/a;var k=y*l+_*f;var S=b*l+x*f;var T=y*e+_*t;var E=b*e+x*t;var A=(T-k)*(T-k)+(E-S)*(E-S);var O=1/A-.25;if(O<0)O=0;var M=Math.sqrt(O);if(o==s)M=-M;var w=.5*(k+T)-M*(E-S);var L=.5*(S+E)+M*(T-k);var N=Math.atan2(S-L,k-w);var C=Math.atan2(E-L,T-w);var R=C-N;if(R<0&&o===1){R+=2*Math.PI}else if(R>0&&o===0){R-=2*Math.PI}var I=Math.ceil(Math.abs(R/(Math.PI*.5+.001)));var D=[];for(var U=0;U<I;++U){var P=N+U*R/I;var z=N+(U+1)*R/I;D[U]=[w,L,P,z,n,a,p,h]}return r[c]=D}function s(e){var t=i.call(e);if(n[t]){return n[t]}var r=e[0],a=e[1],s=e[2],o=e[3],u=e[4],l=e[5],f=e[6],c=e[7];var d=c*u;var p=-f*l;var h=f*u;var m=c*l;var g=Math.cos(s);var v=Math.sin(s);var y=Math.cos(o);var _=Math.sin(o);var b=.5*(o-s);var x=Math.sin(b*.5);var k=8/3*x*x/Math.sin(b);var S=r+g-k*v;var T=a+v+k*g;var E=r+y;var A=a+_;var O=E+k*_;var M=A-k*y;return n[t]=[d*S+p*T,h*S+m*T,d*O+p*M,h*O+m*M,d*E+p*A,h*E+m*A]}e.exports={segments:a,bezier:s,cache:{segments:r,bezier:n}}},tT5v:function(e,t,r){var n=r("FF9f"),i=r("esTF"),a=r("YExv"),s=r("UTTf").path.line;function o(e,t){var r=t[0],n=r.pathCache||(r.pathCache=i(s(t)));a(e,n)}function u(e,t,r,n,i,a){var s=t.items,o=t.bounds;if(!s||!s.length||o&&!o.contains(i,a)){return null}if(e.pixelratio!=null&&e.pixelratio!==1){r*=e.pixelratio;n*=e.pixelratio}return l(e,s,r,n)?s[0]:null}var l=n.testPath(o,false);e.exports={draw:n.drawOne(o),pick:u,nested:true}},tb3c:function(e,t,r){e.exports={canvas:r("rO1A"),svg:r("54Eg")}},tbPx:function(e,t,r){var n=r("FF9f");function i(e,t,r){if(!t.items||!t.items.length)return;var i=t.items,a,s,o,u,l,f;for(var c=0,d=i.length;c<d;++c){a=i[c];if(r&&!r.intersects(a.bounds))continue;s=a.opacity==null?1:a.opacity;if(s===0)continue;o=a.x||0;u=a.y||0;l=a.width||0;f=a.height||0;if(a.fill&&n.fill(e,a,s)){e.fillRect(o,u,l,f)}if(a.stroke&&n.stroke(e,a,s)){e.strokeRect(o,u,l,f)}}}e.exports={draw:i,pick:n.pick()}},uHQN:function(e,t,r){var n=r("zF6n");var i=r("ggRp");var a=r("YsQl");var s=e.exports;s.unique=function(e,t,r){t=n.$(t);r=r||[];var i={},a,s,o;for(s=0,o=e.length;s<o;++s){a=t?t(e[s]):e[s];if(a in i)continue;i[a]=1;r.push(a)}return r};s.count=function(e){return e&&e.length||0};s.count.valid=function(e,t){t=n.$(t);var r,i,a,s=0;for(i=0,a=e.length;i<a;++i){r=t?t(e[i]):e[i];if(n.isValid(r))s+=1}return s};s.count.missing=function(e,t){t=n.$(t);var r,i,a,s=0;for(i=0,a=e.length;i<a;++i){r=t?t(e[i]):e[i];if(r==null)s+=1}return s};s.count.distinct=function(e,t){t=n.$(t);var r={},i,a,s,o=0;for(a=0,s=e.length;a<s;++a){i=t?t(e[a]):e[a];if(i in r)continue;r[i]=1;o+=1}return o};s.count.map=function(e,t){t=n.$(t);var r={},i,a,s;for(a=0,s=e.length;a<s;++a){i=t?t(e[a]):e[a];r[i]=i in r?r[i]+1:1}return r};s.median=function(e,t){if(t)e=e.map(n.$(t));e=e.filter(n.isValid).sort(n.cmp);return s.quantile(e,.5)};s.quartile=function(e,t){if(t)e=e.map(n.$(t));e=e.filter(n.isValid).sort(n.cmp);var r=s.quantile;return[r(e,.25),r(e,.5),r(e,.75)]};s.quantile=function(e,t,r){if(r===undefined){r=t;t=n.identity}t=n.$(t);var i=(e.length-1)*r+1,a=Math.floor(i),s=+t(e[a-1]),o=i-a;return o?s+o*(t(e[a])-s):s};s.sum=function(e,t){t=n.$(t);for(var r=0,i=0,a=e.length,s;i<a;++i){s=t?t(e[i]):e[i];if(n.isValid(s))r+=s}return r};s.mean=function(e,t){t=n.$(t);var r=0,i,a,s,o,u;for(a=0,o=0,s=e.length;a<s;++a){u=t?t(e[a]):e[a];if(n.isValid(u)){i=u-r;r=r+i/++o}}return r};s.mean.geometric=function(e,t){t=n.$(t);var r=1,i,a,s,o;for(o=0,i=0,a=e.length;o<a;++o){s=t?t(e[o]):e[o];if(n.isValid(s)){if(s<=0){throw Error("Geometric mean only defined for positive values.")}r*=s;++i}}r=i>0?Math.pow(r,1/i):0;return r};s.mean.harmonic=function(e,t){t=n.$(t);var r=0,i,a,s,o;for(o=0,i=0,a=e.length;o<a;++o){s=t?t(e[o]):e[o];if(n.isValid(s)){r+=1/s;++i}}return i/r};s.variance=function(e,t){t=n.$(t);if(!n.isArray(e)||e.length<2)return 0;var r=0,i=0,a,s,o,u;for(s=0,o=0;s<e.length;++s){u=t?t(e[s]):e[s];if(n.isValid(u)){a=u-r;r=r+a/++o;i=i+a*(u-r)}}i=i/(o-1);return i};s.stdev=function(e,t){return Math.sqrt(s.variance(e,t))};s.modeskew=function(e,t){var r=s.mean(e,t),n=s.median(e,t),i=s.stdev(e,t);return i===0?0:(r-n)/i};s.min=function(e,t){return s.extent(e,t)[0]};s.max=function(e,t){return s.extent(e,t)[1]};s.extent=function(e,t){t=n.$(t);var r,i,a,s,o=e.length;for(s=0;s<o;++s){a=t?t(e[s]):e[s];if(n.isValid(a)){r=i=a;break}}for(;s<o;++s){a=t?t(e[s]):e[s];if(n.isValid(a)){if(a<r)r=a;if(a>i)i=a}}return[r,i]};s.extent.index=function(e,t){t=n.$(t);var r=-1,i=-1,a,s,o,u,l=e.length;for(u=0;u<l;++u){o=t?t(e[u]):e[u];if(n.isValid(o)){a=s=o;r=i=u;break}}for(;u<l;++u){o=t?t(e[u]):e[u];if(n.isValid(o)){if(o<a){a=o;r=u}if(o>s){s=o;i=u}}}return[r,i]};s.dot=function(e,t,r){var i=0,a,s;if(!r){if(e.length!==t.length){throw Error("Array lengths must match.")}for(a=0;a<e.length;++a){s=e[a]*t[a];if(s===s)i+=s}}else{t=n.$(t);r=n.$(r);for(a=0;a<e.length;++a){s=t(e[a])*r(e[a]);if(s===s)i+=s}}return i};s.dist=function(e,t,r,i){var a=n.isFunction(r)||n.isString(r),s=e,o=a?e:t,u=a?i:r,l=u===2||u==null,f=e.length,c=0,d,p;if(a){t=n.$(t);r=n.$(r)}for(p=0;p<f;++p){d=a?t(s[p])-r(o[p]):s[p]-o[p];c+=l?d*d:Math.pow(Math.abs(d),u)}return l?Math.sqrt(c):Math.pow(c,1/u)};s.cohensd=function(e,t,r){var i=r?e.map(n.$(t)):e,a=r?e.map(n.$(r)):t,o=s.mean(i),u=s.mean(a),l=s.count.valid(i),f=s.count.valid(a);if(l+f-2<=0){return 0}var c=s.variance(i),d=s.variance(a),p=Math.sqrt(((l-1)*c+(f-1)*d)/(l+f-2));return p===0?0:(o-u)/p};s.covariance=function(e,t,r){var i=r?e.map(n.$(t)):e,a=r?e.map(n.$(r)):t,o=i.length,u=s.mean(i),l=s.mean(a),f=0,c=0,d,p,h,m,g;if(o!==a.length){throw Error("Input lengths must match.")}for(d=0;d<o;++d){p=i[d];m=n.isValid(p);h=a[d];g=n.isValid(h);if(m&&g){f+=(p-u)*(h-l);++c}else if(m||g){throw Error("Valid values must align.")}}return f/(c-1)};s.rank=function(e,t){t=n.$(t)||n.identity;var r=e.map(function(e,r){return{idx:r,val:t(e)}}).sort(n.comparator("val"));var i=e.length,a=Array(i),s=-1,o={},u,l,f;for(u=0;u<i;++u){l=r[u].val;if(s<0&&o===l){s=u-1}else if(s>-1&&o!==l){f=1+(u-1+s)/2;for(;s<u;++s)a[r[s].idx]=f;s=-1}a[r[u].idx]=u+1;o=l}if(s>-1){f=1+(i-1+s)/2;for(;s<i;++s)a[r[s].idx]=f}return a};s.cor=function(e,t,r){var i=r;r=i?e.map(n.$(r)):t;t=i?e.map(n.$(t)):e;var a=s.dot(t,r),o=s.mean(t),u=s.mean(r),l=s.stdev(t),f=s.stdev(r),c=e.length;return(a-c*o*u)/((c-1)*l*f)};s.cor.rank=function(e,t,r){var n=r?s.rank(e,t):s.rank(e),i=r?s.rank(e,r):s.rank(t),a=e.length,o,u,l;for(o=0,u=0;o<a;++o){l=n[o]-i[o];u+=l*l}return 1-6*u/(a*(a*a-1))};s.cor.dist=function(e,t,r){var i=r?e.map(n.$(t)):e,a=r?e.map(n.$(r)):t;var o=s.dist.mat(i),u=s.dist.mat(a),l=o.length,f,c,d,p;for(f=0,c=0,d=0,p=0;f<l;++f){c+=o[f]*o[f];d+=u[f]*u[f];p+=o[f]*u[f]}return Math.sqrt(p/Math.sqrt(c*d))};s.linearRegression=function(e,t,r){var i=r?e.map(n.$(t)):e,a=r?e.map(n.$(r)):t,o=i.length,u=s.covariance(i,a),l=s.stdev(i),f=s.stdev(a),c=u/(l*l),d=s.mean(a)-c*s.mean(i),p={slope:c,intercept:d,R:u/(l*f),rss:0},h,m;for(m=0;m<o;++m){if(n.isValid(i[m])&&n.isValid(a[m])){h=c*i[m]+d-a[m];p.rss+=h*h}}return p};s.bootstrap={};s.bootstrap.ci=function(e,t,r,i,o){var u,l,f,c,d,p,h;if(n.isFunction(t)||n.isString(t)){u=e.map(n.$(t));l=r;f=i;c=o}else{u=e;l=t;f=r;c=i}l=l?+l:1e3;f=f||.05;d=a.random.bootstrap(u,c);for(h=0,p=Array(l);h<l;++h){p[h]=s.mean(d.samples(u.length))}p.sort(n.numcmp);return[s.quantile(p,f/2),s.quantile(p,1-f/2)]};s.z={};s.z.ci=function(e,t,r){var i=e,o=t;if(n.isFunction(t)||n.isString(t)){i=e.map(n.$(t));o=r}o=o||.05;var u=o===.05?1.96:a.random.normal(0,1).icdf(1-o/2),l=s.mean(i),f=s.stdev(i)/Math.sqrt(s.count.valid(i));return[l-u*f,l+u*f]};s.z.test=function(e,t,r,i){if(n.isFunction(r)||n.isString(r)){return(i&&i.paired?u:l)(i,e,t,r)}else if(n.isArray(t)){return(r&&r.paired?u:l)(r,e,t)}else if(n.isFunction(t)||n.isString(t)){return o(r,e,t)}else{return o(t,e)}};function o(e,t,r){var n=e&&e.nullh||0,i=a.random.normal(0,1),o=s.mean(t,r),u=s.stdev(t,r)/Math.sqrt(s.count.valid(t,r));if(u===0){return o-n===0?1:0}var l=(o-n)/u;return 2*i.cdf(-Math.abs(l))}function u(e,t,r,i){var a=i?t.map(n.$(r)):t,o=i?t.map(n.$(i)):r,u=s.count(a),l=s.count(o),f=Array(),c;if(u!==l){throw Error("Array lengths must match.")}for(c=0;c<u;++c){if(n.isValid(a[c])&&n.isValid(o[c])){f.push(a[c]-o[c])}}return s.z.test(f,e&&e.nullh||0)}function l(e,t,r,i){var o=i?t.map(n.$(r)):t,u=i?t.map(n.$(i)):r,l=s.count.valid(o),f=s.count.valid(u),c=a.random.normal(0,1),d=s.mean(o)-s.mean(u)-(e&&e.nullh||0),p=Math.sqrt(s.variance(o)/l+s.variance(u)/f);if(p===0){return d===0?1:0}var h=d/p;return 2*c.cdf(-Math.abs(h))}s.dist.mat=function(e){var t=e.length,r=t*t,n=Array(r),i=a.zeros(t),s=0,o,u,l;for(u=0;u<t;++u){n[u*t+u]=0;for(l=u+1;l<t;++l){n[u*t+l]=o=Math.abs(e[u]-e[l]);n[l*t+u]=o;i[u]+=o;i[l]+=o}}for(u=0;u<t;++u){s+=i[u];i[u]/=t}s/=r;for(u=0;u<t;++u){for(l=u;l<t;++l){n[u*t+l]+=s-i[u]-i[l];n[l*t+u]=n[u*t+l]}}return n};s.entropy=function(e,t){t=n.$(t);var r,i,a=0,s=0,o=e.length;for(r=0;r<o;++r){a+=t?t(e[r]):e[r]}if(a===0)return 0;for(r=0;r<o;++r){i=(t?t(e[r]):e[r])/a;if(i)s+=i*Math.log(i)}return-s/Math.LN2};s.mutual=function(e,t,r,i){var a=i?e.map(n.$(t)):e,s=i?e.map(n.$(r)):t,o=i?e.map(n.$(i)):r;var u={},l={},f=o.length,c=0,d=0,p=0,h,m,g;for(g=0;g<f;++g){u[a[g]]=0;l[s[g]]=0}for(g=0;g<f;++g){u[a[g]]+=o[g];l[s[g]]+=o[g];c+=o[g]}m=1/(c*Math.LN2);for(g=0;g<f;++g){if(o[g]===0)continue;h=c*o[g]/(u[a[g]]*l[s[g]]);d+=o[g]*m*Math.log(h);p+=o[g]*m*Math.log(o[g]/c)}return[d,1+d/p]};s.mutual.info=function(e,t,r,n){return s.mutual(e,t,r,n)[0]};s.mutual.dist=function(e,t,r,n){return s.mutual(e,t,r,n)[1]};s.profile=function(e,t){var r=0,a=0,o=0,u=0,l=null,f=null,c=0,d=[],p={},h,m,g,v,y;for(g=0;g<e.length;++g){v=t?t(e[g]):e[g];p[v]=v in p?p[v]+1:(u+=1,1);if(v==null){++o}else if(n.isValid(v)){y=typeof v==="string"?v.length:v;if(l===null||y<l)l=y;if(f===null||y>f)f=y;h=y-r;r=r+h/++a;c=c+h*(y-r);d.push(y)}}c=c/(a-1);m=Math.sqrt(c);d.sort(n.cmp);return{type:i(e,t),unique:p,count:e.length,valid:a,missing:o,distinct:u,min:l,max:f,mean:r,stdev:m,median:v=s.quantile(d,.5),q1:s.quantile(d,.25),q3:s.quantile(d,.75),modeskew:m===0?0:(r-v)/m}};s.summary=function(e,t){t=t||n.keys(e[0]);var r=t.map(function(t){var r=s.profile(e,n.$(t));return r.field=t,r});return r.__summary__=true,r}},v0Fq:function(e,t,r){var n=r("zicW"),i={};n.extend(i,r("hv1v"));e.exports=n.extend(i,n)},v4pi:function(e,t,r){var n=r("CXWl");function i(e,t,r,i){(t||[]).forEach(function(t,s){r[s]=r[s]||n(e);a(t,s,r[s],i)})}function a(e,t,r,n){r.size(e.size?n.scale(e.size):null);r.shape(e.shape?n.scale(e.shape):null);r.fill(e.fill?n.scale(e.fill):null);r.stroke(e.stroke?n.scale(e.stroke):null);r.opacity(e.opacity?n.scale(e.opacity):null);if(e.orient)r.orient(e.orient);if(e.offset!=null)r.offset(e.offset);r.title(e.title||null);r.values(e.values||null);r.format(e.format!==undefined?e.format:null);r.formatType(e.formatType||null);var i=e.properties;r.titleProperties(i&&i.title||{});r.labelProperties(i&&i.labels||{});r.legendProperties(i&&i.legend||{});r.symbolProperties(i&&i.symbols||{});r.gradientProperties(i&&i.gradient||{})}e.exports=i;i.schema={defs:{legend:{type:"object",properties:{size:{type:"string"},shape:{type:"string"},fill:{type:"string"},stroke:{type:"string"},opacity:{type:"string"},orient:{enum:["left","right"],default:"right"},offset:{type:"number"},title:{type:"string"},values:{type:"array"},format:{type:"string"},formatType:{enum:["time","utc","string","number"]},properties:{type:"object",properties:{title:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},legend:{$ref:"#/defs/propset"},symbols:{$ref:"#/defs/propset"},gradient:{$ref:"#/defs/propset"}},additionalProperties:false}},additionalProperties:false,anyOf:[{required:["size"]},{required:["shape"]},{required:["fill"]},{required:["stroke"]},{required:["opacity"]}]}}}},vA75:function(e,t,r){"use strict"},vY52:function(e,t,r){"use strict";var n=r("P/aK");var i=r("WJ2w");var a=r("ZAUf");var s;(function(e){function t(e){var t={};if(e.has(n.COLOR)&&e.fieldDef(n.COLOR).type===i.ORDINAL){t[e.field(n.COLOR)]=[{type:"sort",by:e.field(n.COLOR)},{type:"rank",field:e.field(n.COLOR),output:{rank:e.field(n.COLOR,{prefn:"rank_"})}}]}return t}e.parseUnit=t;function r(e){var t=e.child().component.data;if(!t.source){var r=t.colorRank;delete t.colorRank;return r}return{}}e.parseFacet=r;function s(e){var t={};e.children().forEach(function(e){var r=e.component.data;if(!r.source){a.extend(t,r.colorRank);delete r.colorRank}});return t}e.parseLayer=s;function o(e){return a.flatten(a.vals(e.colorRank))}e.assemble=o})(s=t.colorRank||(t.colorRank={}))},wKIX:function(e,t,r){"use strict";var n=r("ZAUf");var i=r("P/aK");var a=r("z5TJ");function s(e){if(!e){return undefined}if(a.containsTimeUnit(e,a.TimeUnit.SECONDS)){return"second"}if(a.containsTimeUnit(e,a.TimeUnit.MINUTES)){return"minute"}if(a.containsTimeUnit(e,a.TimeUnit.HOURS)){return"hour"}if(a.containsTimeUnit(e,a.TimeUnit.DAY)||a.containsTimeUnit(e,a.TimeUnit.DATE)){return"day"}if(a.containsTimeUnit(e,a.TimeUnit.MONTH)){return"month"}if(a.containsTimeUnit(e,a.TimeUnit.YEAR)){return"year"}return undefined}t.smallestUnit=s;function o(e,t,r){if(r===void 0){r=false}var n="datetime(";function i(e,n){if(n===void 0){n=true}if(r){return t+(n?", ":"")}else{var i="";if(e==="quarter"){i="floor(month("+t+")"+"/3)*3"}else{i=e+"("+t+")"}return i+(n?", ":"")}}if(a.containsTimeUnit(e,a.TimeUnit.YEAR)){n+=i("year")}else{n+="2006, "}if(a.containsTimeUnit(e,a.TimeUnit.MONTH)){n+=i("month")}else if(a.containsTimeUnit(e,a.TimeUnit.QUARTER)){n+=i("quarter")}else{n+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.DAY)){n+=i("day",false)+"+1, "}else if(a.containsTimeUnit(e,a.TimeUnit.DATE)){n+=i("date")}else{n+="1, "}if(a.containsTimeUnit(e,a.TimeUnit.HOURS)){n+=i("hours")}else{n+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.MINUTES)){n+=i("minutes")}else{n+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.SECONDS)){n+=i("seconds")}else{n+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.MILLISECONDS)){n+=i("milliseconds",false)}else{n+="0"}return n+")"}t.parseExpression=o;function u(e,t){if(n.contains([i.ROW,i.COLUMN,i.SHAPE,i.COLOR],t)){return null}switch(e){case a.TimeUnit.SECONDS:return n.range(0,60);case a.TimeUnit.MINUTES:return n.range(0,60);case a.TimeUnit.HOURS:return n.range(0,24);case a.TimeUnit.DAY:return n.range(0,7);case a.TimeUnit.DATE:return n.range(1,32);case a.TimeUnit.MONTH:return n.range(0,12);case a.TimeUnit.QUARTER:return[0,3,6,9]}return null}t.rawDomain=u},"wLy+":function(e,t,r){var n=r("zicW"),i=r("zsFm").Tuple,a=r("J731"),s=r("4JPs"),o=r("acp7");function u(e){o.prototype.init.call(this,e);s.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value",default:"zero"}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var l=u.prototype=Object.create(o.prototype);l.constructor=u;l.batchTransform=function(e,t){a.debug(e,["stacking"]);var r=this.param("groupby").accessor,s=n.comparator(this.param("sortby").field),o=this.param("field").accessor,u=this.param("offset"),l=this._output;var c=f(t,r,s,o);for(var d=0,p=c.max;d<c.length;++d){var h=c[d],m=h.sum,g=u==="center"?(p-m)/2:0,v=u==="normalize"?1/m:1,y,_,b,x=g,k=0;for(y=0;y<h.length;++y){_=h[y];b=x;k+=o(_);x=v*k+g;i.set(_,l.start,b);i.set(_,l.end,x);i.set(_,l.mid,.5*(b+x))}}e.fields[l.start]=1;e.fields[l.end]=1;e.fields[l.mid]=1;return e};function f(e,t,r,n){var i=[],a=function(e){return e(u)},s,o,u,l,f,c,d;if(t==null){i.push(e.slice())}else{for(s={},o=0;o<e.length;++o){u=e[o];l=t.map(a);f=s[l]||(i.push(s[l]=[]),s[l]);f.push(u)}}for(l=0,d=0;l<i.length;++l){f=i[l];for(o=0,c=0;o<f.length;++o){c+=n(f[o])}f.sum=c;if(c>d)d=c;if(r!=null)f.sort(r)}i.max=d;return i}e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Stack transform",description:"Computes layout values for stacked graphs, as in stacked bar charts or stream graphs.",type:"object",properties:{type:{enum:["stack"]},groupby:{description:"A list of fields to split the data into groups (stacks).",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},sortby:{description:"A list of fields to determine the sort order of stacks.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},field:{description:"The data field that determines the thickness/height of stacks.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},offset:{description:"The baseline offset",oneOf:[{enum:["zero","center","normalize"]},{$ref:"#/refs/signal"}],default:"zero"},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"layout_start"},end:{type:"string",default:"layout_end"},mid:{type:"string",default:"layout_mid"}},additionalProperties:false}},additionalProperties:false,required:["type","groupby","field"]}},wWYS:function(e,t,r){"use strict";t.axis=r("cihr");t.aggregate=r("h/tW");t.bin=r("FmT5");t.channel=r("P/aK");t.compile=r("z/Ym").compile;t.config=r("Py5Z");t.data=r("x6Fv");t.encoding=r("QSMf");t.facet=r("vA75");t.fieldDef=r("o+e1");t.legend=r("ZE31");t.mark=r("j8cM");t.scale=r("Fw/k");t.shorthand=r("/7Ur");t.sort=r("yLwJ");t.spec=r("F9eC");t.stack=r("f2i1");t.timeUnit=r("z5TJ");t.transform=r("iIpz");t.type=r("WJ2w");t.util=r("ZAUf");t.validate=r("Utn/");t.version="__VERSION__"},x6Fv:function(e,t,r){"use strict";var n=r("WJ2w");(function(e){e[e["JSON"]="json"]="JSON";e[e["CSV"]="csv"]="CSV";e[e["TSV"]="tsv"]="TSV";e[e["TOPOJSON"]="topojson"]="TOPOJSON"})(t.DataFormatType||(t.DataFormatType={}));var i=t.DataFormatType;(function(e){e[e["SOURCE"]="source"]="SOURCE";e[e["SUMMARY"]="summary"]="SUMMARY";e[e["STACKED_SCALE"]="stacked_scale"]="STACKED_SCALE";e[e["LAYOUT"]="layout"]="LAYOUT"})(t.DataTable||(t.DataTable={}));var a=t.DataTable;t.SUMMARY=a.SUMMARY;t.SOURCE=a.SOURCE;t.STACKED_SCALE=a.STACKED_SCALE;t.LAYOUT=a.LAYOUT;t.types={boolean:n.Type.NOMINAL,number:n.Type.QUANTITATIVE,integer:n.Type.QUANTITATIVE,date:n.Type.TEMPORAL,string:n.Type.NOMINAL}},xNCi:function(e,t,r){var n=r("FF9f");var i=Math.PI/2;function a(e,t){var r=t.x||0,n=t.y||0,a=t.innerRadius||0,s=t.outerRadius||0,o=(t.startAngle||0)-i,u=(t.endAngle||0)-i;e.beginPath();if(a===0)e.moveTo(r,n);else e.arc(r,n,a,o,u,0);e.arc(r,n,s,u,o,1);e.closePath()}e.exports={draw:n.drawAll(a),pick:n.pickPath(a)}},yLCL:function(e,t,r){var n=r("zsFm").Tuple,i=r("J731"),a=r("4JPs"),s=r("acp7");function o(e){s.prototype.init.call(this,e);a.addParameters(this,{field:{type:"field",default:null},normalize:{type:"value",default:false}});this._output={rank:"rank"};return this.mutates(true)}var u=o.prototype=Object.create(s.prototype);u.constructor=o;u.batchTransform=function(e,t){i.debug(e,["rank"]);var r=this._output.rank,a=this.param("normalize"),s=this.param("field").accessor,o={},u,l=t.length,f,c,d;if(s){for(u=0,f=0;u<l;++u){c=t[u];o[d=s(c)]=o[d]||(o[d]=++f)}}for(u=0;u<l&&(c=t[u]);++u){if(s&&(d=s(c))){n.set(c,r,a?o[d]/f:o[d])}else{n.set(c,r,a?(u+1)/l:u+1)}}e.fields[r]=1;return e};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Rank transform",description:"Computes ascending rank scores for data tuples.",type:"object",properties:{type:{enum:["rank"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"A key field to used to rank tuples. "+"If undefined, tuples will be ranked in their observed order."},normalize:{description:"If true, values of the output field will lie in the range [0, 1].",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},output:{type:"object",description:"Rename the output data fields",properties:{rank:{type:"string",default:"rank"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},yLwJ:function(e,t,r){"use strict";(function(e){e[e["ASCENDING"]="ascending"]="ASCENDING";e[e["DESCENDING"]="descending"]="DESCENDING";e[e["NONE"]="none"]="NONE"})(t.SortOrder||(t.SortOrder={}));var n=t.SortOrder},yQql:function(e,t,r){var n=r("zF6n"),i=r("GXhC");var a={formats:[],format_map:{},truncate:n.truncate,pad:n.pad,day:i.day,month:i.month,quarter:i.quarter,utcQuarter:i.utcQuarter};function s(e){var t=o(e,"d");t="var __t; return "+t+";";return new Function("d",t).bind(a)}s.source=o;s.context=a;s.format=g;e.exports=s;s.clearFormatCache=function(){a.formats=[];a.format_map={}};s.property=function(e,t){var r=n.field(t).map(n.str).join("][");return e+"["+r+"]"};function o(e,t,r){t=t||"obj";var n=0;var i="'";var a=l;e.replace(a,function(a,s,o){i+=e.slice(n,o).replace(p,h);n=o+a.length;if(s){i+="'\n+((__t=("+u(s,t,r)+"))==null?'':__t)+\n'"}return a});return i+"'"}function u(e,t,r){var i=e.match(f);var a=i.shift().trim();var o=true;function u(e){e=e||"";if(o){o=false;p="String("+p+")"+e}else{p+=e}return p}function l(){return"(typeof "+p+'==="number"?new Date('+p+"):"+p+")"}function d(e){var t=v[0];if(t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'){t=t.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+t)}_=m(t,e);o=false;var r=e==="number"?p:l();p="this.formats["+_+"]("+r+")"}if(r)r[a]=1;var p=s.property(t,a);for(var h=0;h<i.length;++h){var g=i[h],v=null,y,_,b;if((y=g.indexOf(":"))>0){g=g.slice(0,y);v=i[h].slice(y+1).match(c).map(function(e){return e.trim()})}g=g.trim();switch(g){case"length":u(".length");break;case"lower":u(".toLowerCase()");break;case"upper":u(".toUpperCase()");break;case"lower-locale":u(".toLocaleLowerCase()");break;case"upper-locale":u(".toLocaleUpperCase()");break;case"trim":u(".trim()");break;case"left":_=n.number(v[0]);u(".slice(0,"+_+")");break;case"right":_=n.number(v[0]);u(".slice(-"+_+")");break;case"mid":_=n.number(v[0]);b=_+n.number(v[1]);u(".slice(+"+_+","+b+")");break;case"slice":_=n.number(v[0]);u(".slice("+_+(v.length>1?","+n.number(v[1]):"")+")");break;case"truncate":_=n.number(v[0]);b=v[1];b=b!=="left"&&b!=="middle"&&b!=="center"?"right":b;p="this.truncate("+u()+","+_+",'"+b+"')";break;case"pad":_=n.number(v[0]);b=v[1];b=b!=="left"&&b!=="middle"&&b!=="center"?"right":b;p="this.pad("+u()+","+_+",'"+b+"')";break;case"number":d("number");break;case"time":d("time");break;case"time-utc":d("utc");break;case"month":p="this.month("+p+")";break;case"month-abbrev":p="this.month("+p+",true)";break;case"day":p="this.day("+p+")";break;case"day-abbrev":p="this.day("+p+",true)";break;case"quarter":p="this.quarter("+p+")";break;case"quarter-utc":p="this.utcQuarter("+p+")";break;default:throw Error("Unrecognized template filter: "+g)}}return p}var l=/\{\{(.+?)\}\}|$/g,f=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,c=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g;var d={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var p=/\\|'|\r|\n|\u2028|\u2029/g;function h(e){return"\\"+d[e]}function m(e,t){var r=t+":"+e;if(a.format_map[r]==null){var n=i[t](e);var s=a.formats.length;a.formats.push(n);a.format_map[r]=s;return s}return a.format_map[r]}function g(e,t){return a.formats[m(e,t)]}},yaQe:function(e,t,r){var n=r("zicW");var i={"=":l,"==":l,"!=":l,">":l,">=":l,"<":l,"<=":l,and:f,"&&":f,or:f,"||":f,in:c};var a=function(){return 0};a.invert=a;function s(e,t){(t||[]).forEach(function(t){var r=i[t.type](e,t);var s=Function("args","db","signals","predicates",r.code);s.root=function(){return e.scene().items[0]};s.nullScale=a;s.isFunction=n.isFunction;s.signals=r.signals;s.data=r.data;e.predicate(t.name,s)});return t}function o(e,t){var r=n.field(e),i="signals["+r.map(n.str).join("][")+"]";t[r[0]]=1;return i}function u(e,t){var r=[],i=[],a={},s={};function u(e){a[e]=1}function l(e){s[e]=1}n.array(t).forEach(function(t,s){var f="o"+s,c="";if(t.value!==undefined){c=n.str(t.value)}else if(t.arg){c="args["+n.str(t.arg)+"]"}else if(t.signal){c=o(t.signal,a)}else if(t.predicate){var d=t.predicate,p=d&&(d.name||d),h=e.predicate(p),m="predicates["+n.str(p)+"]";h.signals.forEach(u);h.data.forEach(l);if(n.isObject(d)){n.keys(d).forEach(function(e){if(e==="name")return;var t=d[e];c+="args["+n.str(e)+"] = ";if(t.signal){c+=o(t.signal,a)}else if(t.arg){c+="args["+n.str(t.arg)+"]"}c+=", "})}c+=m+".call("+m+", args, db, signals, predicates)"}r.push(f);i.push(f+"=("+c+")")});return{code:"var "+r.join(", ")+";\n"+i.join(";\n")+";\n",signals:n.keys(a),data:n.keys(s)}}function l(e,t){var r=u(e,t.operands);if(t.type==="=")t.type="==";r.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\n"+"o1 = o1 instanceof Date ? o1.getTime() : o1;\n";return{code:r.code+"return "+["o0","o1"].join(t.type)+";",signals:r.signals,data:r.data}}function f(e,t){var r=u(e,t.operands),n=[],i=0,a=t.operands.length;while(n.push("o"+i++)<a);if(t.type==="and")t.type="&&";else if(t.type==="or")t.type="||";return{code:r.code+"return "+n.join(t.type)+";",signals:r.signals,data:r.data}}function c(e,t){var r=[t.item],i="";if(t.range)r.push.apply(r,t.range);if(t.scale){i=d(t.scale,r)}var a=u(e,r);i=a.code+i+"\n  var ordSet = null;\n";if(t.data){var s=n.field(t.field).map(n.str);i+="var where = function(d) { return d["+s.join("][")+"] == o0 };\n";i+="return db["+n.str(t.data)+"].filter(where).length > 0;"}else if(t.range){if(t.scale){i+="if (scale.length == 2) {\n"+"  ordSet = scale(o1, o2);\n"+"} else {\n"+"  o1 = scale(o1);\no2 = scale(o2);\n"+"}"}i+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n"+"  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;"}return{code:i,signals:a.signals,data:a.data.concat(t.data?[t.data]:[])}}function d(e,t){var r="var scale = ",i=t.length;if(n.isString(e)){t.push({value:e});r+="this.root().scale(o"+i+")"}else if(e.arg){t.push(e);r+="o"+i}else if(e.name){t.push(n.isString(e.name)?{value:e.name}:e.name);r+="(this.isFunction(o"+i+") ? o"+i+" : ";if(e.scope){t.push(e.scope);r+="((o"+(i+1)+".scale || this.root().scale)(o"+i+") || this.nullScale)"}else{r+="this.root().scale(o"+i+")"}r+=")"}if(e.invert===true){r+=".invert"}return r+";\n"}e.exports=s;s.schema={refs:{operand:{type:"object",oneOf:[{properties:{value:{}},required:["value"]},{properties:{arg:{type:"string"}},required:["arg"]},{$ref:"#/refs/signal"},{properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}},required:["predicate"]}]}},defs:{predicate:{type:"object",oneOf:[{properties:{name:{type:"string"},type:{enum:["==","!=",">","<",">=","<="]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2,maxItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{enum:["and","&&","or","||"]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{enum:["in"]},item:{$ref:"#/refs/operand"}},oneOf:[{properties:{range:{type:"array",items:{$ref:"#/refs/operand"},minItems:2},scale:{$ref:"#/refs/scopedScale"}},required:["range"]},{properties:{data:{type:"string"},field:{type:"string"}},required:["data","field"]}],required:["name","type","item"]}]}}}},ybCx:function(e,t,r){var n=r("zicW"),i=r("J731"),a=r("YvtE"),s=r("PwiD"),o=r("+5nH");function u(e){var t=arguments.length,u=2,l=arguments[t-1],f=new s,c=o.factory,d;if(t>u&&n.isFunction(arguments[t-u])){c=arguments[t-u];++u}if(t>u&&n.isObject(arguments[t-u])){f.config(arguments[t-u])}d=f.config();if(n.isObject(e)){h(e)}else if(n.isString(e)){var p=n.extend({url:e},d.load);n.json(p,function(e,t){if(e)g("SPECIFICATION LOAD FAILED: "+e);else h(t)})}else{g("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}function h(e){try{e=n.duplicate(e);var t=r("UaGl"),i=a(e,d,"width",500),s=a(e,d,"height",500),o=t.padding(a(e,d,"padding")),u=a(e,d,"background");f.signal("width",i);f.signal("height",s);f.signal("padding",o);m(e);f.defs({width:i,height:s,padding:o,viewport:e.viewport||null,background:t.background(u),signals:t.signals(f,e.signals),predicates:t.predicates(f,e.predicates),marks:t.marks(f,e,i,s),data:t.data(f,e.data,g)})}catch(e){g(e)}}function m(e){var t=e.signals||(e.signals=[]),r;t.some(function(e){return e.name==="cursor"?(r=e,true):false});if(!r)t.push(r={name:"cursor",streams:[]});r.init=r.init||{};r.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function g(e){var t;if(e){i.error(e)}else{t=c(f.buildIndexes())}if(l){if(l.length>1)l(e,t);else if(!e)l(t);l=null}}}e.exports=u;u.schema={defs:{spec:{title:"Vega visualization specification",type:"object",allOf:[{$ref:"#/defs/container"},{properties:{width:{type:"number"},height:{type:"number"},viewport:{type:"array",items:{type:"number"},maxItems:2},background:{$ref:"#/defs/background"},padding:{$ref:"#/defs/padding"},signals:{type:"array",items:{$ref:"#/defs/signal"}},predicates:{type:"array",items:{$ref:"#/defs/predicate"}},data:{type:"array",items:{$ref:"#/defs/data"}}}}]}}}},yixx:function(e,t,r){"use strict";var n=r("Fw/k");var i=r("ZAUf");var a;(function(e){function t(e){return e.channels().reduce(function(t,r){var i=e.scale(r);if(!e.field(r)||!i){return t}t[e.field(r)]=i.type===n.ScaleType.LOG;return t},{})}e.parseUnit=t;function r(e){var t=e.child().component.data;if(!t.source){var r=t.nonPositiveFilter;delete t.nonPositiveFilter;return r}return{}}e.parseFacet=r;function a(e){var t={};e.children().forEach(function(r){var n=r.component.data;if(e.compatibleSource(r)&&!i.differ(n.nonPositiveFilter,t)){i.extend(t,n.nonPositiveFilter);delete n.nonPositiveFilter}});return t}e.parseLayer=a;function s(e){return i.keys(e.nonPositiveFilter).filter(function(t){return e.nonPositiveFilter[t]}).map(function(e){return{type:"filter",test:"datum."+e+" > 0"}})}e.assemble=s})(a=t.nonPositiveFilter||(t.nonPositiveFilter={}))},"z/Ym":function(e,t,r){"use strict";var n=r("x6Fv");var i=r("F9eC");var a=r("ZAUf");var s=r("MtYt");function o(e){var t=i.normalize(e);var r=s.buildModel(t,null,"");r.parse();return u(r)}t.compile=o;function u(e){var t=e.config();var r=a.extend({width:1,height:1,padding:"auto"},t.viewport?{viewport:t.viewport}:{},t.background?{background:t.background}:{},{data:[].concat(e.assembleData([]),e.assembleLayout([])),marks:[l(e)]});return{spec:r}}function l(e){var t=a.extend({name:e.name("root"),type:"group"},e.description()?{description:e.description()}:{},{from:{data:n.LAYOUT},properties:{update:a.extend({width:{field:"width"},height:{field:"height"}},e.assembleParentGroupProperties(e.config().cell))}});return a.extend(t,e.assembleGroup())}t.assembleRootGroup=l},z5TJ:function(e,t,r){"use strict";(function(e){e[e["YEAR"]="year"]="YEAR";e[e["MONTH"]="month"]="MONTH";e[e["DAY"]="day"]="DAY";e[e["DATE"]="date"]="DATE";e[e["HOURS"]="hours"]="HOURS";e[e["MINUTES"]="minutes"]="MINUTES";e[e["SECONDS"]="seconds"]="SECONDS";e[e["MILLISECONDS"]="milliseconds"]="MILLISECONDS";e[e["YEARMONTH"]="yearmonth"]="YEARMONTH";e[e["YEARMONTHDAY"]="yearmonthday"]="YEARMONTHDAY";e[e["YEARMONTHDATE"]="yearmonthdate"]="YEARMONTHDATE";e[e["YEARDAY"]="yearday"]="YEARDAY";e[e["YEARDATE"]="yeardate"]="YEARDATE";e[e["YEARMONTHDAYHOURS"]="yearmonthdayhours"]="YEARMONTHDAYHOURS";e[e["YEARMONTHDAYHOURSMINUTES"]="yearmonthdayhoursminutes"]="YEARMONTHDAYHOURSMINUTES";e[e["YEARMONTHDAYHOURSMINUTESSECONDS"]="yearmonthdayhoursminutesseconds"]="YEARMONTHDAYHOURSMINUTESSECONDS";e[e["HOURSMINUTES"]="hoursminutes"]="HOURSMINUTES";e[e["HOURSMINUTESSECONDS"]="hoursminutesseconds"]="HOURSMINUTESSECONDS";e[e["MINUTESSECONDS"]="minutesseconds"]="MINUTESSECONDS";e[e["SECONDSMILLISECONDS"]="secondsmilliseconds"]="SECONDSMILLISECONDS";e[e["QUARTER"]="quarter"]="QUARTER";e[e["YEARQUARTER"]="yearquarter"]="YEARQUARTER";e[e["QUARTERMONTH"]="quartermonth"]="QUARTERMONTH";e[e["YEARQUARTERMONTH"]="yearquartermonth"]="YEARQUARTERMONTH"})(t.TimeUnit||(t.TimeUnit={}));var n=t.TimeUnit;t.TIMEUNITS=[n.YEAR,n.MONTH,n.DAY,n.DATE,n.HOURS,n.MINUTES,n.SECONDS,n.MILLISECONDS,n.YEARMONTH,n.YEARMONTHDAY,n.YEARMONTHDATE,n.YEARDAY,n.YEARDATE,n.YEARMONTHDAYHOURS,n.YEARMONTHDAYHOURSMINUTES,n.YEARMONTHDAYHOURSMINUTESSECONDS,n.HOURSMINUTES,n.HOURSMINUTESSECONDS,n.MINUTESSECONDS,n.SECONDSMILLISECONDS,n.QUARTER,n.YEARQUARTER,n.QUARTERMONTH,n.YEARQUARTERMONTH];function i(e,t,r){if(!e){return undefined}var i=[];if(a(e,n.YEAR)){i.push(r?"%y":"%Y")}if(a(e,n.QUARTER)){i.push("'}}Q{{"+t+" | quarter}}{{"+t+" | time:'")}if(a(e,n.MONTH)){i.push(r?"%b":"%B")}if(a(e,n.DAY)){i.push(r?"%a":"%A")}else if(a(e,n.DATE)){i.push("%d")}var s=[];if(a(e,n.HOURS)){s.push("%H")}if(a(e,n.MINUTES)){s.push("%M")}if(a(e,n.SECONDS)){s.push("%S")}if(a(e,n.MILLISECONDS)){s.push("%L")}var o=[];if(i.length>0){o.push(i.join("-"))}if(s.length>0){o.push(s.join(":"))}if(o.length>0){var u="{{"+t+" | time:'"+o.join(" ")+"'}}";return u.replace(new RegExp("{{"+t+" \\| time:''}}","g"),"")}else{return undefined}}t.template=i;function a(e,t){var r=e.toString();var n=t.toString();return r.indexOf(n)>-1}t.containsTimeUnit=a},zDyX:function(e,t){function r(e){this.mark=e}var n=r.prototype;n.hasPropertySet=function(e){var t=this.mark.def.properties;return t&&t[e]!=null};n.cousin=function(e,t){if(e===0)return this;e=e||-1;var r=this.mark,n=r.group,i=t==null?r.items.indexOf(this):t,a=n.items.indexOf(r)+e;return n.items[a].items[i]};n.sibling=function(e){if(e===0)return this;e=e||-1;var t=this.mark,r=t.items.indexOf(this)+e;return t.items[r]};n.remove=function(){var e=this,t=e.mark.items,r=t.indexOf(e);if(r>=0){if(r===t.length-1){t.pop()}else{t.splice(r,1)}}return e};n.touch=function(){if(this.pathCache)this.pathCache=null};e.exports=r},zF6n:function(e,t,r){(function(t){var r=e.exports;var n="__name__";r.namedfunc=function(e,t){return t[n]=e,t};r.name=function(e){return e==null?null:e[n]};r.identity=function(e){return e};r.true=r.namedfunc("true",function(){return true});r.false=r.namedfunc("false",function(){return false});r.duplicate=function(e){return JSON.parse(JSON.stringify(e))};r.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};r.extend=function(e){for(var t,r,n=1,i=arguments.length;n<i;++n){t=arguments[n];for(r in t){e[r]=t[r]}}return e};r.length=function(e){return e!=null&&e.length!=null?e.length:null};r.keys=function(e){var t=[],r;for(r in e)t.push(r);return t};r.vals=function(e){var t=[],r;for(r in e)t.push(e[r]);return t};r.toMap=function(e,t){return(t=r.$(t))?e.reduce(function(e,r){return e[t(r)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})};r.keystr=function(e){var t=e.length;if(!t)return"";for(var r=String(e[0]),n=1;n<t;++n){r+="|"+String(e[n])}return r};var i=Object.prototype.toString;r.isObject=function(e){return e===Object(e)};r.isFunction=function(e){return i.call(e)==="[object Function]"};r.isString=function(e){return typeof value==="string"||i.call(e)==="[object String]"};r.isArray=Array.isArray||function(e){return i.call(e)==="[object Array]"};r.isNumber=function(e){return typeof e==="number"||i.call(e)==="[object Number]"};r.isBoolean=function(e){return e===true||e===false||i.call(e)=="[object Boolean]"};r.isDate=function(e){return i.call(e)==="[object Date]"};r.isValid=function(e){return e!=null&&e===e};r.isBuffer=typeof t==="function"&&t.isBuffer||r.false;r.number=function(e){return e==null||e===""?null:+e};r.boolean=function(e){return e==null||e===""?null:e==="false"?false:!!e};r.date=function(e,t){var r=t?t:Date;return e==null||e===""?null:r.parse(e)};r.array=function(e){return e!=null?r.isArray(e)?e:[e]:[]};r.str=function(e){return r.isArray(e)?"["+e.map(r.str)+"]":r.isObject(e)||r.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var a=/\[(.*?)\]|[^.\[]+/g;r.field=function(e){return String(e).match(a).map(function(e){return e[0]!=="["?e:e[1]!=="'"&&e[1]!=='"'?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})};r.accessor=function(e){return e==null||r.isFunction(e)?e:r.namedfunc(e,Function("x","return x["+r.field(e).map(r.str).join("][")+"];"))};r.$=r.accessor;r.mutator=function(e){var t;return r.isString(e)&&(t=r.field(e)).length>1?function(e,r){for(var n=0;n<t.length-1;++n)e=e[t[n]];e[t[n]]=r}:function(t,r){t[e]=r}};r.$func=function(e,t){return function(n){n=r.$(n)||r.identity;var i=e+(r.name(n)?"_"+r.name(n):"");return r.namedfunc(i,function(e){return t(n(e))})}};r.$valid=r.$func("valid",r.isValid);r.$length=r.$func("length",r.length);r.$in=function(e,t){e=r.$(e);var n=r.isArray(t)?r.toMap(t):t;return function(t){return!!n[e(t)]}};r.comparator=function(e){var t=[];if(e===undefined)e=[];e=r.array(e).map(function(e){var n=1;if(e[0]==="-"){n=-1;e=e.slice(1)}else if(e[0]==="+"){n=+1;e=e.slice(1)}t.push(n);return r.accessor(e)});return function(n,i){var a,s,o,u;for(a=0,s=e.length;a<s;++a){o=e[a];u=r.cmp(o(n),o(i));if(u)return u*t[a]}return 0}};r.cmp=function(e,t){return(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0};r.numcmp=function(e,t){return e-t};r.stablesort=function(e,t,r){var n=e.reduce(function(e,t,n){return e[r(t)]=n,e},{});e.sort(function(e,i){var a=t(e),s=t(i);return a<s?-1:a>s?1:n[r(e)]-n[r(i)]});return e};r.permute=function(e){var t=e.length,r,n;while(t){n=Math.floor(Math.random()*t--);r=e[t];e[t]=e[n];e[n]=r}};r.pad=function(e,t,r,n){n=n||" ";var i=t-e.length;if(i<=0)return e;switch(r){case"left":return s(i,n)+e;case"middle":case"center":return s(Math.floor(i/2),n)+e+s(Math.ceil(i/2),n);default:return e+s(i,n)}};function s(e,t){var r="",n;for(n=0;n<e;++n)r+=t;return r}r.truncate=function(e,t,r,n,i){var a=e.length;if(a<=t)return e;i=i!==undefined?String(i):"…";var s=Math.max(0,t-i.length);switch(r){case"left":return i+(n?o(e,s,1):e.slice(a-s));case"middle":case"center":var u=Math.ceil(s/2),l=Math.floor(s/2);return(n?o(e,u):e.slice(0,u))+i+(n?o(e,l,1):e.slice(a-l));default:return(n?o(e,s):e.slice(0,s))+i}};function o(e,t,r){var n=0,i=e.split(u);if(r){e=(i=i.reverse()).filter(function(e){n+=e.length;return n<=t}).reverse()}else{e=i.filter(function(e){n+=e.length;return n<=t})}return e.length?e.join("").trim():i[0].slice(0,t)}var u=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(t,r("EuP9").Buffer)},zYzi:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)};var i=r("h/tW");var a=r("P/aK");var s=r("Py5Z");var o=r("x6Fv");var u=r("QSMf");var l=r("o+e1");var f=r("j8cM");var c=r("Fw/k");var d=r("WJ2w");var p=r("ZAUf");var h=r("HeGT");var m=r("MtYt");var g=r("pyUU");var v=r("V22v");var y=r("jxr4");var _=r("YBv9");var b=r("jGoH");var x=r("0ZZw");var k=r("TLMq");var S=r("f2i1");var T=function(e){n(t,e);function t(t,r,n){e.call(this,t,r,n);var i=this._mark=t.mark;var a=this._encoding=this._initEncoding(i,t.encoding||{});var s=this._config=this._initConfig(t.config,r,i,a);this._scale=this._initScale(i,a,s);this._axis=this._initAxis(a,s);this._legend=this._initLegend(a,s);this._stack=S.stack(i,a,s)}t.prototype._initEncoding=function(e,t){t=p.duplicate(t);u.forEach(t,function(t,r){if(!a.supportMark(r,e)){console.warn(r,"dropped as it is incompatible with",e);delete t.field;return}if(t.type){t.type=d.getFullName(t.type)}if((r===a.PATH||r===a.ORDER)&&!t.aggregate&&t.type===d.QUANTITATIVE){t.aggregate=i.AggregateOp.MIN}});return t};t.prototype._initConfig=function(e,t,r,n){var i=p.mergeDeep(p.duplicate(s.defaultConfig),t?t.config():{},e);i.mark=g.initMarkConfig(r,n,i);return i};t.prototype._initScale=function(e,t,r){return a.UNIT_SCALE_CHANNELS.reduce(function(n,i){if(u.has(t,i)||i===a.X&&u.has(t,a.X2)||i===a.Y&&u.has(t,a.Y2)){var s=t[i];var o=(s||{}).scale||{};var l=k.scaleType(o,s,i,e);n[i]=p.extend({type:l,round:r.scale.round,padding:r.scale.padding,useRawDomain:r.scale.useRawDomain,bandSize:i===a.X&&l===c.ScaleType.ORDINAL&&e===f.TEXT?r.scale.textBandWidth:r.scale.bandSize},o)}return n},{})};t.prototype._initAxis=function(e,t){return[a.X,a.Y].reduce(function(r,n){if(u.has(e,n)||n===a.X&&u.has(e,a.X2)||n===a.Y&&u.has(e,a.Y2)){var i=(e[n]||{}).axis;if(i!==false){r[n]=p.extend({},t.axis,i===true?{}:i||{})}}return r},{})};t.prototype._initLegend=function(e,t){return a.NONSPATIAL_SCALE_CHANNELS.reduce(function(r,n){if(u.has(e,n)){var i=e[n].legend;if(i!==false){r[n]=p.extend({},t.legend,i===true?{}:i||{})}}return r},{})};t.prototype.parseData=function(){this.component.data=v.parseUnitData(this)};t.prototype.parseSelectionData=function(){};t.prototype.parseLayoutData=function(){this.component.layout=_.parseUnitLayout(this)};t.prototype.parseScale=function(){this.component.scale=k.parseScaleComponent(this)};t.prototype.parseMark=function(){this.component.mark=x.parseMark(this)};t.prototype.parseAxis=function(){this.component.axis=h.parseAxisComponent(this,[a.X,a.Y])};t.prototype.parseAxisGroup=function(){return null};t.prototype.parseGridGroup=function(){return null};t.prototype.parseLegend=function(){this.component.legend=y.parseLegendComponent(this)};t.prototype.assembleData=function(e){return v.assembleData(this,e)};t.prototype.assembleLayout=function(e){return _.assembleLayout(this,e)};t.prototype.assembleMarks=function(){return this.component.mark};t.prototype.assembleParentGroupProperties=function(e){return m.applyConfig({},e,m.FILL_STROKE_CONFIG.concat(["clip"]))};t.prototype.channels=function(){return a.UNIT_CHANNELS};t.prototype.mapping=function(){return this.encoding()};t.prototype.stack=function(){return this._stack};t.prototype.toSpec=function(e,t){var r=p.duplicate(this._encoding);var n;n={mark:this._mark,encoding:r};if(!e){n.config=p.duplicate(this._config)}if(!t){n.data=p.duplicate(this._data)}return n};t.prototype.mark=function(){return this._mark};t.prototype.has=function(e){return u.has(this._encoding,e)};t.prototype.encoding=function(){return this._encoding};t.prototype.fieldDef=function(e){return this._encoding[e]||{}};t.prototype.field=function(e,t){if(t===void 0){t={}}var r=this.fieldDef(e);if(r.bin){t=p.extend({binSuffix:this.scale(e).type===c.ScaleType.ORDINAL?"_range":"_start"},t)}return l.field(r,t)};t.prototype.dataTable=function(){return this.dataName(u.isAggregate(this._encoding)?o.SUMMARY:o.SOURCE)};t.prototype.isUnit=function(){return true};return t}(b.Model);t.UnitModel=T},zicW:function(e,t,r){var n=r("zF6n");var i={version:r("NdEd").version,load:r("5AQc"),read:r("YGNx"),type:r("ggRp"),Aggregator:r("tGq9"),groupby:r("lkhv"),bins:r("prMK"),$bin:r("qmQ9").$bin,histogram:r("qmQ9").histogram,format:r("GXhC"),template:r("yQql"),time:r("mgrV")};n.extend(i,n);n.extend(i,r("3bKu"));n.extend(i,r("YsQl"));n.extend(i,r("uHQN"));n.extend(i,r("gjoU"));n.extend(i.format,r("nXcD"));i.print={table:i.format.table,summary:i.format.summary};e.exports=i},zsFm:function(e,t,r){e.exports={ChangeSet:r("T3kM"),Collector:r("NQGN"),DataSource:r("XCv7"),Dependencies:r("RXBq"),Graph:r("cM1m"),Node:r("dhxB"),Signal:r("Yn+d"),Tuple:r("Zrjw"),debug:r("J731").debug}}});
//# sourceMappingURL=0.7ded8be4c2e02d541f25.js.map